<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous" defer></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"saili.science","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.23.2","exturl":false,"sidebar":{"position":"right","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":true,"preload":true}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="Git 是一个开源的分布式版本控制软件。自诞生以来，Git 就以其开源、简单、快捷、分布式、高效等特点，应付了类似 Linux 内核源代码等各种复杂的项目开发需求。如今，Git 已经非常成熟，被广泛接受与使用，越来越多的项目都迁移到 Git 仓库中进行管理。目前常用Git服务商：GitHub &amp; Bitbucket &amp; GitLab &amp; Coding 。">
<meta property="og:type" content="article">
<meta property="og:title" content="Git 使用指南">
<meta property="og:url" content="http://saili.science/git/index.html">
<meta property="og:site_name" content="Alex LEE&#39;s Blog">
<meta property="og:description" content="Git 是一个开源的分布式版本控制软件。自诞生以来，Git 就以其开源、简单、快捷、分布式、高效等特点，应付了类似 Linux 内核源代码等各种复杂的项目开发需求。如今，Git 已经非常成熟，被广泛接受与使用，越来越多的项目都迁移到 Git 仓库中进行管理。目前常用Git服务商：GitHub &amp; Bitbucket &amp; GitLab &amp; Coding 。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26ls1exh2j209k0cugly.jpg">
<meta property="og:image" content="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26lst94qlj20e2078mxi.jpg">
<meta property="og:image" content="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26ltk35fkj20sn0fs0u1.jpg">
<meta property="og:image" content="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26lvaxkgwj21ha0at75c.jpg">
<meta property="og:image" content="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26lvpmbh7j20qa09kjsv.jpg">
<meta property="og:image" content="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26lwyfgaqj207305zmx2.jpg">
<meta property="og:image" content="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/006V2m65ly1fqrb7l7v4jj30p70h7wew.jpg">
<meta property="og:image" content="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26lw5mf29j20mn0etmy9.jpg">
<meta property="og:image" content="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26lxgki69j20af07pdg0.jpg">
<meta property="og:image" content="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dly1fib9nh43dqj20wo0ipjsf.jpg">
<meta property="og:image" content="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26lxxsmbaj20gs07sdfz.jpg">
<meta property="og:image" content="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26lykajw4j20ml0eoaba.jpg">
<meta property="og:image" content="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26lzhne1dj20mw0mxdjx.jpg">
<meta property="og:image" content="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/006V2m65ly1fqrb82czcnj30ke0803yr.jpg">
<meta property="og:image" content="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/006V2m65ly1fqrb8ad41yj30r7088js0.jpg">
<meta property="og:image" content="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/006V2m65ly1fqrb8hp5thj30lx0cdmy3.jpg">
<meta property="article:published_time" content="2017-04-02T04:39:04.000Z">
<meta property="article:modified_time" content="2025-07-21T06:22:10.000Z">
<meta property="article:author" content="Alex LEE">
<meta property="article:tag" content="Git">
<meta property="article:tag" content="Hexo">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26ls1exh2j209k0cugly.jpg">


<link rel="canonical" href="http://saili.science/git/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://saili.science/git/","path":"git/","title":"Git 使用指南"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Git 使用指南 | Alex LEE's Blog</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.1.0/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/6.1.3/pangu.umd.js" integrity="sha256-erngBMP3zzoIM6eqQ8dmrReh2vqCRgWmORroIfVoDlE=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script><script src="/js/bookmark.js" defer></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.5.0/search.js" integrity="sha256-xFC6PJ82SL9b3WkGjFavNiA9gm5z6UBxWPiu4CYjptg=" crossorigin="anonymous" defer></script>
<script src="/js/third-party/search/local-search.js" defer></script>





  <script src="/js/third-party/pace.js" defer></script>


  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js" defer></script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/3.0.1/quicklink.umd.js" integrity="sha256-44BednzIpUeQJcY8qtLyarFu0UCCTbgmWOvaoehiFQQ=" crossorigin="anonymous" defer></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":false,"archive":false,"delay":true,"timeout":3000,"priority":true,"url":"http://saili.science/git/"}</script>
  <script src="/js/third-party/quicklink.js" defer></script>

  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Alex LEE's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Alex LEE's Blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">77</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">25</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#git"><span class="nav-text">I. Git</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-bash"><span class="nav-text">II. Git Bash</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ssh-%E5%8D%8F%E8%AE%AE"><span class="nav-text">II.I. SSH 协议</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%B8%E5%90%8C%E9%82%AE%E7%AE%B1%E8%B4%A6%E6%88%B7"><span class="nav-text">II.I.I. 相同邮箱账户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8D%E5%90%8C%E9%82%AE%E7%AE%B1%E8%B4%A6%E6%88%B7"><span class="nav-text">II.I.II. 不同邮箱账户</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-remote"><span class="nav-text">II.II. git remote</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-fetch"><span class="nav-text">II.III. git fetch</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-pull"><span class="nav-text">II.IV. git pull</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-stash"><span class="nav-text">II.V. git stash</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%93%E5%BA%93%E5%85%8B%E9%9A%86"><span class="nav-text">II.VI. 仓库克隆</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E6%96%87%E4%BB%B6"><span class="nav-text">II.VII. 添加文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6"><span class="nav-text">II.VIII. 删除文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BF%BD%E7%95%A5%E8%AE%BE%E7%BD%AE"><span class="nav-text">II.IX. 忽略设置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-commit"><span class="nav-text">II.X. Git commit</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-push"><span class="nav-text">II.XI. git push</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%92%A4%E9%94%80%E6%9B%B4%E6%94%B9"><span class="nav-text">II.XII. 撤销更改</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86"><span class="nav-text">II.XIII. 分支管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E6%94%AF%E5%90%88%E5%B9%B6"><span class="nav-text">II.XIV. 分支合并</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0-fork-%E7%9A%84%E9%A1%B9%E7%9B%AE"><span class="nav-text">II.XV. 更新 fork 的项目</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pull-request"><span class="nav-text">II.XVI. Pull Request</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%90%E6%A8%A1%E5%9D%97%E7%AE%A1%E7%90%86"><span class="nav-text">II.XVII. 子模块管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%87%8C%E7%A8%8B%E7%A2%91%E7%AE%A1%E7%90%86"><span class="nav-text">II.XVIII. 里程碑管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B0%B8%E4%B9%85%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%E4%B8%8E%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95"><span class="nav-text">II.XIX. 永久删除文件与历史记录</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-gui"><span class="nav-text">III. Git GUI</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#github-desktop"><span class="nav-text">III.I. Github Desktop</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%93%E5%BA%93%E5%85%8B%E9%9A%86-1"><span class="nav-text">III.I.I. 仓库克隆</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B4%A6%E5%8F%B7%E4%BF%9D%E5%AD%98"><span class="nav-text">III.I.II. 账号保存</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E5%90%8C%E6%AD%A5%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-text">III.I.III. 本地同步到服务器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%8C%E6%AD%A5%E5%88%B0%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93"><span class="nav-text">III.I.IV. 服务器同步到本地仓库</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-pages"><span class="nav-text">IV. Git Pages</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B0%E5%BB%BA%E4%BB%93%E5%BA%93"><span class="nav-text">IV.I. 新建仓库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%8B"><span class="nav-text">IV.II. 博客建立</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2"><span class="nav-text">IV.III. 博客部署</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2"><span class="nav-text">IV.III.I. 本地部署</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#git-hooks"><span class="nav-text">IV.III.II. Git Hooks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#travis-ci"><span class="nav-text">IV.III.III. Travis CI</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gitlab-ci"><span class="nav-text">IV.III.IV. Gitlab CI</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#https%E9%93%BE%E6%8E%A5"><span class="nav-text">IV.III.IV.I. HTTPS链接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ssh%E9%93%BE%E6%8E%A5"><span class="nav-text">IV.III.IV.II. SSH链接</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%9A%E5%AE%A2%E5%A4%87%E4%BB%BD"><span class="nav-text">IV.IV. 博客备份</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8A%E4%BC%A0"><span class="nav-text">IV.IV.I. 上传</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD"><span class="nav-text">IV.IV.II. 下载</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#hexo-blog"><span class="nav-text">V. Hexo BLOG</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%9A%E5%AE%A2%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">V.I. 博客初始化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%9A%E5%AE%A2%E8%B0%83%E8%AF%95"><span class="nav-text">V.II. 博客调试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hexo%E5%8D%87%E7%BA%A7"><span class="nav-text">V.III. HEXO升级</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#next%E5%8D%87%E7%BA%A7"><span class="nav-text">V.IV. NEXT升级</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%90%E6%A8%A1%E5%9D%97%E6%9B%B4%E6%96%B0"><span class="nav-text">V.IV.I. 子模块更新</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#next%E4%B8%AA%E6%80%A7%E5%8C%96"><span class="nav-text">V.V. NEXT个性化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%82%B9%E5%87%BB%E4%BE%A7%E6%A0%8F%E5%A4%B4%E5%83%8F%E5%9B%9E%E5%88%B0%E9%A6%96%E9%A1%B5"><span class="nav-text">V.V.I. 点击侧栏头像回到首页</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%B7%E5%BC%8F"><span class="nav-text">V.V.II. 自定义样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E9%9D%99%E6%80%81%E8%83%8C%E6%99%AF%E5%9B%BE%E5%83%8F"><span class="nav-text">V.V.III. 设置静态背景图像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%9A%E6%96%87%E7%BD%AE%E9%A1%B6"><span class="nav-text">V.V.IV. 博文置顶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%9A%E6%96%87%E6%8E%92%E5%BA%8F"><span class="nav-text">V.V.V. 博文排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%9A%E6%96%87%E6%A0%87%E9%A2%98%E5%BA%8F%E5%8F%B7"><span class="nav-text">V.V.VI. 博文标题序号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AEemoji%E8%A1%A8%E6%83%85"><span class="nav-text">V.V.VII. 配置emoji表情</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AEsitemap"><span class="nav-text">V.V.VIII. 配置Sitemap</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E8%8F%9C%E5%8D%95%E9%A1%B5"><span class="nav-text">V.V.IX. 添加菜单页</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E9%98%85%E8%AF%BB%E6%A6%9C"><span class="nav-text">V.V.X. 添加阅读榜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F"><span class="nav-text">V.V.XI. 配置评论系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E9%9F%B3%E8%A7%86%E9%A2%91%E6%92%AD%E6%94%BE%E5%99%A8"><span class="nav-text">V.V.XII. 配置音视频播放器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BE%A7%E8%BE%B9%E6%A0%8F%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8"><span class="nav-text">V.V.XII.I. 侧边栏音乐播放器</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BE%9D%E8%B5%96%E5%BA%93-cdn-%E5%8A%A0%E9%80%9F"><span class="nav-text">V.V.XIII. 依赖库 CDN 加速</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BB%BA%E7%AB%8B%E5%8D%9A%E6%96%87"><span class="nav-text">V.VI. 建立博文</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%87%E7%AD%BE%E6%8F%92%E4%BB%B6"><span class="nav-text">V.VII. 标签插件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E6%9C%AC%E5%B1%85%E4%B8%AD%E5%BC%95%E7%94%A8"><span class="nav-text">V.VII.I. 文本居中引用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E5%9D%97"><span class="nav-text">V.VII.II. 代码块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#note-%E6%A0%87%E7%AD%BE"><span class="nav-text">V.VII.III. note 标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#button-%E6%A0%87%E7%AD%BE"><span class="nav-text">V.VII.IV. Button 标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tabs-%E6%A0%87%E7%AD%BE"><span class="nav-text">V.VII.V. Tabs 标签</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#jekyll-blog"><span class="nav-text">VI. Jekyll BLOG</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%84%E8%AE%BA%E5%8A%9F%E8%83%BD"><span class="nav-text">VI.I. 评论功能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%87%E7%AD%BE%E5%8A%9F%E8%83%BD"><span class="nav-text">VI.II. 标签功能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E8%B0%83%E8%AF%95"><span class="nav-text">VI.III. 本地调试</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9F%9F%E5%90%8D%E7%BB%91%E5%AE%9A"><span class="nav-text">VII. 域名绑定</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E4%B8%BB%E9%A1%B5"><span class="nav-text">VII.I. 项目主页</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%91%E5%AE%9A%E4%BA%8C%E7%BA%A7%E5%9F%9F%E5%90%8D"><span class="nav-text">VII.II. 绑定二级域名</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#https%E8%AE%BF%E9%97%AE"><span class="nav-text">VIII. HTTPS访问</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#gitlab-pages%E6%B7%BB%E5%8A%A0ssl"><span class="nav-text">VIII.I. GitLab Pages添加SSL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%98%BF%E9%87%8C%E4%BA%91%E8%AF%81%E4%B9%A6"><span class="nav-text">VIII.I.I. 阿里云证书</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cloudflare%E8%AF%81%E4%B9%A6"><span class="nav-text">VIII.I.II. CloudFlare证书</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#coding-pages%E6%B7%BB%E5%8A%A0ssl"><span class="nav-text">VIII.II. Coding Pages添加SSL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#cdn%E6%96%B9%E5%BC%8F"><span class="nav-text">VIII.III. CDN方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#cloudflare%E6%B7%BB%E5%8A%A0ssl"><span class="nav-text">VIII.III.I. CloudFlare添加SSL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%83%E7%89%9B%E5%85%8D%E8%B4%B9ssl%E8%AF%81%E4%B9%A6"><span class="nav-text">VIII.III.II. 七牛免费SSL证书</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lets-encrypt"><span class="nav-text">VIII.III.III. Let’s Encrypt</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Alex LEE"
      src="/uploads/avatar.jpg">
  <p class="site-author-name" itemprop="name">Alex LEE</p>
  <div class="site-description" itemprop="description">There is no royal road to learning.</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">83</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">77</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="mailto:im.sai.li@outlook.com" title="E-Mail → mailto:im.sai.li@outlook.com" rel="noopener me" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://t.me/sli1989" title="Telegram → https:&#x2F;&#x2F;t.me&#x2F;sli1989" rel="noopener me" target="_blank"><i class="telegram fa-fw"></i>Telegram</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://gitter.im/sli1989" title="Gitter → https:&#x2F;&#x2F;gitter.im&#x2F;sli1989" rel="noopener me" target="_blank"><i class="github-alt fa-fw"></i>Gitter</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          链接
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://github.com/sli1989/HEXO-NEXT-CUSTOM" title="https:&#x2F;&#x2F;github.com&#x2F;sli1989&#x2F;HEXO-NEXT-CUSTOM" rel="noopener" target="_blank">About the Blog</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://fontawesome.com/icons" title="https:&#x2F;&#x2F;fontawesome.com&#x2F;icons" rel="noopener" target="_blank">Font Awesome Icons</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://getemoji.com/" title="https:&#x2F;&#x2F;getemoji.com&#x2F;" rel="noopener" target="_blank">Copy and Paste Emoji</a>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://saili.science/git/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Alex LEE">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Alex LEE's Blog">
      <meta itemprop="description" content="There is no royal road to learning.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Git 使用指南 | Alex LEE's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Git 使用指南
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item-icon">
        <i class="fas fa-thumbtack"></i>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-07-21 14:22:10" itemprop="dateModified" datetime="2025-07-21T14:22:10+08:00">2025-07-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类：</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Software/" itemprop="url" rel="index"><span itemprop="name">Software</span></a>
        </span>
          <span> > </span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Software/Git/" itemprop="url" rel="index"><span itemprop="name">Git</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>25k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1:32</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>Git 是一个开源的分布式版本控制软件。自诞生以来，Git 就以其开源、简单、快捷、分布式、高效等特点，应付了类似 Linux 内核源代码等各种复杂的项目开发需求。如今，Git 已经非常成熟，被广泛接受与使用，越来越多的项目都迁移到 Git 仓库中进行管理。目前常用Git服务商：GitHub &amp; Bitbucket &amp; GitLab &amp; Coding 。</p>
<span id="more"></span>
<h1 id="git">I. Git</h1>
<p>Git 进行代码版本管理时，有两种操作方式：图形界面GUI和 命令行Command。</p>
<div id="gitdownload">

</div>
<ul>
<li>命令行Command（Git Bash）：没有平台限制，Windows、Linux（Unix、Mac OS X）下都支持，通过 gid add dir/files 添加文件，没有文件数限制。<a target="_blank" rel="noopener" href="https://git-scm.com/downloads">官网下载</a></li>
<li>图形界面GUI（Git GUI）：方便操作，推荐<a target="_blank" rel="noopener" href="https://www.gitkraken.com/">GitKraken</a>。</li>
</ul>
<p>Git 使用四种主要的协议来传输数据：本地传输，SSH 协议，Git 协议和 HTTPS 协议。更多内容点击查看<a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v1/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84-Git-%E5%8D%8F%E8%AE%AE">服务器上的 Git - 协议</a>。</p>
<ul>
<li><p>推荐使用SSH 协议。</p></li>
<li><p>https认证连接需要输入用户名密码。如果想避免交互式输入用户密码，可以将配置<code>git remote</code>：</p></li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin  https://用户名:密码@github.com/用户名/repository项目名.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>已经配置过的可以通过修改本地项目目录下的<code>.git/config</code>文件里的 [remote &quot;origin&quot;] 项下的 url 值，也可以通过git remote set-url origin 指令进行修改：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git remote set-url origin  https://用户名:密码@github.com/用户名/repository项目名.git</span><br><span class="line">git remote add origin  https://用户名:密码@github.com/用户名/repository项目名.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure></li>
<li><p>某些情况下使用https认证进行连接时会出现403错误。</p></li>
</ul>
<div id="gitbash">

</div>
<h1 id="git-bash">II. Git Bash</h1>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/geeeeeeeeek/git-recipes/wiki">Git 命令详解</a><br>
<a target="_blank" rel="noopener" href="https://wiki.shileizcc.com/display/GIT/Git">Git 入门</a></p>
</blockquote>
<p><a target="_blank" rel="noopener" href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000">最浅显易懂的Git教程</a>面向初学者，实用性超强，掌握了这些东西，你就可以通过Git轻松地完成你的工作。</p>
<h2 id="ssh-协议">II.I. SSH 协议</h2>
<blockquote>
<p>参考链接：<a target="_blank" rel="noopener" href="http://memoryboxes.github.io/blog/2014/12/07/duo-ge-gitzhang-hao-zhi-jian-de-qie-huan/">多个git账号之间的切换</a>，<a target="_blank" rel="noopener" href="https://gist.github.com/suziewong/4378434">Git的多账号如何处理？</a>，<a href="gitlab/github%20多账户下设置%20ssh%20keys">gitlab/github 多账户下设置 ssh keys</a>。</p>
</blockquote>
<p>不同网站可以使用同一个邮箱，这时候不用担心密钥的问题，因为这些网站 <code>push pull</code> 认证的唯一性的是邮箱。使用同一个邮箱，如果你不进行配置用户名和邮箱的话，则会使用全局的用户名和邮箱。<font color="blue">为了方便配置，用户名、姓名和邮箱都设置一致</font> 。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://munen.cc/tech/hexo-init.html#2-与-GitHub-建立联系">GitHub Pages + Hexo 搭建博客从入门到进阶</a></p>
</blockquote>
<p>打开 【设置】--&gt;【应用】--&gt;【可选功能】--&gt;【已安装功能】,查看 是否安装OpenSSH 服务器和 OpenSSH 客户端。以 管理员模式 运行命令行窗口，执行 net start sshd 命令。重新打开 cmd ，输入 ssh localhost 即可。</p>
<h3 id="相同邮箱账户">II.I.I. 相同邮箱账户</h3>
<ol style="list-style-type: decimal">
<li><p>创建账户，设置用户名。</p></li>
<li><p>打开<code>Git Bash</code></p></li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/.ssh    //转到C:/Users/Administrator/.ssh</span><br></pre></td></tr></table></figure></p>
<ol start="3" style="list-style-type: decimal">
<li>备份旧的数据并删除（跳过）</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Lists the files in your .ssh directory, if they exist</span></span><br><span class="line">$ <span class="built_in">ls</span> -al ~/.ssh</span><br><span class="line">$ <span class="built_in">mkdir</span> key_backup</span><br><span class="line">$ <span class="built_in">cp</span> id_rsa* key_backup</span><br><span class="line">$ <span class="built_in">rm</span> id_rsa*</span><br></pre></td></tr></table></figure></p>
<ol start="4" style="list-style-type: decimal">
<li>生成新的SSH Key</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;im.sai.li@outlook.com&quot;</span></span><br><span class="line"><span class="comment"># 填写注册email地址，然后一直“回车”ok</span></span><br><span class="line"><span class="comment"># 当然如果你想选择使用密码功能，那么在提示输入密码passphrase时输入你自己的密码。</span></span><br></pre></td></tr></table></figure></p>
<ol start="5" style="list-style-type: decimal">
<li>复制生成的密钥</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">clip &lt; ~/.ssh/id_rsa.pub</span><br><span class="line">或 用文本编辑工具打开id_rsa.pub文件</span><br></pre></td></tr></table></figure></p>
<ol start="6" style="list-style-type: decimal">
<li><p>登陆系统添加SSH公钥，直接粘贴到key文本框中， 点击 <code>add key</code>。<code>title</code>可以随便命名，然后点击<code>add</code>。</p></li>
<li><p>配置完成之后生成一个<code>.gitconfig</code>配置文件。</p></li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name <span class="string">&quot;sli1989&quot;</span></span><br><span class="line">$ git config --global user.email <span class="string">&quot;im.sai.li@outlook.com&quot;</span></span><br><span class="line">$ git config --list <span class="comment"># 查看配置</span></span><br></pre></td></tr></table></figure></p>
<div id="git-ssh-test">

</div>
<ol start="8" style="list-style-type: decimal">
<li>测试连接是否成功。提示：<code>Hi xx You have successfully authenticated, but GitHub does not provid。e shell access.</code>说明你连接成功了。（<a target="_blank" rel="noopener" href="https://docs.github.com/en/authentication/troubleshooting-ssh/using-ssh-over-the-https-port">Using SSH over the HTTPS port</a>）</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -T git@github.com</span><br><span class="line">$ ssh -T git@gitlab.com</span><br><span class="line">$ ssh -T git@git.coding.net</span><br></pre></td></tr></table></figure></p>
<ol start="9" style="list-style-type: decimal">
<li>在github中找到 Settings--personal acess token--generate new token，设置全部权限，然后复制API token。</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># keep it secret! Changing your password will generate a new token</span></span><br><span class="line">$ git config --global github.user xx <span class="comment"># github用户名</span></span><br><span class="line">$ git config --global github.token xx <span class="comment"># 右键粘贴API token。</span></span><br></pre></td></tr></table></figure></p>
<h3 id="不同邮箱账户">II.I.II. 不同邮箱账户</h3>
<p>如果你的项目邮箱不一致，用config文件管理它们，然后需要在项目根目录下进行单独配置。<a target="_blank" rel="noopener" href="https://www.awaimai.com/2200.html">git配置多个SSH Key</a></p>
<ol style="list-style-type: decimal">
<li>生成另一个账号的ssh密匙并复制。将里面的内容添加到后台。同平台的第一个的<code>SSH Key</code>中也要记得添加？</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C <span class="string">&quot;second_email&quot;</span> -f <span class="string">&quot;wendu&quot;</span></span><br><span class="line">%　重命名为wendu</span><br><span class="line"></span><br><span class="line">$ clip &lt; ~/.ssh/wendu.pub</span><br></pre></td></tr></table></figure></p>
<ol start="2" style="list-style-type: decimal">
<li>为了让SSH识别新的私钥，需将其添加到<code>SSH agent</code>中：</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh-agent bash</span><br><span class="line">ssh-add ~/.ssh/id_rsa</span><br><span class="line">ssh-add ~/.ssh/wendu</span><br></pre></td></tr></table></figure></p>
<ol start="3" style="list-style-type: decimal">
<li>生成<code>touch ~/.ssh/config</code>并打开<code>vi ~/.ssh/config</code>，编辑<code>config</code>：</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置ssh账户</span></span><br><span class="line">Host github.com</span><br><span class="line">HostName github.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~/.ssh/id_rsa</span><br><span class="line"></span><br><span class="line">Host gitlab.com</span><br><span class="line">HostName gitlab.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~/.ssh/id_rsa</span><br><span class="line"></span><br><span class="line">Host coding.net</span><br><span class="line">HostName github.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~/.ssh/id_rsa</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建一个别名，新建的帐号使用这个别名做克隆和更新。</span></span><br><span class="line"><span class="comment"># 比如，将Host替换成gmail.github.com，那么原地址是：git@github.com:test/Mywork.git，</span></span><br><span class="line"><span class="comment"># 替换后应该是：git@gmail.github.com:test/Mywork.git.</span></span><br><span class="line">Host qq.coding.net</span><br><span class="line">HostName coding.net</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~/.ssh/wendu</span><br></pre></td></tr></table></figure></p>
<ol start="4" style="list-style-type: decimal">
<li>2个账号，2个邮箱，自然不能使用之前设置的全局用户名和邮箱了。在项目根目录下进行单独配置。</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br><span class="line"></span><br><span class="line"><span class="comment">#1.取消global  </span></span><br><span class="line">git config --global --<span class="built_in">unset</span> user.name  </span><br><span class="line">git config --global --<span class="built_in">unset</span> user.email  </span><br><span class="line"></span><br><span class="line"><span class="comment">#2.设置每个项目repo的自己的user.email  </span></span><br><span class="line">$ git config user.name <span class="string">&quot;wendu&quot;</span></span><br><span class="line">$ git config user.email <span class="string">&quot;second_email&quot;</span></span><br></pre></td></tr></table></figure></p>
<ol start="5" style="list-style-type: decimal">
<li>测试连接。</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -T git@git.coding.net</span><br><span class="line">$ ssh -T git@qq.coding.net</span><br><span class="line"><span class="comment"># 之后输入 `yes` 并回车，就完成了。</span></span><br></pre></td></tr></table></figure></p>
<h2 id="git-remote">II.II. git remote</h2>
<p>为了便于管理，Git要求每个远程主机都必须指定一个主机名。<code>git remote</code>命令就用于管理主机名。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 列出所有远程主机</span></span><br><span class="line">$ git remote</span><br><span class="line"><span class="comment"># 参看远程主机的网址</span></span><br><span class="line">$ git remote -v</span><br><span class="line"><span class="comment"># 添加远程主机</span></span><br><span class="line">$ git remote add &lt;主机名&gt; &lt;网址&gt;</span><br><span class="line"><span class="comment"># 删除远程主机</span></span><br><span class="line">$ git remote <span class="built_in">rm</span> &lt;主机名&gt;</span><br><span class="line"><span class="comment"># 用于远程主机的改名</span></span><br><span class="line">$ git remote rename &lt;原主机名&gt; &lt;新主机名&gt;</span><br></pre></td></tr></table></figure>
<p>克隆版本库的时候，所使用的远程主机自动被Git命名为<code>origin</code>。如果想用其他的主机名，需要用<code>git clone</code>命令的<code>-o</code>选项指定。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> -o jQuery https://github.com/jquery/jquery.git</span><br></pre></td></tr></table></figure>
<h2 id="git-fetch">II.III. git fetch</h2>
<p>一旦远程主机的版本库有了更新（Git术语叫做commit），需要将这些更新取回本地，这时就要用到<code>git fetch</code>命令。默认情况下，<code>git fetch</code>取回所有分支（branch）的更新。如果只想取回特定分支的更新，可以指定分支名。所取回的更新，在本地主机上要用&quot;远程主机名/分支名&quot;的形式读取。比如<code>origin</code>主机的<code>master</code>，就要用<code>origin/master</code>读取。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 取回origin主机的master分支。</span></span><br><span class="line">$ git fetch origin master</span><br></pre></td></tr></table></figure>
<h2 id="git-pull">II.IV. git pull</h2>
<p><code>git pull</code>命令的作用是，取回远程主机某个分支的更新，再与本地的指定分支合并。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果当前分支只有一个追踪分支，连远程主机名都可以省略。</span></span><br><span class="line">$ git pull</span><br><span class="line"></span><br><span class="line"><span class="comment"># 远程分支是与当前分支合并</span></span><br><span class="line">$ git pull origin next</span><br><span class="line"><span class="comment"># 实质上，这等同于先做git fetch，再做git merge。</span></span><br><span class="line">$ git fetch origin</span><br><span class="line">$ git merge origin/next</span><br><span class="line"></span><br><span class="line"><span class="comment"># 取回origin主机的next分支，与本地的master分支合并</span></span><br><span class="line">$ git pull origin next:master</span><br></pre></td></tr></table></figure>
<h2 id="git-stash">II.V. git stash</h2>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v1/Git-%E5%B7%A5%E5%85%B7-%E5%82%A8%E8%97%8F%EF%BC%88Stashing%EF%BC%89">Git 工具 - 储藏（Stashing）</a></p>
</blockquote>
<p>储藏可以获取你工作目录的中间状态，也就是你修改过的被追踪的文件和暂存的变更，并将它保存到一个未完结变更的堆栈中，随时可以重新应用。你也可以在其中一个分支上保留一份储藏，随后切换到另外一个分支，再重新应用这些变更。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">$ git stash</span><br><span class="line"></span><br><span class="line">$ git status</span><br><span class="line"></span><br><span class="line">$ git checkout otherbranch</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认使用最近的储藏并尝试应用它</span></span><br><span class="line">$ git stash apply</span><br><span class="line"></span><br><span class="line">$ git stash list</span><br><span class="line">$ git stash apply stash@&#123;2&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># apply 选项只尝试应用储藏的工作——储藏的内容仍然在栈上</span></span><br><span class="line"><span class="comment"># 移除</span></span><br><span class="line">$ git stash list</span><br><span class="line">$ git stash drop stash@&#123;0&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新应用被暂存的变更</span></span><br><span class="line">$ git stash apply --index</span><br></pre></td></tr></table></figure>
<h2 id="仓库克隆">II.VI. 仓库克隆</h2>
<ol style="list-style-type: decimal">
<li><p>选择别人的远程仓库或者<a target="_blank" rel="noopener" href="https://github.com/new">自建远程仓库</a>。</p></li>
<li><p>建立本地仓库。</p></li>
</ol>
<ul>
<li><p>我们可以直接将服务器文件夹同步到本地：</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 把整个项目保存在本地仓库中</span></span><br><span class="line">$ git <span class="built_in">clone</span> git@gitlab.com:sli1989/sli1989.gitlab.io.git</span><br><span class="line">$ <span class="built_in">cd</span> sli1989.gitlab.io</span><br><span class="line"></span><br><span class="line"><span class="comment"># 同步github上的项目到本地</span></span><br><span class="line">$ git fetch origin <span class="comment"># 缓存区</span></span><br><span class="line">$ git merge origin/master <span class="comment"># 合并分支</span></span><br></pre></td></tr></table></figure></p>
<p>默认 clone 的是这个仓库的 master 分支。如果最新的代码不在 master 分支上，可以使用checkout命令来把远程分支取到本地：</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -r <span class="comment">#查看远程分支</span></span><br><span class="line"><span class="comment"># git branch -a #查看所有分支</span></span><br><span class="line"></span><br><span class="line">$ git checkout origin/other-branch</span><br><span class="line">$ git checkout -t origin/other-branch</span><br><span class="line"><span class="comment"># 使用-t参数，它默认会在本地建立一个和远程分支名字一样的分支折叠展开复制代码</span></span><br><span class="line"></span><br><span class="line">$ git fetch origin other-branch:other-branch</span><br><span class="line"><span class="comment"># 通过fetch命令来建立的本地分支不是一个track branch，而且成功后不会自动切换到该分支上</span></span><br></pre></td></tr></table></figure></p>
<p>不要在本地采用如下方法，这样建立的branch是以master为基础建立的，再pull下来的话，会和master的内容进行合并，有可能会发生冲突：</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git branch other-branch</span><br><span class="line">$ git checkout other-branch</span><br><span class="line">$ git pull origin other-branch:other-branch</span><br></pre></td></tr></table></figure></p></li>
<li><p>也可以自建本地仓库。在本地<strong>创建一个相同的项目</strong>，或者在目标文件夹中右键选择<code>git bash here</code>，进入命令行。</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> &#123;本地路径&#125;     <span class="comment"># 路径切换，如：cd e:/workspace</span></span><br><span class="line">$ <span class="built_in">mkdir</span> hello-world <span class="comment"># 新建hello-world文件夹</span></span><br><span class="line">$ <span class="built_in">cd</span> hello-world</span><br></pre></td></tr></table></figure></p></li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>连接远程github项目（只需第一次设置）：</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add origin git@gitlab.com:sli1989/sli1989.gitlab.io.git</span><br></pre></td></tr></table></figure></p>
<pre><code>如有错误提示：fatal: remote origin already exists，执行</code></pre>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git remote <span class="built_in">rm</span> origin</span><br><span class="line">$ git remote add origin git@github.com:sli1989/sli1989.github.io.git</span><br></pre></td></tr></table></figure></p>
<h2 id="添加文件">II.VII. 添加文件</h2>
<ol style="list-style-type: decimal">
<li>进入文件夹并初始化</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> hello-world    <span class="comment"># 打开这个文件夹</span></span><br><span class="line"><span class="comment"># 若右键选择`git bash here`则以此目录作为当前目录进入命令行状态。</span></span><br><span class="line"></span><br><span class="line">$ git checkout master</span><br><span class="line">$ git init  <span class="comment"># 初始化</span></span><br></pre></td></tr></table></figure></p>
<ol start="2" style="list-style-type: decimal">
<li>新建文件</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># （跳过）Touch 命令主要就是用来修改文件的访问时间和修改时间</span></span><br><span class="line">$ <span class="built_in">touch</span> README.md</span><br><span class="line"></span><br><span class="line">$ git add README.md</span><br><span class="line">$ git add .</span><br></pre></td></tr></table></figure></p>
<h2 id="删除文件">II.VIII. 删除文件</h2>
<ol style="list-style-type: decimal">
<li>查看本地分支下的文件</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span></span><br></pre></td></tr></table></figure></p>
<ol start="2" style="list-style-type: decimal">
<li>先查看有哪些文件可以删除,但是不真执行删除</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">rm</span> -r -n */src/\*</span><br></pre></td></tr></table></figure></p>
<ol start="3" style="list-style-type: decimal">
<li>删除命令</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">rm</span> test.txt</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">$ git <span class="built_in">rm</span> raindow -r -f <span class="comment"># 删除raindow文件夹及其下所有的文件</span></span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">$ git <span class="built_in">rm</span> -r --cached test.txt</span><br><span class="line"><span class="comment"># 如果只想从版本库中删除,但是本地仍旧保留的话,加上 cached 参数</span></span><br></pre></td></tr></table></figure></p>
<ol start="4" style="list-style-type: decimal">
<li>告诉你哪些文件被删除了（跳过）</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br></pre></td></tr></table></figure></p>
<ol start="5" style="list-style-type: decimal">
<li>如果误删，恢复到最新版本</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -- test.txt</span><br></pre></td></tr></table></figure></p>
<h2 id="忽略设置">II.IX. 忽略设置</h2>
<p>把不需要提交的文件放在忽略的文件夹中。在项目根目录下，和<code>.git</code> 同级目录下，新建一个<code>.gitignore</code>文件</p>
<p><img src="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26ls1exh2j209k0cugly.jpg"></p>
<h2 id="git-commit">II.X. Git commit</h2>
<p>提交到版本控制仓库，必须填写注释信息。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m <span class="string">&#x27;first commit&#x27;</span></span><br><span class="line">$ git commit -a -m “add new file”</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看已经提交的文件和缓存区中有什么文件</span></span><br><span class="line">$ git status</span><br><span class="line"><span class="comment"># 查看本地仓库修改了的内容</span></span><br><span class="line">$ git diff</span><br></pre></td></tr></table></figure>
<p>commit log 里面的 <code>#XX</code> 会显示成指向对应 Issue 的链接，对应地 Issue 里面也会出现这条 Issue 被哪个 <code>commit</code> 引用的提示。也可以使用 <code>user/repo#45</code> 引用其他仓库的 Issue 的链接。类似 <code>close/closes/closed/fix/fixes/fixed/resolve/resolves/resolved #XX</code>这样的，还会自动帮你把那条 Issue 给 close 掉。</p>
<blockquote>
<p>参考链接：<a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v1/Git-%E5%B7%A5%E5%85%B7-%E9%87%8D%E5%86%99%E5%8E%86%E5%8F%B2">Git 工具 - 重写历史</a>，<a target="_blank" rel="noopener" href="http://jitanghu.me/blog/modify-git-commit-history-by-git-rebase-i.html">用git Rebase -i来修改commit历史史</a>。</p>
</blockquote>
<ul>
<li>合并多个commit</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b new-feature master</span><br><span class="line"></span><br><span class="line">$ git commit ...</span><br><span class="line">$ git commit ...</span><br><span class="line"></span><br><span class="line">$ git checkout new-feature</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从HEAD版本开始往过去数3个版本</span></span><br><span class="line">$ git rebase -i HEAD~3</span><br><span class="line"><span class="comment"># 要合并的版本之前的版本号，不需要合并的 commit</span></span><br><span class="line">$ git rebase -i bca36d</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入到 vi 的编辑模式</span></span><br><span class="line"><span class="comment"># 输入s，除了第一个 commit 前方的命令改成 squash 或 s，ctrl+c 退出编辑模式</span></span><br><span class="line"><span class="comment"># 输入 :wq 以保存并退出</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果有冲突，需要修改，修改的时候要注意，保留最新的历史，不然我们的修改就丢弃了。</span></span><br><span class="line"><span class="comment"># 修改以后要记得敲下面的命令：</span></span><br><span class="line">$ git add .  </span><br><span class="line">$ git rebase --<span class="built_in">continue</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 放弃这次压缩的话</span></span><br><span class="line">$ git rebase --abort  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果没有冲突，或者冲突已经解决，则会出现编辑窗口</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改成新的 commit message</span></span><br><span class="line"><span class="comment"># 输入 :wq 以保存并退出</span></span><br><span class="line"></span><br><span class="line">$ git checkout master</span><br><span class="line">$ git merge new-feature</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>修改commit说明</p></li>
<li><p>修改最近一次提交说明。<code>$ git commit --amend</code>：这会把你带入文本编辑器，里面包含了你最近一次提交说明，供你修改。当你保存并退出编辑器，这个编辑器会写入一个新的提交，里面包含了那个说明，并且让它成为你的新的最近一次提交。</p></li>
<li><p>修改多个提交说明。使用rebase工具来衍合一系列的提交到它们原来所在的HEAD上而不是移到新的上。必须通过告诉命令衍合到哪次提交，来指明你需要重写的提交的回溯深度。</p></li>
</ul>
<h2 id="git-push">II.XI. git push</h2>
<p><code>git push</code>命令用于将本地分支的更新，推送到远程主机。所有本地操作都需要同步到远程仓库。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$ git push &lt;远程主机名&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;</span><br><span class="line"></span><br><span class="line">$ git push -u origin master  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果省略远程分支名，则表示将本地分支推送与之存在&quot;追踪关系&quot;的远程分支（通常两者同名），如果该远程分支不存在，则会被新建。</span></span><br><span class="line">$ git push origin master</span><br><span class="line"><span class="comment"># 如果当前分支与远程分支之间存在追踪关系，则本地分支和远程分支都可以省略。</span></span><br><span class="line">$ git push origin</span><br><span class="line"><span class="comment"># 如果当前分支只有一个追踪分支，那么主机名都可以省略。</span></span><br><span class="line">$ git push</span><br><span class="line"><span class="comment"># 如果当前分支与多个主机存在追踪关系，则可以使用-u选项指定一个默认主机，这样后面就可以不加任何参数使用git push。</span></span><br><span class="line">$ git push -u origin master</span><br><span class="line"><span class="comment"># 将本地的所有分支都推送到远程主机</span></span><br><span class="line">$ git push --all origin</span><br><span class="line"><span class="comment"># 如果远程主机的版本比本地版本更新，推送时Git会报错，要求先在本地做git pull合并差异，然后再推送到远程主机。这时，如果你一定要推送，可以使用--force选项。</span></span><br><span class="line">$ git push --force origin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认只推送当前分支，这叫做simple方式。此外，还有一种matching方式，会推送所有有对应的远程分支的本地分支。</span></span><br><span class="line"><span class="comment"># Git 2.0版本之前，默认采用matching方法，现在改为默认采用simple方式。</span></span><br><span class="line">$ git config --global push.default matching</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">$ git config --global push.default simple</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果省略本地分支名，则表示删除指定的远程分支，因为这等同于推送一个空的本地分支到远程分支。</span></span><br><span class="line">$ git push origin :master</span><br><span class="line"><span class="comment"># 等同于</span></span><br><span class="line">$ git push origin --delete master</span><br></pre></td></tr></table></figure>
<ul>
<li>如有错误提示：<code>error:failed to push som refs to...</code>，执行</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git pull origin master</span><br><span class="line">$ git push origin master</span><br></pre></td></tr></table></figure></p>
<ul>
<li>如有错误提示：<code>modified: xxx(modified content, untracked content)</code>，删除目录下面的<code>.git</code>目录。重新<code>git add .</code>即可</li>
</ul>
<p>如果需要推送到多个远程仓库:</p>
<ul>
<li><p>添加一个远程仓库<code>git remote add mirror git@github.com:theme-next/hexo-theme-next.git</code>，利用 <code>git push -u origin master</code>和<code>git push -u mirror master</code>分别进行推送。</p></li>
<li><p>添加一个远程仓库<code>git remote set-url --add github https://git.oschina.net/zxbetter/test.git</code>，利用<code>git push</code>进行推送。</p></li>
<li><p>修改文件目录中的<code>.git/config</code>配置文件，这种方法其实和方法二是一样的。如果报错，先分别将本地版本推送到远程仓库，然后再把全部URL都加入。然后第一次提交时需要执行<code>git push -u origin master</code>，再往后就只需要执行<code>git push</code>就能把修改提交到上述三个远端仓库了。</p></li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[remote <span class="string">&quot;origin&quot;</span>]</span><br><span class="line">    url = git@github.com:sli1989/sli1989.github.io.git</span><br><span class="line">    url = git@git.coding.net:sli1989/sli1989.git</span><br><span class="line">    url = git@gitlab.com:sli1989/sli1989.gitlab.io.git</span><br><span class="line">    fetch = +refs/heads/*:refs/remotes/origin/*</span><br><span class="line">[branch <span class="string">&quot;master&quot;</span>]</span><br><span class="line">    remote = origin</span><br><span class="line">    merge = refs/heads/master</span><br></pre></td></tr></table></figure></p>
<p>方法二和三在 push 的时候比较方便。但是在 pull 的时候只能从方法三中的第一个 url 地址拉取代码。而方法一则不存在这种问题（可能要解决冲突）。所以，如果只进行 push 操作，推荐方法二和三，如果也要进行 pull 操作，推荐方法一。<del>在 Git 2.0 将会更改默认的<code>push</code>动作为『只 push 当前 branch 到远端仓库』。如果想继续使用<code>git push both</code>命令需要手动设置一下<code>git push</code>的默认动作<code>git config --global push.default matching</code>。</del></p>
<h2 id="撤销更改">II.XII. 撤销更改</h2>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/geeeeeeeeek/git-recipes/wiki/2.6-%E5%9B%9E%E6%BB%9A%E9%94%99%E8%AF%AF%E7%9A%84%E4%BF%AE%E6%94%B9">回滚错误的修改</a><br>
<a href="www.fengerzh.com/git-reset/">Git 的 4 个阶段的撤销更改</a></p>
</blockquote>
<p>了解清楚如何检查各种修改之后，我们开始尝试各种撤销操作。</p>
<ul>
<li>已修改，未暂存：<code>git checkout .</code>或者<code>git reset --hard</code></li>
<li>已暂存，未提交：<code>git reset</code>+<code>git checkout .</code>或者<code>git reset --hard</code></li>
<li>已提交，未推送：<code>git reset --hard origin/master</code></li>
<li>已推送：<code>git reset --hard HEAD^</code> + <code>git push -f</code></li>
</ul>
<p>撤销已推送的一般步骤如下：</p>
<ol style="list-style-type: decimal">
<li><p>先<code>git log</code> 查看commit历史记录，找到<code>commit-id</code>。</p></li>
<li><p>本地代码库回滚：</p></li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git checkout the_branch</span><br><span class="line">git revert &lt;commit&gt;</span><br><span class="line"><span class="comment"># 针对历史中任何一个提交，回滚到commit-id，它没有移除后面的提交</span></span><br><span class="line">git reset --hard commit-id</span><br><span class="line"><span class="comment"># 从当前提交向前回溯，回滚到commit-id，将commit-id之后提交的commit都去除</span></span><br><span class="line">git reset --hard HEAD^</span><br><span class="line"><span class="comment"># 删除最后1次的提交记录</span></span><br><span class="line">git reset --hard HEAD~3</span><br><span class="line"><span class="comment"># 将最近3次的提交回滚</span></span><br></pre></td></tr></table></figure></p>
<ol start="3" style="list-style-type: decimal">
<li>远程代码库回滚：</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;recovery theme&quot;</span></span><br><span class="line"></span><br><span class="line">git push -f origin master</span><br><span class="line"><span class="comment"># 删除远程 the_branch</span></span><br><span class="line">git push origin :the_branch</span><br></pre></td></tr></table></figure></p>
<p>对于 gitlab，可以进入当前仓库的设置中的 <code>Protected branches</code> 一项，将当前 branch 的 protected 临时去掉，等这次 push 完成，再重新设置回 protected 。</p>
<h2 id="分支管理">II.XIII. 分支管理</h2>
<p>分支通俗说明，点击查看<a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF">Git 分支 - 远程分支</a>，<a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v1/Git-%E5%88%86%E6%94%AF-%E4%BD%95%E8%B0%93%E5%88%86%E6%94%AF">Git 分支 - 何谓分支</a>。</p>
<p>设置默认分支。WEB项目页<code>setting-brances</code>修改，设置了GitHub默认分支后，本地克隆后版本库的默认分支也将改变。</p>
<ul>
<li>查看分支</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -r <span class="comment"># 查看远程分支</span></span><br><span class="line">$ git branch -a  <span class="comment"># 查看所有分支</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>切换分支</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br></pre></td></tr></table></figure></p>
<ul>
<li>新建分支</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git branch</span><br><span class="line"><span class="comment"># 完成新分支的创建</span></span><br><span class="line">$ git checkout -b branchname</span><br><span class="line"><span class="comment"># 同时完成新分支的创建和分支切换。</span></span><br><span class="line"></span><br><span class="line">$ git checkout -b newBrach oldBrach</span><br><span class="line"><span class="comment"># 在oldBrach的基础上，复制创建一个新分支。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取tag的代码</span></span><br><span class="line">$ git tag</span><br><span class="line">$ git checkout -b branch_name tag_name</span><br></pre></td></tr></table></figure></p>
<ul>
<li>分支推送</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git add hello1</span><br><span class="line">$ git commit -m <span class="string">&quot;add hello1&quot;</span></span><br><span class="line">$ git push -u origin branchname</span><br></pre></td></tr></table></figure></p>
<ul>
<li>把远程某各分支拉去到本地的branchname下，如果没有branchname，则会在本地新建branchname</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git fetch origin branchname:branchname</span><br></pre></td></tr></table></figure></p>
<ul>
<li>获取远程分支remoteName 到本地新分支localName，并跳到localName分支</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout origin/remoteName -b localName</span><br></pre></td></tr></table></figure></p>
<ul>
<li>查看远程分支列表</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git ls-remote</span><br><span class="line">$ git ls-remote git@github.com:username/name.git</span><br></pre></td></tr></table></figure></p>
<ul>
<li>删除本地分支，如果错误信息显示不能删除当前工作分支，需先切换到其他分支。</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -d branchname （删除merge了的分支）</span><br><span class="line">$ git branch -D branchname （删除分支（不管它有没有merge））</span><br><span class="line"><span class="comment"># Git在删除分支时为避免数据丢失，默认禁止删除尚未合并的分支。参数-D则可强制删除尚未合并的分支。</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>删除远程分支</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git push --delete origin branchname</span><br><span class="line">或者 $ git push origin :branchname</span><br></pre></td></tr></table></figure></p>
<ul>
<li>删除HEAD分支</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin --delete HEAD</span><br></pre></td></tr></table></figure></p>
<ul>
<li>强制更新 Github上 的分支</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git push origin +master <span class="comment"># 方法一，使用+强制更新</span></span><br><span class="line">git push -f origin HEAD^:master <span class="comment"># 方法二，使用-f参数</span></span><br></pre></td></tr></table></figure></p>
<div id="git-merge">

</div>
<h2 id="分支合并">II.XIV. 分支合并</h2>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/geeeeeeeeek/git-recipes/wiki/5.1-%E4%BB%A3%E7%A0%81%E5%90%88%E5%B9%B6%EF%BC%9AMerge%E3%80%81Rebase-%E7%9A%84%E9%80%89%E6%8B%A9">Merge、Rebase 的选择</a><br>
<a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E9%AB%98%E7%BA%A7%E5%90%88%E5%B9%B6">Git 工具 - 高级合并</a><br>
<a target="_blank" rel="noopener" href="http://yanhaijing.com/git/2017/07/14/four-method-for-git-merge/">图解4种git合并分支方法</a><br>
<a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v1/Git-%E5%88%86%E6%94%AF-%E5%88%86%E6%94%AF%E7%9A%84%E6%96%B0%E5%BB%BA%E4%B8%8E%E5%90%88%E5%B9%B6">Git 分支 - 分支的新建与合并</a></p>
</blockquote>
<p>实际上在很多情况下，Pull Request所含提交有可能造成合并冲突，那样的话 GitHub 不再、也不能提供自动合并功能，就必须采用手工合并的方式。</p>
<ul>
<li>编辑文件解决冲突，再 add 冲突文件，再 commit。</li>
<li>对于一些二进制文件，或者不同版本的第三方库引起的冲突。这时候不可能去手工编辑来解决冲突了，必须在两个版本的库中进行一个选择。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在新分支上面合并</span></span><br><span class="line"><span class="comment"># 创建分支</span></span><br><span class="line">$ git checkout -b newbranch master</span><br><span class="line">$ git pull git://github.com/mygoare/lehuo.git master</span><br><span class="line"></span><br><span class="line"><span class="comment"># $ git status</span></span><br><span class="line"><span class="comment"># $ git diff</span></span><br><span class="line"><span class="comment"># 在合并过程中有冲突的时候， git 会把修改记录直接保存在文件中，让开发者判断文件如何解决合并。</span></span><br><span class="line"><span class="comment"># HEAD，即本地的代码</span></span><br><span class="line"><span class="comment"># ==以下则是来自远程的更改</span></span><br><span class="line"><span class="comment"># 用编辑器修改相应文件，把不需要的内容删除即可</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 把修改提交到newbranch分支上</span></span><br><span class="line">$ git add .</span><br><span class="line">$ git status</span><br><span class="line">$ git commit -m <span class="string">&quot;merge mygoare&#x27;s code&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 再合并到master分支上</span></span><br><span class="line">$ git checkout master</span><br><span class="line">$ git merge newbranch</span><br><span class="line">$ git push</span><br><span class="line">$ git branch -D newbranch</span><br></pre></td></tr></table></figure>
<p>如果<code>git pull</code>之后出现<code>Please enter a commit to explain why this merge is necessary</code>，如果要输入解释的话就需要:</p>
<ol style="list-style-type: decimal">
<li>按键盘字母 <code>i</code> 进入<code>insert</code>模式</li>
<li>修改最上面那行黄色合并信息，可以不修改</li>
<li>按键盘左上角<code>Esc</code></li>
<li>输入<code>:wq</code>，按回车键即可</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Fork 后的项目</span></span><br><span class="line">$ git <span class="built_in">clone</span> https://lei-shilei@bitbucket.org/lei-shilei/scrapy-51job-jobs.git</span><br><span class="line">$ <span class="built_in">cd</span> scrapy-51job-jobs</span><br><span class="line"><span class="comment"># 源项目地址</span></span><br><span class="line">$ git remote add updates https://MarsStone@bitbucket.org/MarsStone/scrapy-51job-jobs.git</span><br><span class="line">$ git remote update updates</span><br><span class="line">$ git rebase updates/master</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在合并过程中有冲突的时候， git 会把修改记录直接保存在文件中，让开发者判断文件如何解决合并。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新提交commit</span></span><br><span class="line">$ git add filename</span><br><span class="line">$ git commit -m <span class="string">&quot;add edit filename&quot;</span></span><br><span class="line"><span class="comment"># 自动跳转到随机生成的分之下，分支名称为 56f5e47</span></span><br><span class="line"></span><br><span class="line">$ git checkout master</span><br><span class="line">$ git merge 56f5e47</span><br><span class="line"><span class="comment"># 手工合并冲突</span></span><br><span class="line">$ git add . &amp;&amp; git commit -m <span class="string">&quot;add *&quot;</span> &amp;&amp; git push</span><br></pre></td></tr></table></figure>
<p>从一个分支合并特定的commits到另一个分支：</p>
<ul>
<li>合并某个分支上的单个commit</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master  </span><br><span class="line">$ git cherry-pick 62ecb3  </span><br></pre></td></tr></table></figure></p>
<ul>
<li>合并某个分支上的一系列commits，假设你需要合并feature分支的commit76cada ~62ecb3 到master分支。</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b newbranch 62ecb3  </span><br><span class="line">$ git rebase --onto master 76cada^   </span><br></pre></td></tr></table></figure></p>
<h2 id="更新-fork-的项目">II.XV. 更新 fork 的项目</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># clone 自己的 fork 分支到本地</span></span><br><span class="line">git <span class="built_in">clone</span> git@github.com:sli1989/hexo-theme-next.git</span><br><span class="line"><span class="built_in">cd</span> &lt;<span class="built_in">fold</span>&gt;</span><br><span class="line"><span class="comment"># 将原来的仓库指定为 upstream</span></span><br><span class="line">git remote add upstream git@github.com:theme-next/hexo-theme-next.git</span><br><span class="line"><span class="comment"># fetch 源分支的新版本到本地</span></span><br><span class="line">git fetch upstream</span><br><span class="line"><span class="comment"># 合并两个版本的代码</span></span><br><span class="line">git merge upstream/master</span><br><span class="line"><span class="comment"># 将合并后的代码 push</span></span><br><span class="line">git push origin branchname</span><br></pre></td></tr></table></figure>
<h2 id="pull-request">II.XVI. Pull Request</h2>
<ol style="list-style-type: decimal">
<li>先要fork别人仓库；</li>
<li>克隆fork的仓库到本机上并建立连接：</li>
</ol>
<ul>
<li><code>git clone git@github.com:sli1989/hexo-theme-next.git</code></li>
<li><code>git remote add origin git@github.com:sli1989/hexo-theme-next.git</code></li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>新建一个新分支，作为Pull Request的源分支：<code>git checkout -b pitch</code></li>
<li>编辑代码并commit：<code>git commit -a -m &quot;Further complement in README &amp; fix pic_url&quot;</code></li>
<li>push到自己的仓库中：<code>git push -u origin pitch</code></li>
<li>用WEB浏览fork出来的仓库页面，点右上角的【Pull Request】按钮，发起一个Pull Request。弹出的表单自动设置自己的仓库为源仓库，并设置指定源分支、目标仓库和目标分支。</li>
</ol>
<p>管理PR：</p>
<ul>
<li><p>Just edit files in «Files changed» tab. But in this case u can't to edit new files, only files which shown in «Files changed» tab.</p></li>
<li><p>Use Git to Add and push.</p></li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Add the other user as a remote</span></span><br><span class="line">$ git remote add otheruser https://github.com/otheruser/yourrepo.git</span><br><span class="line"><span class="comment"># Fetch</span></span><br><span class="line">$ git fetch otheruser</span><br><span class="line"><span class="comment"># Create a branch from their repo</span></span><br><span class="line">$ git checkout -b otheruser-master otheruser/master</span><br><span class="line"><span class="comment"># Now make some changes and commit. Push to their repo</span></span><br><span class="line">$ git push otheruser HEAD:master</span><br><span class="line"></span><br><span class="line"><span class="comment"># Merge them in if you&#x27;re good to go:</span></span><br><span class="line">$ git checkout master</span><br><span class="line">$ git merge otheruser/master</span><br></pre></td></tr></table></figure></p>
<ul>
<li>Use Git in my forked repo.</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b newmaster mirror</span><br><span class="line">$ git pull git://github.com/ifmos/hexo-theme-next.git master</span><br><span class="line">$ git remote add ifmos https://github.com/ifmos/hexo-theme-next.git</span><br><span class="line"><span class="comment"># make some changes and commit</span></span><br><span class="line">$ git add _config.yml</span><br><span class="line"><span class="comment"># git add -A</span></span><br><span class="line"><span class="comment"># git diffs</span></span><br><span class="line">$ git status</span><br><span class="line">$ git commit -m <span class="string">&quot;update style&quot;</span></span><br><span class="line">$ git push ifmos HEAD:master</span><br></pre></td></tr></table></figure></p>
<p>测试PR：</p>
<ul>
<li>可以直接本地建立分支进行git pull：</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b zhuzhuyule-addLeftMode master</span><br><span class="line">git pull git://github.com/zhuzhuyule/hexo-theme-next.git addLeftMode</span><br><span class="line"></span><br><span class="line">git checkout master</span><br><span class="line">git merge --no-ff zhuzhuyule-addLeftMode</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure></p>
<ul>
<li><code>git am</code>命令用于将一个 patch 文件，合并进入当前代码。Github 对每个 PR 会自动生成一个 patch 文件。我们下载该文件，合并进本地代码，就可以在本地查看效果了。后面网址里面的<code>/cbeust/testng</code>是目标仓库，<code>pull/17</code>表示该仓库收到的第17个 PR。</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -L http://github.com/cbeust/testng/pull/17.patch | git am</span><br></pre></td></tr></table></figure></p>
<pre><code>如果 PR 只包含一个 commit，那么也可以直接下载这个 commit 的 patch 文件。网址里面的`/sclasen/jcommander`是代码变更所在的那个仓库。</code></pre>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl https://github.com/sclasen/jcommander/commit/bd770141029f49bcfa2e0d6e6e6282b531e69179.patch | git am</span><br></pre></td></tr></table></figure></p>
<ul>
<li>另一种方法是为 PR 创建一个远程分支，追踪提交者的仓库。</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建远程仓库，指向 PR 提交者的仓库</span></span><br><span class="line">$ git remote add nullin git://github.com/nullin/testng.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从该远程仓库拉取代码</span></span><br><span class="line">$ git fetch nullin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将该仓库的某个分支合并到当前分支</span></span><br><span class="line">$ git merge kneath/error-page</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送到自己的仓库</span></span><br><span class="line">$ git push origin master</span><br></pre></td></tr></table></figure></p>
<pre><code>有时，PR 里面包含好几个 commit，但是你只想合并其中的一个或几个。这时可以使用`cherry-pick`命令，挑出你感兴趣的 commit。</code></pre>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 建立远程分支，追踪提交者的仓库</span></span><br><span class="line">$ git remote add nullin git://github.com/nullin/testng.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从该远程仓库拉取代码</span></span><br><span class="line">$ git fetch nullin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只将感兴趣的 commit 加入当前代码</span></span><br><span class="line">$ git cherry-pick commit1</span><br><span class="line">$ git cherry-pick commit2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送到自己的仓库</span></span><br><span class="line">$ git push origin master</span><br></pre></td></tr></table></figure></p>
<div id="git-submodule">

</div>
<h2 id="子模块管理">II.XVII. 子模块管理</h2>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000003076028">使用Git Submodule管理子模块</a><br>
<a target="_blank" rel="noopener" href="http://blog.gezhiqiang.com/2017/03/08/git-submodule/">git submodule 使用小结</a></p>
</blockquote>
<ul>
<li><p>添加子模块：<code>git submodule add &lt;repository&gt; [&lt;path&gt;]</code>（<code>git submodule add https://github.com/sli1989/hexo-theme-next.git themes/next</code>），添加后会多一个<code>.gitmodules</code>文件，文件的内容只是保存子模块的引用信息，包括路径和repo地址。</p></li>
<li><p>删除子模块：</p></li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 首先我们反初始化</span></span><br><span class="line"><span class="comment"># git submodule deinit themes/next</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">rm</span> -rf themes/next</span><br><span class="line"><span class="comment"># 这时，子模块文件被删除，同时 .gitmodules 文件中的相关信息被删除</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cd</span> .git</span><br><span class="line">$ vim config <span class="comment"># 删掉submodule信息</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cd</span> modules</span><br><span class="line">$ <span class="built_in">rm</span> -rf * <span class="comment"># 千万别敲错了，或者可以到文件夹手动删除</span></span><br><span class="line"><span class="comment"># $ rm -rf .git/modules/themes/next</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cd</span> ../..</span><br><span class="line"></span><br><span class="line">$ git <span class="built_in">rm</span> --cached themes/next</span><br><span class="line">$ <span class="built_in">rm</span> ./gitmodules</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者直接全部删除</span></span><br><span class="line"><span class="comment"># git submodule deinit --force themes/next</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>本地修改更新子模块。默认下 submodule 的 HEAD 处于游离状态，在修改子项目的时候，要用 <code>git checkout master</code> 将当前的子模块分支切换到 <code>master</code>，然后才能做修改和提交。子项目一旦产生变动，有新的commit id，父项目必需产生一个提交，更新对子项目commit id的引用。子模块被提交后父项目会检测到，正常提交即可！</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 首先，我们进入子模块</span></span><br><span class="line"><span class="built_in">cd</span> thems/next</span><br><span class="line"><span class="comment"># 检出master分支</span></span><br><span class="line">git checkout master</span><br><span class="line"></span><br><span class="line"><span class="comment"># 然后做修改</span></span><br><span class="line">vim some-file.py</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cd</span> hexo</span><br><span class="line">$ git status</span><br><span class="line"></span><br><span class="line"><span class="comment"># modified:   xx/xxxx/xxxx (new commits)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># add的时候注意再最后不要加 / 斜杠，否则会出现很棘手问题</span></span><br><span class="line"></span><br><span class="line">$ git add xx/xxxx/xxxx</span><br><span class="line">$ git commit -m <span class="string">&quot;Get something done&quot;</span></span><br><span class="line">$ git push origin master</span><br></pre></td></tr></table></figure></p>
<pre><code>如果你不慎忘记切换到 master 分支，又做了提交，可以用 cherry-pick 命令挽救。</code></pre>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git checkout master</span><br><span class="line"><span class="comment"># 记住Warning的 change-id</span></span><br><span class="line"></span><br><span class="line">git cherry-pick change-id</span><br><span class="line">git push</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>直接从远程仓库更新子模块。使用CI部署时，本地子模块文件<code>themes/next</code>必须存在，同时需要更新子模块的commit信息。</p></li>
<li>在父项目的目录下直接运行<code>git submodule foreach --recursive git pull origin master</code>，一次全部更新所有的 submodule。</li>
<li><p>或者在子模块的目录下面更新<code>git pull</code>，使用和git单独的一个项目是一样的。建议大家<code>git pull</code> 之后，立即执行 <code>git status</code>，如果发现子模块有修改，立即执行 <code>git submodule update</code>。更复杂一些，如果你的 submodule 又依赖了 submodule，那么很可能你需要在 <code>git pull</code> 和 <code>git submodule update</code> 之后，再分别到每个 submodule 中再执行一次 <code>git submodule update</code>，这里可以使用 <code>git submodule foreach</code> 命令来实现： <code>git submodule foreach git submodule update</code>。</p></li>
<li><p>当clone项目时有子模块存在时，第一次是不会clone出子模块的，需要执行一些命令：</p></li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@gitlab.com:sli1989/sli1989.gitlab.io.git</span><br><span class="line">$ <span class="built_in">cd</span> sli1989.gitlab.io</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化子模块 只在首次检出仓库时运行一次就行</span></span><br><span class="line">$ git submodule init</span><br><span class="line"><span class="comment"># 将子模块的文件check出来 每次更新或切换分支后都需要运行一下</span></span><br><span class="line">$ git submodule update</span><br><span class="line"><span class="comment"># $ git submodule update --init</span></span><br><span class="line"><span class="comment"># 现在所有子模块已经把被checkout到本地，是不是很棒！</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以直接采用</span></span><br><span class="line">$ git <span class="built_in">clone</span> &lt;repository&gt; --recursive</span><br><span class="line">$ git submodule update --init --recursive</span><br></pre></td></tr></table></figure></p>
<h2 id="里程碑管理">II.XVIII. 里程碑管理</h2>
<p>里程碑即tag，其管理和分支管理非常类似。里程碑和分支一样也是以引用的形式存在的，保存在<code>.git/refs/tags/</code>路径下。引用可能指向一个提交，但也可能是其他类型（Tag对象）。</p>
<ul>
<li>轻量级里程碑：用<code>git tag &lt;tagname&gt; [&lt;commit&gt;]</code> 命令创建，引用直接指向一个提交对象<code>&lt;commit&gt;</code>。</li>
<li>带说明的里程碑：用<code>git tag -a &lt;tagname&gt; [&lt;commit&gt;]</code> 命令创建，并且在创建时需要提供创建里程碑的说明。Git会创建一个tag对象保存里程碑说明、里程碑的指向、创建里程碑的用户等信息，里程碑引用指向该Tag对象。</li>
<li>带签名的里程碑：用<code>git tag -s &lt;tagname&gt; [&lt;commit&gt;]</code> 命令创建。是在带说明的里程碑的基础上引入了PGP签名，保证了所创建的里程碑的完整性和不可拒绝性。</li>
</ul>
<p>下面演示一下里程碑的创建和管理。</p>
<ol style="list-style-type: decimal">
<li>先在本地创建一个新提交。</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">touch</span> hello1</span><br><span class="line">$ git add hello1</span><br><span class="line">$ git commit -m <span class="string">&quot;add hello1 for mark.&quot;</span></span><br></pre></td></tr></table></figure></p>
<ol start="2" style="list-style-type: decimal">
<li>本地创建里程碑<code>mytag1</code>、<code>mytag2</code>和<code>mytag3</code>。</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -m <span class="string">&quot;Tag on initial commit&quot;</span> mytag1 HEAD^</span><br><span class="line">$ git tag -m <span class="string">&quot;Tag on new commit&quot;</span>     mytag2</span><br><span class="line">$ git tag mytag3</span><br></pre></td></tr></table></figure></p>
<ol start="3" style="list-style-type: decimal">
<li>查看新建立的里程碑。</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -l -n1</span><br><span class="line">mytag1          Tag on initial commit</span><br><span class="line">mytag2          Tag on new commit</span><br><span class="line">mytag3          add hello1 <span class="keyword">for</span> mark.</span><br></pre></td></tr></table></figure></p>
<ol start="4" style="list-style-type: decimal">
<li>将本地里程碑推送到GitHub远程版本库。</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin refs/tags/*</span><br><span class="line">Counting objects: 6, <span class="keyword">done</span>.</span><br><span class="line">Delta compression using up to 2 threads.</span><br><span class="line">Compressing objects: 100% (4/4), <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (5/5), 548 bytes, <span class="keyword">done</span>.</span><br><span class="line">Total 5 (delta 0), reused 0 (delta 0)</span><br><span class="line">To git@github.com:sli1989/sli1989.github.io.git</span><br><span class="line"> * [new tag]         mytag1 -&gt; mytag1</span><br><span class="line"> * [new tag]         mytag2 -&gt; mytag2</span><br><span class="line"> * [new tag]         mytag3 -&gt; mytag3</span><br></pre></td></tr></table></figure></p>
<ol start="5" style="list-style-type: decimal">
<li>删除本地里程碑。</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -d mytag3</span><br><span class="line">Deleted tag <span class="string">&#x27;mytag3&#x27;</span> (was c71231c)</span><br></pre></td></tr></table></figure></p>
<ol start="6" style="list-style-type: decimal">
<li>删除GitHub远程版本库中的里程碑。</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin :mytag3</span><br><span class="line">To git@github.com:sli1989/sli1989.github.io.git</span><br><span class="line">  [deleted]         mytag3</span><br></pre></td></tr></table></figure></p>
<h2 id="永久删除文件与历史记录">II.XIX. 永久删除文件与历史记录</h2>
<ol style="list-style-type: decimal">
<li>从仓库总清除文件</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git filter-branch --force --index-filter <span class="string">&#x27;git rm --cached --ignore-unmatch path-of-remove-file&#x27;</span> --prune-empty --tag-name-filter <span class="built_in">cat</span> -- --all</span><br><span class="line"><span class="comment"># path-of-remove-file是你要删除的文件的相对目录(相对于git repo的根目录),可以使用通配符*匹配文件进行批量删除</span></span><br><span class="line"><span class="comment"># 如果执行上述命令后出现的提示信息中有unchanged字样,说明repo中没有找到path-of-remove-file,请仔细检查路径和文件名是否正确</span></span><br></pre></td></tr></table></figure></p>
<ol start="2" style="list-style-type: decimal">
<li>本地同步到服务器</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin master --force</span><br></pre></td></tr></table></figure></p>
<ol start="3" style="list-style-type: decimal">
<li>回收磁盘空间</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf .git/refs/original/</span><br><span class="line"><span class="built_in">du</span> -sh .git</span><br><span class="line">git reflog expire --expire=now --all</span><br><span class="line">git gc --prune=now</span><br><span class="line">u -sh .git/*</span><br><span class="line">git gc --aggressive --prune=now</span><br><span class="line"><span class="built_in">du</span> -sh .git</span><br></pre></td></tr></table></figure></p>
<p>如何删除这些历史记录，形成一个全新的仓库，并且保持代码不变呢？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout --orphan latest_branch</span><br><span class="line">$ git add -A</span><br><span class="line">$ git commit -am &quot;init&quot;</span><br><span class="line">$ git branch -D master</span><br><span class="line">$ git branch -m master</span><br><span class="line">$ git push -f origin master</span><br></pre></td></tr></table></figure>
<h1 id="git-gui">III. Git GUI</h1>
<blockquote>
<p>参考链接 <a target="_blank" rel="noopener" href="http://www.cnblogs.com/iruxu/p/gitgui.html">Git可视化极简易教程 —— Git GUI使用方法</a>。</p>
</blockquote>
<p>Git GUI提供了Git可视化操作，避免命令行输入。</p>
<blockquote>
<p>参考文献<a target="_blank" rel="noopener" href="http://www.cnblogs.com/schaepher/p/4823181.html">GitHub Desktop下载及使用</a>，<a target="_blank" rel="noopener" href="http://www.jianshu.com/p/6063974849db">Github Desktop的使用教程</a>。</p>
</blockquote>
<div id="gitKraken">

</div>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.gitkraken.com/">GitKraken</a>（推荐使用），这款工具操作比较方便，对没有太多git使用经验的新手比较友好，学习成本相对较低。尤其喜欢的一点就是它的分支和提交非常清晰。</li>
<li><a target="_blank" rel="noopener" href="https://desktop.github.com/">Github Desktop</a>不好用，其图形化界面功能有限。</li>
</ul>
<h2 id="github-desktop">III.I. Github Desktop</h2>
<p>如果<a href="#gitbash">Git bash 配置</a>好了，不需要Git GUI 权限校验。第一次才配置。如果不使用git bash 配置，需要单独配置Git GUI 。 1. 在目标文件夹右键，启动<code>GIT GUI</code>。 1. 【Step1-创建密钥】SHOW SSH KEY <img src="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26lst94qlj20e2078mxi.jpg"> 1. 【Step2-添加密钥】登陆github系统。点击右上角的 Settings---&gt;SSH and GPG keys ---&gt; NEW SSH KEY，直接粘贴到key文本框中， 点击 add key。title可以随便命名，然后点击add。 <img src="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26ltk35fkj20sn0fs0u1.jpg"> <img src="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26lvaxkgwj21ha0at75c.jpg"></p>
<h3 id="仓库克隆-1">III.I.I. 仓库克隆</h3>
<ul>
<li><p>选择目标文件夹，选中后点击右键，选择<code>Git GUI Here</code>，选择“克隆已经存在的仓库”。</p></li>
<li><p>填写Source Location（源地址）和Target Directory</p></li>
<li><p>点击clone后，会提示下输入你github的用户名和密码，出现下面的界面，克隆完成。</p></li>
</ul>
<h3 id="账号保存">III.I.II. 账号保存</h3>
<p>如果不做设置的话，每次提交的时候，都会询问你填写密码。</p>
<ol style="list-style-type: decimal">
<li><p>（可跳过）【Step3.1-添加环境变量】我的电脑 - 属性 - 高级系统设置 - 环境变量 - 新建变量，变量名HOME，变量值 %USERPROFILE%</p></li>
<li><p>【Step3.2-创建账号文件】windows的管理员账号文件夹<code>C:/Users/Administrator</code>。新建一个名为<code>_netrc</code>的文件，填写你要保存的服务器地址及账号密码，保存。 <img src="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26lvpmbh7j20qa09kjsv.jpg"> <img src="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26lwyfgaqj207305zmx2.jpg"></p></li>
</ol>
<h3 id="本地同步到服务器">III.I.III. 本地同步到服务器</h3>
<ol style="list-style-type: decimal">
<li>修改属性配置-改为utf-8。 <img src="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/006V2m65ly1fqrb7l7v4jj30p70h7wew.jpg"></li>
<li>修改本地仓库内容。</li>
<li>点击RECAN，获取改动文件。</li>
<li>选择Stage Changed。</li>
<li>提交（Git commit）。提交的时候是要求必须要写备注的。提交则代表此前被添加ADD的文件已确认被提交到Git库了。需要注意的是，如果你改变代码的缩进（尽管没有修改内容），默认状态下会被识别为整个代码全部变更。</li>
<li>上传（Git push）。上传至远端服务器。</li>
</ol>
<h3 id="服务器同步到本地仓库">III.I.IV. 服务器同步到本地仓库</h3>
<ol style="list-style-type: decimal">
<li><p>先来设置与远程地址的关联，Git remote：填写SSH地址与项目名。下面有3个选项：第一个：立刻获取最新改动（所以如果是本地克隆远程一个项目，也可以这样操作）。第二个：本地新建的项目，初始化远程仓库并发布过去。第三个：什么也不做。 <img src="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26lw5mf29j20mn0etmy9.jpg"> <img src="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26lxgki69j20af07pdg0.jpg"></p></li>
<li><p>获取仓库的最新改动Git fetch。选择从远程仓库哪个分支中获取更新，如果没有则只有主支。提示成功则改动的已经被存放到临时区了，你一会还需要进行合并操作，如果没有任何改动，则列表中是空的。 <img src="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dly1fib9nh43dqj20wo0ipjsf.jpg"> <img src="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26lxxsmbaj20gs07sdfz.jpg"></p></li>
<li><p>合并（Git merge）。不管你本地有没有代码，fetch之后呢，是都要merge的。选择合并 - 本地合并，然后选择本地的分支（如果你没有创建分支，则只有1个主支master） <img src="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26lykajw4j20ml0eoaba.jpg"></p></li>
<li><p>冲突处理（Conflict）。合并的过程中可能会出现一些红色的文件与一堆叹号，只是有冲突的文件。在GUI界面正文区，正文区右键可以选择，Use local version（使用本地版本）或Use remote version（使用远程版本）。 <img src="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/645f3b4dgy1g26lzhne1dj20mw0mxdjx.jpg"></p></li>
</ol>
<h1 id="git-pages">IV. Git Pages</h1>
<p>Git Pages有以下几个优点：</p>
<ul>
<li>轻量级的博客系统，没有麻烦的配置</li>
<li>使用标记语言，比如<a target="_blank" rel="noopener" href="http://markdown.tw/">Markdown</a></li>
<li>无需自己搭建服务器</li>
<li>可以绑定自己的域名</li>
</ul>
<div id="github-pages">

</div>
<p><a target="_blank" rel="noopener" href="http://github.com/">Github</a>是一个通过Git进行版本控制的软件源代码托管服务，由GitHub公司（曾称Logical Awesome）的开发者Chris Wanstrath、PJ Hyett和Tom Preston-Werner使用Ruby on Rails编写而成。与GitHub建立好链接之后，就可以方便的使用它提供的Pages服务，<a target="_blank" rel="noopener" href="http://pages.github.com/">Github Pages</a>分两种，一种是你的GitHub用户名建立的<code>username.github.io</code>这样的用户&amp;组织页（站），另一种是依附项目的pages。Hexo deploy可以部署到很多平台，具体可以<a target="_blank" rel="noopener" href="https://hexo.io/docs/deployment.html">参考这个链接</a>。</p>
<div id="gitlab-pages">

</div>
<p><a target="_blank" rel="noopener" href="https://pages.gitlab.io/">Gitlab</a>也是一个开源项目托管服务网站，Gitlab pages和Github pages的基本功能都一样，它支持<strong>无限的private项目</strong>。Gitlab pages和Github pages的基本功能都一样。使用GitLab Pages部署Hexo博客只需要把博客源代码push到repo，然后配置好GitLab Continuous Integration(GitLab CI)，就会自动渲染和部署Hexo博客。但是Gitlab pages有一些限制：<strong>不能把www子域名重定向到根域名</strong>，会同时存在两个版本的网站，这点非常不利于seo。</p>
<div id="coding-pages">

</div>
<p>Coding.net 是一个面向开发者的云端开发平台，提供git/svn 代码托管，代码质量分析，在线WebIDE，项目管理，开发协作，冒泡社区，提供个人和企业公有云及企业私有云的服务。最近<code>Coding Pages</code>进行了改版，在托管的个人pages中添加<code>Hosted by coding pages</code>字样可以去掉等待页面，完成抓取工作，也可以用DNS做国内外分流，顺便解决访问速度慢的问题。</p>
<h2 id="新建仓库">IV.I. 新建仓库</h2>
<blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://www.ouyangsong.com/2017/05/28/gitlab-pages-hexo-cloudflare-ssl-markdown/">GitLab Pages搭建Hexo博客</a>，<a target="_blank" rel="noopener" href="https://gitlab.com/pages/hexo">Example Hexo site using GitLab Pages</a></p>
</blockquote>
<ol style="list-style-type: decimal">
<li><p><a href="#gitbash">首次Git bash 配置</a>。</p></li>
<li><p>建立仓库。</p></li>
</ol>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com">Github</a>完成注册后，创建与你的用户名相对应的<strong>公开仓库</strong>，格式必须是<code>username.github.io</code>。</li>
<li>在<a target="_blank" rel="noopener" href="https://gitlab.com/">Gitlab</a>完成注册。创建与你的用户名相对应的<strong>私密/公开仓库</strong>，格式必须是<code>username.gitlab.io</code>。</li>
<li>在<a target="_blank" rel="noopener" href="https://coding.net/register?key=b5af402b-08a4-400f-8212-71975243bbce">Coding</a>完成注册。点击<code>创建新项目</code>，填写相关信息，可以选择<strong>私密/公开仓库</strong>。<code>项目名称</code>里填上你的用户名（项目名称必须与coding的用户名一致？）可以创建任意名字的<strong>私密/公开仓库</strong>。进入项目页面，点击左侧栏的<code>代码</code>面板 ，选择 <code>Pages 服务</code>一项可以看到部署 Pages 的设置（公开项目点击 <code>Pages</code> 选项卡即可）。填写您欲部署的分支（默认为 <code>coding-pages</code> ），点击<code>立即开启</code>，稍等片刻即可完成部署并通过 <code>&#123;user_name&#125;.coding.me</code> 访问您的网站。</li>
</ul>
<h2 id="博客建立">IV.II. 博客建立</h2>
<p>详细内容查看<a href="#hexo-blog">HEXO博客</a>的建立与调试。</p>
<div id="hexo-deploy">

</div>
<h2 id="博客部署">IV.III. 博客部署</h2>
<p>调试完成后，即可<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/deployment.html">博客部署</a>。可分为本地部署和在线部署。在未采用在线部署的时候，更新博客后总需要自己手动 <code>hexo g -d</code>，占用时间；使用在线部署之后（如<a href="#git-hooks">Git Hooks</a>，<a href="#travis-ci">Travis CI</a>和<a href="#gitlab-ci">Gitlab CI</a>），只需要执行 <code>git push</code>，剩下的静态页面构建过程就由服务器完成。</p>
<h3 id="本地部署">IV.III.I. 本地部署</h3>
<p>Hexo 提供了快速方便的一键部署功能，让您只需一条命令就能将网站部署到服务器上。</p>
<ol style="list-style-type: decimal">
<li>在本地项目根目录中右键<code>git bash</code>，<a href="#git-ssh-test">测试连接</a>，首次推送设置，以后不需要：</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br><span class="line">$ ssh -T git@github.com</span><br><span class="line">$ git remote add origin git@github.com:sli1989/sli1989.github.io.git</span><br><span class="line"></span><br><span class="line">$ ssh -T git@git.coding.net</span><br><span class="line">$ git remote add origin git@git.coding.net:sli1989/sli1989.git</span><br></pre></td></tr></table></figure></p>
<ol start="2" style="list-style-type: decimal">
<li>配置HEXO部署环境。</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure></p>
<ol start="3" style="list-style-type: decimal">
<li>修改站点配置文件中部署参数。一个正确的部署配置中至少要有 type 参数，可同时使用多个 deployer。YAML依靠缩进来确定元素间的从属关系。因此，<strong>请确保每个deployer的缩进长度相同，并且使用空格缩进</strong>。</li>
</ol>
<p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">&#x27;git@git.coding.net:sli1989/sli1989.git&#x27;</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">&#x27;git@github.com:sli1989/sli1989.github.io.git&#x27;</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure></p>
<pre><code>或者</code></pre>
<p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># deploy沿着左边界写</span></span><br><span class="line"><span class="comment"># type和repo左边空格是2个，多一个少一个都不行</span></span><br><span class="line"><span class="comment"># git与type后面的:中间要有一个空格</span></span><br><span class="line"><span class="comment"># github和coding要与repo后边的:对齐</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span></span><br><span class="line">      <span class="attr">github:</span> <span class="string">git@github.com:sli1989/sli1989.github.io.git</span></span><br><span class="line">      <span class="attr">coding:</span> <span class="string">git@git.coding.net:sli1989/sli1989.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure></p>
<ol style="list-style-type: decimal">
<li>对于coding pages，需要在<code>source/</code>需要创建一个空白文件<code>Staticfile</code>，因为 <code>coding.net</code>需要这个文件来作为以静态文件部署的标志。</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="built_in">source</span>/</span><br><span class="line"><span class="built_in">touch</span> Staticfile  <span class="comment">#名字必须是Staticfile</span></span><br></pre></td></tr></table></figure></p>
<ol start="2" style="list-style-type: decimal">
<li>Hexo 提供了快速方便的一键部署功能，执行命令 <code>hexo clean &amp;&amp; hexo g -d</code> ，就可以在 <code>username.coding.me</code> 或者<code>username.github.io</code>看到你的博客了。</li>
</ol>
<div id="git-hooks">

</div>
<h3 id="git-hooks">IV.III.II. Git Hooks</h3>
<p><a target="_blank" rel="noopener" href="https://tsanie.us/2018/01/15/setting-git-hooks">通过配置 Git Hooks 实现自动部署 Hexo</a></p>
<div id="travis-ci">

</div>
<h3 id="travis-ci">IV.III.III. Travis CI</h3>
<p>持续集成，Continuous integration，简称CI。</p>
<p>Travis CI 是一个基于 Github 仓库的持续集成工具，使用一个GitHub Page分支来管理所有博客的源代码，然后由CI编译发布到master主分支。</p>
<p><a target="_blank" rel="noopener" href="https://wafer.li/Hexo/Hexo%20%E9%9B%86%E6%88%90%20Travis%20CI%20%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E5%8D%9A%E6%96%87/">wafer.li的博文</a>详细介绍了配置步骤<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> <a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a>。</p>
<div class="note warning">
<p>
未测试
</p>
</div>
<ol style="list-style-type: decimal">
<li><p>首先使用GitHub账号登入在Travis CI，并在Travis中开启GItHub Page的持续集成。</p></li>
<li><p>然后设定自动构建过程的配置文件，在本地的blog的git库的顶级目录中新加文件<code>.travis.yml</code>。</p></li>
<li><p>通过 GItHub 新增加一个 Personal access token（记得复制），从而使得CI能够push代码。</p></li>
<li><p>最后，我们在本地代码中新建分支<code>source_code</code>，在该分支下执行提交代码。</p></li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add . -A</span><br><span class="line">git commit -m <span class="string">&quot;test CI&quot;</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure></p>
<p><code>~/hexo/.travis.yml</code>文件内容参考：</p>
<blockquote>
<p>配置文件中的<code>$&#123;pandoc&#125;</code>是pandoc的下载地址，配置在CI的变量中，后面会具体讲如何设置该变量，同样的<code>$&#123;token&#125;,$&#123;GH_REF&#125;</code>同理。<code>after_script</code>中的<code>user.name</code>，<code>user.email</code>，需要改成你自己的git用户名和邮箱，global中的<code>- GH_REF: github.com/peterxugo/peterxugo.github.io.git</code>需要换成自己的仓库地址。</p>
</blockquote>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"><span class="attr">node_js:</span> <span class="string">stable</span></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">pandoc</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo-cli</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo-renderer-pandoc</span></span><br><span class="line"><span class="attr">install:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">wget</span> <span class="string">$&#123;pandoc&#125;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sudo</span> <span class="string">dpkg</span> <span class="string">-i</span> <span class="string">pandoc*.deb</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">-g</span> <span class="string">hexo-cli</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-renderer-pandoc</span> <span class="string">--save</span></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span> <span class="string">clean</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span> <span class="string">g</span></span><br><span class="line"><span class="attr">after_script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cd</span> <span class="string">./public</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">init</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">user.name</span> <span class="string">&quot;peterxu&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">user.email</span> <span class="string">&quot;peterxugo@gmail.com&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">add</span> <span class="string">.</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">commit</span> <span class="string">-m</span> <span class="string">&quot;Update&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">push</span> <span class="string">--force</span> <span class="string">--quiet</span> <span class="string">&quot;https://$&#123;token&#125;@$&#123;GH_REF&#125;&quot;</span> <span class="string">master:master</span></span><br><span class="line"><span class="attr">branches:</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">source_code</span></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line"> <span class="attr">global:</span></span><br><span class="line">   <span class="bullet">-</span> <span class="attr">GH_REF:</span> <span class="string">github.com/peterxugo/peterxugo.github.io.git</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sudo:</span> <span class="string">required</span></span><br><span class="line"><span class="attr">dist:</span> <span class="string">trusty</span></span><br><span class="line"><span class="attr">group:</span> <span class="string">edge</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"><span class="attr">node_js:</span> <span class="string">stable</span></span><br><span class="line"><span class="attr">python:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;3.4&quot;</span></span><br><span class="line"><span class="attr">branches:</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line">  <span class="attr">apt:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">yarn:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">directories:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">node_modules</span></span><br><span class="line"><span class="attr">addons:</span></span><br><span class="line">  <span class="attr">ssh_known_hosts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">changkun.us:38438</span></span><br><span class="line"><span class="attr">before_install:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">openssl</span> <span class="string">aes-256-cbc</span> <span class="string">-K</span> <span class="string">$encrypted_3277e6996e70_key</span> <span class="string">-iv</span> <span class="string">$encrypted_3277e6996e70_iv</span> <span class="string">-in</span> <span class="string">.travis/travis.enc</span> <span class="string">-out</span> <span class="string">~/.ssh/id_rsa</span> <span class="string">-d</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">chmod</span> <span class="number">600</span> <span class="string">~/.ssh/id_rsa</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.name</span> <span class="string">&quot;Changkun Ou&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.email</span> <span class="string">&quot;hi@changkun.us&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sudo</span> <span class="string">apt-get</span> <span class="string">-qq</span> <span class="string">update</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sudo</span> <span class="string">apt-get</span> <span class="string">install</span> <span class="string">-y</span> <span class="string">pandoc</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sudo</span> <span class="string">apt-get</span> <span class="string">-y</span> <span class="string">install</span> <span class="string">python3-pip</span> <span class="string">python-dev</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sudo</span> <span class="string">pip3</span> <span class="string">install</span> <span class="string">-U</span> <span class="string">setuptools</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sudo</span> <span class="string">pip3</span> <span class="string">install</span> <span class="string">-U</span> <span class="string">virtualenvwrapper</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">python3</span> <span class="string">-V</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">pip3</span> <span class="string">-V</span></span><br><span class="line">  <span class="attr">install:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">pip3</span> <span class="string">install</span> <span class="string">-r</span> <span class="string">requirements.txt</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-cli</span> <span class="string">-g</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">yarn</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">clone</span> <span class="string">https://github.com/changkun/hexo-theme-next</span> <span class="string">themes/hexo-theme-next</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cp</span> <span class="string">config/site_config.yml</span> <span class="string">_config.yml</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cp</span> <span class="string">config/theme_config.yml</span> <span class="string">themes/hexo-theme-next/_config.yml</span></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">make</span> <span class="string">repair</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">make</span> <span class="string">g</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">make</span> <span class="string">mini</span></span><br><span class="line"><span class="attr">after_success:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">make</span> <span class="string">dep</span></span><br></pre></td></tr></table></figure>
<div id="gitlab-ci">

</div>
<h3 id="gitlab-ci">IV.III.IV. Gitlab CI</h3>
<p>使用Gitlab自动部署，你只需要在项目的根目录下添加一个<code>.gitlab-ci.yml</code>文件，用来指导服务器如何处理你提交的源文件。然后把博客源代码push到repo，就会自动渲染和部署Hexo博客。也可以配置将其推送到 github 和 coding，，也可以直接到gitlab上去写markdown源文件。</p>
<ol style="list-style-type: decimal">
<li>先按照<a href="#hexo-blog">Hexo-BLOG</a>搭建和调试本地博客，确保无误后新建（也可以直接改名）目录名为<code>sli1989.gitlab.io</code></li>
<li>将文件<code>scaffolds</code>, <code>source</code>, <code>themes</code>, <code>.gitignor</code>, <code>.gitlab-ci.yml</code>, <code>_config.yml</code>, <code>package.json</code>复制，同时要将<code>themes/next/</code>目录下的<code>.git</code>文件夹删除，也删除博客目录的<code>.git</code>文件夹再重新配置。</li>
<li>配置<code>.gitlab-ci.yml</code>文件，可以分别进行<a href="#gitlab-ci-https">https链接</a>和<a href="#gitlab-ci-ssh">ssh链接</a>。</li>
</ol>
<p>实际上 Hexo 的文章更改时间就是 markdown 文件的最后修改时间。由于 CI 在构建的时候，总是重新 clone repo，这就造成了所有文件的最后修改时间都是最新的 clone 时间；实际上，这并不是 CI 的问题，而是 git 的问题，git 由于分布式的原因，并不会保留文件的最后修改时间；不过，作为一个博客系统来说，我们可以采用 git 的最后 commit 时间来替代，这样子就能恢复文件的修改时间了。</p>
<p><a target="_blank" rel="noopener" href="https://wafer.li/Hexo/%E8%A7%A3%E5%86%B3%20Travis%20CI%20%E6%80%BB%E6%98%AF%E6%9B%B4%E6%96%B0%E6%97%A7%E5%8D%9A%E5%AE%A2%E7%9A%84%E9%97%AE%E9%A2%98/">博文</a>解决了 CI 总是更新旧博客的问题。不同的是，GITLAB的<a target="_blank" rel="noopener" href="https://docs.gitlab.com/ce/ci/yaml/README.html#shallow-cloning">GIT_DEPTH</a>是人工设置。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  an experimental feature</span></span><br><span class="line"><span class="attr">variables:</span></span><br><span class="line">  <span class="attr">GIT_DEPTH:</span> <span class="string">&quot;1000000&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">before_script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">export</span> <span class="string">TZ=&#x27;Asia/Shanghai&#x27;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.name</span> <span class="string">&quot;sli1989&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.email</span> <span class="string">&quot;im.sai.li@outlook.com&quot;</span></span><br><span class="line">  <span class="comment"># Restore last modified time</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;git ls-files -z | while read -d &#x27;&#x27; path; do touch -d \&quot;$(git log -1 --format=\&quot;@%ct\&quot; \&quot;$path\&quot;)\&quot; \&quot;$path\&quot;; done&quot;</span></span><br></pre></td></tr></table></figure>
<div id="gitlab-ci-https">

</div>
<h4 id="https链接">IV.III.IV.I. HTTPS链接</h4>
<p>以下<code>.gitlab-ci.yml</code>配置<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a>使用Pandoc渲染器，插件的使用跟<a href="#hexo-blog">Hexo-BLOG</a>本地调试一致，需要什么添加什么。</p>
<p>这里比较重要的：</p>
<ul>
<li>如果您的密码中包含[:@]等符号，请您对密码做<code>urlencode</code>处理，如<code>@=%40</code>。</li>
<li>github仓库的地址设置：<code>https://github.access.token@github.com/github.username/github.usernam.github.io.git</code>，<code>github.access.token</code>第一次生成时才能看到，之后只能通过<code>git config --list</code>查看复制（参考<a target="_blank" rel="noopener" href="http://blog.frenlee.com/2016/11/hexo-gitlab-ci/">使用hexo+gitlab+ci+github Pages 持续集成写博客</a>）。</li>
<li>对于Coding pages的推送，HTTPS 方式 push 大文件可能引发错误。可以执行 <code>git config http.postBuffer 524288000</code> 设置更大的限制值。</li>
</ul>
<div class="note success">
<p>
Success
</p>
</div>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">before_script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">apt-get</span> <span class="string">update</span> <span class="string">-qq</span> <span class="string">&amp;&amp;</span> <span class="string">apt-get</span> <span class="string">install</span> <span class="string">-y</span> <span class="string">-qq</span> <span class="string">pandoc</span></span><br><span class="line"></span><br><span class="line"><span class="attr">image:</span> <span class="string">node:6.10.2</span></span><br><span class="line"></span><br><span class="line"><span class="attr">pages:</span></span><br><span class="line">  <span class="attr">cache:</span></span><br><span class="line">    <span class="attr">paths:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">node_modules/</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-cli</span> <span class="string">-g</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">uninstall</span> <span class="string">hexo-filter-auto-spacing</span> <span class="string">--save</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">uninstall</span> <span class="string">hexo-renderer-marked</span> <span class="string">--save</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-renderer-pandoc</span> <span class="string">--save</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-generator-feed</span> <span class="string">--save</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-generator-sitemap</span> <span class="string">--save</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-generator-baidu-sitemap</span> <span class="string">--save</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-generator-searchdb</span> <span class="string">--save</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-generator-topindex</span> <span class="string">--save</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-symbols-count-time</span> <span class="string">--save</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">./node_modules/hexo/bin/hexo</span> <span class="string">generate</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cd</span> <span class="string">./public</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">init</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.name</span> <span class="string">&quot;sli1989&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.email</span> <span class="string">&quot;im.sai.li@outlook.com&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">push.default</span> <span class="string">simple</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">add</span> <span class="string">.</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">commit</span> <span class="string">-m</span> <span class="string">&quot;gitlab-auto-deploy&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">push</span> <span class="string">--force</span> <span class="string">--quiet</span> <span class="string">--set-upstream</span> <span class="string">https://github_access_token@github.com/username/username.github.io.git</span> <span class="string">master</span> <span class="comment"># replace github_access_token</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">http.postBuffer</span> <span class="number">524288000</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">push</span> <span class="string">--force</span> <span class="string">--quiet</span> <span class="string">--set-upstream</span> <span class="string">https://username:password@git.coding.net/username/reponame.git</span> <span class="string">master</span> <span class="comment"># replace username &amp; password</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">artifacts:</span></span><br><span class="line">    <span class="attr">paths:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">public</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>
<div id="gitlab-ci-ssh">

</div>
<h4 id="ssh链接">IV.III.IV.II. SSH链接</h4>
<p><a target="_blank" rel="noopener" href="https://gitlab.com/pages/hexo">官方配置</a>推荐使用的是SSL链接，<a target="_blank" rel="noopener" href="https://blog.n0trace.com/2017/07/15/%E7%94%A8gitlab-ci%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%E9%83%A8%E7%BD%B2hexo%E5%8D%9A%E5%AE%A2/index.html">用gitlab-ci持续集成部署hexo博客</a>和<a target="_blank" rel="noopener" href="https://zacksleo.github.io/2017/04/14/GitLabCI%E9%80%9A%E8%BF%87ssh%E8%BF%9B%E8%A1%8C%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/index.html">GitLabCI通过ssh进行自动部署</a>介绍了使用过程。</p>
<div class="note success">
<p>
Success
</p>
</div>
<ol style="list-style-type: decimal">
<li><p>生成部署公钥。与账户 SSH 公钥生成一样，但不能重复使用。打开命令行终端输入 <code>$ ssh-keygen -t rsa -C &quot;im.sai.li@outlook.com&quot; -f ~/.ssh/deploy_rsa</code>，连续点击 Enter 键即可。</p></li>
<li><p>添加部署公钥。用文本编辑器打开<code>deploy_rsa.pub</code>文件，复制全部内容。</p></li>
</ol>
<ul>
<li>登录 Coding.net，进入<strong>目标项目</strong>，点击『设置 -&gt; 部署公钥 -&gt;<a target="_blank" rel="noopener" href="https://sli1989.coding.net/user/account/setting/keys">新建部署公钥</a>』，将复制的内容填写到『公钥内容』一栏，公钥名称自定义为<code>gitlab-deploy</code>。点击『添加』，<strong>勾选</strong> 部署公钥设置里的『授予推送权限』，然后输入账户密码即可成功添加部署公钥。</li>
<li>登录 github，进入<strong>目标项目</strong>，点击『设置 -&gt; 部署公钥 -&gt;<a target="_blank" rel="noopener" href="https://github.com/sli1989/sli1989.github.io/settings/keys">新建部署公钥</a>』，将复制的内容填写到『公钥内容』一栏，公钥名称自定义为<code>gitlab-deploy</code>。点击『添加』，<strong>勾选</strong> 部署公钥设置里的『授予推送权限』，然后输入账户密码即可成功添加部署公钥。</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li><p>添加部署密匙。进入<a target="_blank" rel="noopener" href="https://gitlab.com/sli1989/sli1989.gitlab.io/settings/ci_cd">Gitlab项目页面</a>，<code>SETTINGS-CI/CD-Secret variables</code>，复制密匙<code>\Administrator\.ssh\deploy_rsa</code>内容，名称自定义为<code>DEPLOY_PRIVATE_KEY</code>并记住。</p></li>
<li><p>设置<code>.gitlab-ci.yml</code>：</p></li>
</ol>
<p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># variables:</span></span><br><span class="line">  <span class="comment"># GIT_DEPTH: &quot;1000000&quot;</span></span><br><span class="line"><span class="string">//</span> <span class="string">注意替换</span> <span class="string">DEPLOY_PRIVATE_KEY</span></span><br><span class="line"><span class="attr">before_script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">export</span> <span class="string">TZ=&#x27;Asia/Shanghai&#x27;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.name</span> <span class="string">&quot;sli1989&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.email</span> <span class="string">&quot;im.sai.li@outlook.com&quot;</span></span><br><span class="line">  <span class="comment"># Restore last modified time</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;git ls-files -z | while read -d &#x27;&#x27; path; do touch -d \&quot;$(git log -1 --format=\&quot;@%ct\&quot; \&quot;$path\&quot;)\&quot; \&quot;$path\&quot;; done&quot;</span></span><br><span class="line">  <span class="comment"># Install ssh-agent if not already installed, it is required by Docker.</span></span><br><span class="line">  <span class="comment"># (change apt-get to yum if you use a CentOS-based image)</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;which ssh-agent || ( apt-get update -y &amp;&amp; apt-get install openssh-client -y )&#x27;</span></span><br><span class="line">  <span class="comment"># Run ssh-agent (inside the build environment)</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">eval</span> <span class="string">$(ssh-agent</span> <span class="string">-s)</span></span><br><span class="line">  <span class="comment"># Add the SSH key stored in SSH_PRIVATE_KEY variable to the agent store</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ssh-add</span> <span class="string">&lt;(echo</span> <span class="string">&quot;$DEPLOY_PRIVATE_KEY&quot;</span><span class="string">)</span></span><br><span class="line">  <span class="comment"># For Docker builds disable host key checking. Be aware that by adding that</span></span><br><span class="line">  <span class="comment"># you are suspectible to man-in-the-middle attacks.</span></span><br><span class="line">  <span class="comment"># WARNING: Use this only with the Docker executor, if you use it with shell</span></span><br><span class="line">  <span class="comment"># you will overwrite your user&#x27;s SSH config.</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">mkdir</span> <span class="string">-p</span> <span class="string">~/.ssh</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;[[ -f /.dockerenv ]] &amp;&amp; echo -e &quot;Host *\n\tStrictHostKeyChecking no\n\n&quot; &gt; ~/.ssh/config&#x27;</span></span><br><span class="line">  <span class="comment"># In order to properly check the server&#x27;s host key, assuming you created the</span></span><br><span class="line">  <span class="comment"># SSH_SERVER_HOSTKEYS variable previously, uncomment the following two lines</span></span><br><span class="line">  <span class="comment"># instead.</span></span><br><span class="line">  <span class="comment"># - mkdir -p ~/.ssh</span></span><br><span class="line">  <span class="comment"># - &#x27;[[ -f /.dockerenv ]] &amp;&amp; echo &quot;$SSH_SERVER_HOSTKEYS&quot; &gt; ~/.ssh/known_hosts&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># install pandoc</span></span><br><span class="line">  <span class="comment"># - apt-get update -qq &amp;&amp; apt-get install -y -qq pandoc</span></span><br><span class="line">  <span class="comment"># - wget https://github.com/jgm/pandoc/releases/download/2.7/pandoc-2.7-1-amd64.deb</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">wget</span> <span class="string">https://github.com/jgm/pandoc/releases/download/1.19.2.1/pandoc-1.19.2.1-1-amd64.deb</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">dpkg</span> <span class="string">-i</span> <span class="string">./pandoc-1.19.2.1-1-amd64.deb</span></span><br><span class="line"></span><br><span class="line"><span class="attr">image:</span> <span class="string">node:10.15.0</span></span><br><span class="line"></span><br><span class="line"><span class="attr">pages:</span></span><br><span class="line">  <span class="attr">cache:</span></span><br><span class="line">    <span class="attr">paths:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">node_modules/</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">-g</span> <span class="string">hexo-cli</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">uninstall</span> <span class="string">hexo-filter-auto-spacing</span> <span class="string">--save</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">uninstall</span> <span class="string">hexo-renderer-marked</span> <span class="string">--save</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-renderer-pandoc</span> <span class="string">--save</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-generator-feed</span> <span class="string">--save</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-generator-topindex</span> <span class="string">--save</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-generator-sitemap</span> <span class="string">--save</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-generator-baidu-sitemap</span> <span class="string">--save</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-generator-searchdb</span> <span class="string">--save</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-symbols-count-time</span> <span class="string">--save</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span> <span class="string">clean</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span> <span class="string">generate</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.name</span> <span class="string">&quot;sli1989&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.email</span> <span class="string">&quot;im.sai.li@outlook.com&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span> <span class="string">deploy</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">artifacts:</span></span><br><span class="line">    <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">public</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">master</span></span><br></pre></td></tr></table></figure></p>
<ol style="list-style-type: decimal">
<li>在本地项目根目录中右键<code>git bash</code>，<a href="#git-ssh-test">测试连接</a>，首次推送设置，以后不需要：</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br><span class="line">$ ssh -T git@gitlab.com</span><br><span class="line">$ git remote add origin git@gitlab.com:sli1989/sli1989.gitlab.io.git</span><br></pre></td></tr></table></figure></p>
<ol start="2" style="list-style-type: decimal">
<li>推送本地修改，也可以直接使用Atom安装<code>Git-Control</code>插件，实现Git操作，点击查看<a target="_blank" rel="noopener" href="https://sli1989.github.io/markdown-user-guide/#atom">Atom使用指南</a>和<a target="_blank" rel="noopener" href="https://sli1989.github.io/markdown-user-guide/#markdowngrammar">Markdown语法</a>。</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git add .</span><br><span class="line">$ git commit -m <span class="string">&quot;update post&quot;</span></span><br><span class="line">$ git push -u origin master</span><br></pre></td></tr></table></figure></p>
<ol start="3" style="list-style-type: decimal">
<li>然后可以在博客仓库的Pipelines中查看到Hexo渲染和部署的过程，可以在<code>Pipelines</code>中查看构建失败的原因。构建成功后，可以访问 <code>https://sli1989.gitlab.io/</code>查看搭建效果。</li>
</ol>
<div id="hexo-sync">

</div>
<h2 id="博客备份">IV.IV. 博客备份</h2>
<p>如果我想在另外一台设备上面写博客，必须将整个项目拷贝过来，完成之后要保持两台设备的内容是一致的。在这种情况下一般会将整个项目都托管到 Github/Coding 上面。但是这又会导致另外一个问题，每次有改动的时候不但要部署博客，还要提交项目的代码，这又增加了操作的步骤。</p>
<p>CI自动部署解决这种烦恼，让所有工作交给服务器。因此推荐使用自动部署的方式进行备份，如<a href="#git-hooks">Git Hooks</a>，<a href="#travis-ci">Travis CI</a>和<a href="#gitlab-ci">Gitlab CI</a>。</p>
<h3 id="上传">IV.IV.I. 上传</h3>
<p><code>hexo g</code> 命令就是根据<code>_config.yml</code>，<code>source</code>目录文件以及<code>themes</code>目录下文件生成博客文件的。同样当我们运行<code>hexo clean</code>命令时，<code>public</code>目录被删除了。因此，需要备份的文件就是<code>scaffolds, source, themes, .gitignor,  .gitlab-ci.yml, _config.yml, package.json</code>，这个就是用于多终端同步关键的部分。</p>
<ol style="list-style-type: decimal">
<li>配置<code>.gitignore</code>文件。</li>
</ol>
<p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line">db.json</span><br><span class="line">*.log</span><br><span class="line">node_modules/</span><br><span class="line">public/</span><br><span class="line">.deploy*/</span><br></pre></td></tr></table></figure></p>
<ol start="2" style="list-style-type: decimal">
<li>同步到远程仓库的<code>Hexo</code>分支。这样你的Github项目中就会多出一个<code>Hexo</code>分支。</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git add . <span class="comment">#添加目录下所有文件</span></span><br><span class="line">git commit -m <span class="string">&quot;Blog Source Hexo&quot;</span></span><br><span class="line">git branch hexo</span><br><span class="line">git checkout hexo</span><br><span class="line">git remote add origin git@github.com:sli1989/sli1989.github.io.git</span><br><span class="line">git push origin hexo</span><br></pre></td></tr></table></figure></p>
<h3 id="下载">IV.IV.II. 下载</h3>
<ol style="list-style-type: decimal">
<li>在B电脑上新建<code>hexo</code>文件夹。拉下远程仓库文件</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git <span class="built_in">clone</span> origin hexo git@github.com:sli1989/sli1989.github.io.git</span><br></pre></td></tr></table></figure></p>
<pre><code>或者</code></pre>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git remote add origin git@github.com:sli1989/sli1989.github.io.git</span><br><span class="line">git checkout -b hexo</span><br><span class="line">git pull origin hexo</span><br></pre></td></tr></table></figure></p>
<ol start="2" style="list-style-type: decimal">
<li>然后进行<a href="#hexo-init">博客配置</a>，安装插件。</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装必要的所需组件，不用再init；否则之前的hexo配置参数会重置</span></span><br><span class="line"></span><br><span class="line">$ npm install -g hexo-cli</span><br><span class="line">$ npm install hexo --save</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装依赖库</span></span><br><span class="line">$ npm install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装部署相关配置</span></span><br><span class="line">$ npm install hexo-deployer-git</span><br></pre></td></tr></table></figure></p>
<ol start="3" style="list-style-type: decimal">
<li>然后写文章，部署博客，同时更新Hexo分支。</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hexo new post <span class="string">&quot;new blog name&quot;</span>  </span><br><span class="line"><span class="comment"># 新建一个.md文件，并编辑完成自己的博客内容</span></span><br><span class="line"></span><br><span class="line">git add . <span class="comment">#添加目录下所有文件</span></span><br><span class="line">git commit -m <span class="string">&quot;UPDATE Blog Source Hexo&quot;</span></span><br><span class="line">git push origin hexo  <span class="comment"># 更新Hexo分支</span></span><br><span class="line">hexo d -g</span><br></pre></td></tr></table></figure></p>
<ol start="4" style="list-style-type: decimal">
<li>在不同的终端已经做完以上第一次配置后，以后只需执行以下命令进行更新即可。</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git pull origin hexo  </span><br><span class="line"><span class="comment"># 先pull完成本地与远端的融合</span></span><br><span class="line"></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;xx&quot;</span></span><br><span class="line">git push origin hexo</span><br><span class="line">hexo d -g</span><br></pre></td></tr></table></figure></p>
<div id="hexo-blog">

</div>
<h1 id="hexo-blog">V. Hexo BLOG</h1>
<blockquote>
<p>参考链接：<a target="_blank" rel="noopener" href="https://linghucong.js.org/2016/04/15/2016-04-15-hexo-github-pages-blog/">手把手教你使用Hexo + Github Pages搭建个人独立博客</a>，<a target="_blank" rel="noopener" href="https://my.oschina.net/ryaneLee/blog/638440">小白独立搭建博客--Github Pages和Hexo简明教程</a>，<a target="_blank" rel="noopener" href="http://www.jianshu.com/p/f1cc7fdc869e">Hexo+Github搭建个人博客(二)——配置&amp;主题</a>。</p>
</blockquote>
<p>To work locally with this project, you'll have to follow the steps below: Read more at Hexo's <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a>.</p>
<div id="hexo-init">

</div>
<h2 id="博客初始化">V.I. 博客初始化</h2>
<ol style="list-style-type: decimal">
<li><p>下载安装<a target="_blank" rel="noopener" href="https://nodejs.org/en/download/">Node.js</a>。</p></li>
<li><p>下载安装<a href="#gitdownload">Git</a>，进行<a href="#gitbash">Git Bash 配置</a>。</p></li>
<li><p>博客环境配置：所有必备的应用程序安装完成后，根据自己喜好选择存放目录，右键点击<code>Git Bash Here</code>，进入Git命令框，执行以下操作。</p></li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装 Hexo</span></span><br><span class="line">$ npm install -g hexo-cli</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件夹取名为hexo</span></span><br><span class="line">$ hexo init hexo</span><br><span class="line"><span class="comment"># 注意init会把之前的hexo配置参数会重置</span></span><br><span class="line"><span class="comment"># 会自动安装依赖库 如果没有 手动安装</span></span><br><span class="line"><span class="comment"># $ npm install</span></span><br></pre></td></tr></table></figure></p>
<ol start="4" style="list-style-type: decimal">
<li>博客环境配置完成后，可以在站点配置文件<code>~/blog/_config.yml</code>中配置大部分的参数（如何<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/configuration.html">配置</a>）。要记得把URL换成你的博客地址（<code>http://username.github.io</code>或自定义域名）。</li>
</ol>
<blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/setup.html#package-json">package.json</a>是应用程序的信息。<a target="_blank" rel="noopener" href="http://embeddedjs.com/">EJS</a>, <a target="_blank" rel="noopener" href="http://learnboost.github.io/stylus/">Stylus</a> 和 <a target="_blank" rel="noopener" href="http://daringfireball.net/projects/markdown/">Markdown</a> renderer 已默认安装，您可以自由移除。</li>
<li>当您新建文章时，Hexo 会根据 <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/writing.html">模版scaffolds</a> 文件夹来建立文件。</li>
<li>资源文件夹<code>source</code>是存放用户资源的地方。</li>
<li>除 <code>_posts</code> 文件夹之外，开头命名为 <code>_</code> (下划线)的文件 / 文件夹和隐藏的文件将会被忽略。</li>
<li>Markdown 和 HTML 文件会被解析并放到 <code>public</code> 文件夹，而其他文件会被拷贝过去。</li>
<li><a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/themes.html">主题themes</a> 文件夹。Hexo 会根据主题来生成静态页面。</li>
</ul>
</blockquote>
<ol start="5" style="list-style-type: decimal">
<li>主题选择。进入<a target="_blank" rel="noopener" href="https://hexo.io/themes/">Hexo的官网主题专栏</a>，挑选喜欢的主题，复制它的github地址，进入<code>/themes</code>目录，右键<code>Git Bash</code>，在命令行输入。下载完成后，打开站点配置文件<code>~/blog/_config.yml</code>，修改参数为：<code>theme: next</code>，然后编辑主题配置文件<code>~/blog/themes/next/_config.yml</code>进行<a target="_blank" rel="noopener" href="http://theme-next.iissnan.com/getting-started.html">NexT主题设置</a>。</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure></p>
<div id="hexo-debug">

</div>
<h2 id="博客调试">V.II. 博客调试</h2>
<p>支持本地预览调试。输入以下命令，然后打开浏览器，进入 <code>http://localhost:4000/</code> 即可进行博客预览。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean // 每次调试时建议使用</span><br><span class="line">$ hexo g <span class="comment"># 或者hexo generate</span></span><br><span class="line">$ hexo s <span class="comment"># 或者hexo server</span></span><br></pre></td></tr></table></figure>
<p>推荐使用F12，改到自己想要的样式，然后 Copy 到<code>custom.styl</code>文件即可。使用方法可以参考<a target="_blank" rel="noopener" href="http://yangbingdong.com/2017/build-blog-hexo-advanced/#%E5%AE%9A%E4%BD%8D%E5%85%83%E7%B4%A0">操作流程图</a>和<a target="_blank" rel="noopener" href="http://www.cduyzh.com/hexo-settings-3/">自定义页面样式</a></p>
<div id="hexo-next-update">

</div>
<h2 id="hexo升级">V.III. HEXO升级</h2>
<p>更新升级可以享受很多新功能，不用自己去修改文件了。</p>
<ol style="list-style-type: decimal">
<li><p>升级<code>Node.js</code>： <code>npm install n -g</code>+<code>n latest</code></p></li>
<li><p>升级<code>hexo</code>: <code>npm update -g hexo</code>或者安装指定版本<code>npm install hexo@3.7.0</code></p></li>
<li><p>升级<code>插件</code>: <code>npm update</code></p></li>
</ol>
<h2 id="next升级">V.IV. NEXT升级</h2>
<p>目前升级 NexT 主题的时候并不是非常的流畅。目前 NexT 将会使用 Hexo 的 <a target="_blank" rel="noopener" href="https://hexo.io/docs/data-files.html">Data Files</a> ，将所有的主题配置放置在站点的 <code>source/_data/next.yml</code> 文件中。原先放置在 站点配置文件<code>~/blog/_config.yml</code>中的选项可以迁移到新的位置，同时，主题配置文件<code>~/blog/themes/next/_config.yml</code>可以不用做任何修改。若后续版本有配置相关的改动时，你仅需在 <code>next.yml</code> 中做相应调整即可。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -r themes/next</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/hexo-theme-next themes/next</span><br><span class="line"><span class="built_in">rm</span> -fr ./themes/next/.git/</span><br></pre></td></tr></table></figure>
<p>备份恢复个性化设置：</p>
<ul>
<li>手动备份修改的主题文件；</li>
<li>利用<a target="_blank" rel="noopener" href="https://github.com/sli1989/HEXO-NEXT-CUSTOM/blob/master/FixNext/fixNext.sh">SED命令</a>自动修改新主题文件；</li>
<li>使用子模块更新方法：源码仓库中可以看到<code>themes/next</code>目录后有个<code>@xxxxxx</code>，指向子模块的一个提交，点击可以跳转到<code>sli1989/hexo-theme-next</code>仓库。</li>
</ul>
<h3 id="子模块更新">V.IV.I. 子模块更新</h3>
<ol style="list-style-type: decimal">
<li>进入NexT项目源码页面，点击<code>fork</code>，这样就将最新的主题源码fork成为自己的项目。</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> hexo_blog</span><br><span class="line">$ git <span class="built_in">rm</span> -r --cached themes/next/</span><br><span class="line">$ git submodule add git@github.com:sli1989/hexo-theme-next.git themes/next/</span><br><span class="line"><span class="comment"># $ git add .</span></span><br><span class="line"><span class="comment"># $ git commit -m &#x27;add theme next as a submodule&#x27;</span></span><br><span class="line"><span class="comment"># $ git push -u origin master</span></span><br></pre></td></tr></table></figure></p>
<ol start="2" style="list-style-type: decimal">
<li>导入子项目后，站点根目录会多出<code>.gitmodules</code>文件，其内容如下：</li>
</ol>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[submodule &quot;themes/next&quot;]</span><br><span class="line">    path = themes/next</span><br><span class="line">    url = https://github.com/sli1989/hexo-theme-next.git</span><br></pre></td></tr></table></figure></p>
<ol start="3" style="list-style-type: decimal">
<li>本地部署。
<ol style="list-style-type: lower-alpha">
<li>为了方便与源项目代码进行同步，设置远程仓库。</li>
</ol></li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> themes/next</span><br><span class="line">$ git remote add upsteam https://github.com/theme-next/hexo-theme-next</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看当前的远程仓库</span></span><br><span class="line">$ git remote -v</span><br></pre></td></tr></table></figure></p>
<pre><code>a. 如果发现远程仓库有更新，进行拉取与合并，以及[合并冲突处理](#git-merge)。建议使用rebase命令更新`sli1989/hexo-theme-next.git`。</code></pre>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ git fetch upstream</span><br><span class="line">$ git merge upstream/master</span><br><span class="line"><span class="comment"># 等价于 $ git pull</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 手动解决合并冲突</span></span><br><span class="line">$ vim conflict_files</span><br><span class="line"></span><br><span class="line"><span class="comment"># $ git submodule update</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解决冲突完毕    </span></span><br><span class="line"><span class="comment"># 建议使用rebase命令    </span></span><br><span class="line">$ git add .                            </span><br><span class="line">$ git commit <span class="string">&#x27;merge upstream updates&#x27;</span></span><br><span class="line">$ git push -u origin master</span><br></pre></td></tr></table></figure></p>
<ol start="4" style="list-style-type: decimal">
<li><p>CI部署。yml的子模块自动更新script未测试通过（<a target="_blank" rel="noopener" href="https://docs.gitlab.com/ce/ci/git_submodules.html">Using Git submodules with GitLab CI</a>），目前通过本地更新子模块长传Gitlab进行部署。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># git submodule update --remote --recursive</span></span><br><span class="line"><span class="built_in">cd</span> themes/next</span><br><span class="line">git checkout master</span><br><span class="line">git fetch --all</span><br><span class="line">git reset --hard origin/master</span><br><span class="line">git pull</span><br><span class="line"><span class="built_in">cd</span> ../../</span><br><span class="line"><span class="comment"># gitlab推送</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;update next&quot;</span></span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>
<figure class="highlight diff"><figcaption><span>~/hexo/.gitlab-ci.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+ variables:</span></span><br><span class="line"><span class="addition">+   GIT_SUBMODULE_STRATEGY: recursive</span></span><br><span class="line"></span><br><span class="line">pages:</span><br><span class="line">  script:</span><br><span class="line"><span class="addition">+   - git submodule init</span></span><br><span class="line"><span class="addition">+   - git submodule update</span></span><br><span class="line"><span class="addition">+   # - git submodule update --init</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="next个性化">V.V. NEXT个性化</h2>
<blockquote>
<p>感谢以下博文：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://reuixiy.github.io/technology/computer/computer-aided-art/2017/06/09/hexo-next-optimization.html#%E6%9B%B4%E6%96%B0%E6%8F%90%E7%A4%BA%EF%BC%88%E5%8F%AF%E4%BB%A5%E6%9C%80%E5%90%8E%E7%9C%8B%EF%BC%89">打造个性超赞博客Hexo+NexT+GithubPages的超深度优化</a></li>
<li><a target="_blank" rel="noopener" href="http://www.jiaxm.me/2017-07-day/Hexo/#%E8%B0%83%E6%95%B4b2t%E6%A0%B7%E5%BC%8F">Hexo Configuration</a></li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000009544924">hexo的next主题个性化配置教程</a></li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000009009697#articleHeader21">hexo高阶教程：next主题优化之加入网易云音乐、网易云跟帖、炫酷动态背景、自定义样式，打造属于你自己的定制化博客</a></li>
<li><a target="_blank" rel="noopener" href="http://www.iamlj.com/2016/08/add-special-effect-harlem-shake-for-hexo/">为Hexo Next主题添加哈林摇特效（五）</a><br>
</li>
<li><a target="_blank" rel="noopener" href="http://www.dragonstyle.win/2017/11/07/Hexo-Next%E4%B8%BB%E9%A2%98%E4%BC%98%E5%8C%96/">Hexo+Next主题优化</a></li>
</ul>
</blockquote>
<p>Hexo 安装主题的方式非常简单，只需要将主题文件拷贝至站点目录的 themes 目录下， 然后修改下配置文件即可。在 <code>_config.yml</code> 中可以修改大部份的<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/configuration.html">配置</a>。</p>
<ul>
<li>encrypt the content of a post：<a target="_blank" rel="noopener" href="https://github.com/edolphin-ydf/hexo-encrypt">hexo-encrypt</a></li>
<li>Enhanced code highlighting using highlight.js for Hexo ： <a target="_blank" rel="noopener" href="https://github.com/Jamling/hexo-filter-highlight">hexo-filter-highlight</a></li>
<li><del><a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo-renderer-marked">hexo-renderer-marked</a>： Hexo的文章内容默认是不支持emoji表情的。Add support for <a target="_blank" rel="noopener" href="http://daringfireball.net/projects/markdown/">Markdown</a>. This plugin uses <a target="_blank" rel="noopener" href="https://github.com/chjj/marked">marked</a> as render engine. <a target="_blank" rel="noopener" href="http://yangfch3.com/2016/05/08/hexo-experiences/hexo-renderer-marked-it.txt">配置方法</a>。</del></li>
<li>Embed aplayer in Hexo posts/pages：<a target="_blank" rel="noopener" href="https://github.com/grzhan/hexo-tag-aplayer">hexo-tag-aplayer</a></li>
<li><del>一个为Hexo编写的网易云音乐标签插件：<a target="_blank" rel="noopener" href="https://github.com/qinyuanpei/hexo-tag-cloudmusic">hexo-tag-cloudmusic</a></del></li>
<li><del>A Flask Music Project：<a target="_blank" rel="noopener" href="https://github.com/YUX-IO/163music-APlayer-you-get-docker">163music-APlayer-you-get-docker</a></del></li>
</ul>
<div id="hexo-avatar">

</div>
<h3 id="点击侧栏头像回到首页">V.V.I. 点击侧栏头像回到首页</h3>
<ol style="list-style-type: decimal">
<li><p>设置<code>~/hexo/themes/next/_config.yml</code>中的头像<code>avatar: /uploads/avatar.gif</code></p></li>
<li><p>修改如下代码：</p></li>
</ol>
<p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+        &lt;a href=&quot;/&quot; class=&quot;site-author-image&quot; rel=&quot;start&quot; style=&quot;border:none&quot;&gt;</span></span><br><span class="line">          &lt;img class=&quot;site-author-image&quot; itemprop=&quot;image&quot;</span><br><span class="line">               src=&quot;&#123;&#123; url_for( theme.avatar | default(theme.images + &#x27;/avatar.gif&#x27;) ) &#125;&#125;&quot;</span><br><span class="line">               alt=&quot;&#123;&#123; theme.author &#125;&#125;&quot; /&gt;</span><br><span class="line"><span class="addition">+        &lt;/a&gt;</span></span><br></pre></td></tr></table></figure></p>
<div id="hexo-custom">

</div>
<h3 id="自定义样式">V.V.II. 自定义样式</h3>
<p><a target="_blank" rel="noopener" href="https://github.com/theme-next/hexo-theme-next/releases/tag/v6.0.2">NexT v6.0.2</a> 引入了<a target="_blank" rel="noopener" href="https://github.com/theme-next/hexo-theme-next/blob/master/_config.yml#L24">个性化文件设置</a>，所有个性化变量、样式等都可以通过<code>styles: source/_data/styles.styl</code>进行添加，使用的时候，只需要添加<code>~/hexo/source/_data</code>里面的文件即可。</p>
<p><code>~/hexo/source/_data/styles.styl</code>或 <code>~/hexo/themes/next/source/css/_custom/custom.styl</code>涉及的个性化内容：</p>
<ul>
<li>修改正文顶部与标题行间距，添加如下：</li>
</ul>
<p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-meta</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>调整一级标题和正文的间距，添加</li>
</ul>
<p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>调整段落下部间距，添加：</li>
</ul>
<p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0.8em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>修改块引用样式。参考<a target="_blank" rel="noopener" href="http://gohom.win/2015/11/10/css-blockquote/">CSS-blockquote引用样式</a>，添加：</li>
</ul>
<p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 块引用 样式； 首行不缩进</span></span><br><span class="line"><span class="selector-tag">blockquote</span> &#123;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0.8em</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="variable">$line</span>-height-code-block;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;Microsoft YaHei&quot;</span>, Menlo, <span class="string">&quot;PingFang SC&quot;</span>, monospace;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">4px</span> solid <span class="number">#42B983</span>;</span><br><span class="line"> <span class="selector-tag">p</span> &#123;</span><br><span class="line"><span class="comment">//  text-indent: -2em;</span></span><br><span class="line">  <span class="attribute">display</span>: inline;</span><br><span class="line"> &#125;&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>修改行内代码颜色，添加：</li>
</ul>
<p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">code</span> &#123; <span class="attribute">color</span>: <span class="number">#ec7f00</span>; &#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>将文章内链接文本设置为蓝色，鼠标划过时文字颜色加深，并显示下划线。部分链接会出现bug，原因不明。添加：</li>
</ul>
<p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">p</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#0593d3</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: none;</span><br><span class="line">  <span class="selector-pseudo">&amp;:hover</span> &#123;</span><br><span class="line">    <span class="comment">//color: #0477ab;</span></span><br><span class="line">    <span class="attribute">text-decoration</span>: underline;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文章超链接样式</span></span><br><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">80</span>, <span class="number">115</span>, <span class="number">184</span>);</span><br><span class="line">    <span class="attribute">border-bottom</span>: none;</span><br><span class="line">    <span class="attribute">text-decoration</span>: underline;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 菜单超链接字体大小</span></span><br><span class="line"><span class="selector-class">.menu</span> <span class="selector-class">.menu-item</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 菜单超链接样式</span></span><br><span class="line"><span class="selector-class">.menu</span> <span class="selector-class">.menu-item</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">border-bottom-color</span>: <span class="built_in">rgba</span>(<span class="number">161</span>, <span class="number">102</span>, <span class="number">171</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 超链接样式</span></span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">80</span>, <span class="number">115</span>, <span class="number">184</span>);</span><br><span class="line">    <span class="attribute">border-bottom-color</span>: <span class="built_in">rgb</span>(<span class="number">80</span>, <span class="number">115</span>, <span class="number">184</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">161</span>, <span class="number">102</span>, <span class="number">171</span>);</span><br><span class="line">    <span class="attribute">border-bottom-color</span>: <span class="built_in">rgb</span>(<span class="number">161</span>, <span class="number">102</span>, <span class="number">171</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 侧栏超链接样式（友链的样式）</span></span><br><span class="line"><span class="selector-class">.sidebar</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ccc</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>段落缩进。<strong>不建议使用缩进，有序列表格式乱套</strong>，添加：</li>
</ul>
<p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置段落首行缩进，调整段落下部间距</span></span><br><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">text-indent</span>: <span class="number">2em</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0.8em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<pre><code>对于不需要缩进的段落，采用特定标志 `ooNoIndent00` 添加在段落的最前面，js 预处理去掉该标志，并设置不缩进。在`~/hexo/themes/next/source/js`中添加文件`custom.js`并添加：</code></pre>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 特定段落(标志 ooNoIndent00)不缩进</span><br><span class="line">$(&#x27;p:contains(&quot;ooNoIndent00&quot;)&#x27;).each(function() &#123;</span><br><span class="line">    var str = $(this).text();</span><br><span class="line">    if (str.match(&quot;^ooNoIndent00&quot;)) &#123;</span><br><span class="line">        var text = $(this).html();</span><br><span class="line">        $(this).css(&#x27;text-indent&#x27;, &#x27;0em&#x27;);</span><br><span class="line">        $(this).html(text.replace(&#x27;ooNoIndent00&#x27;, &#x27;&#x27;));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p><code>~/hexo/source/_data/styles.styl</code>或 <code>~/hexo/themes/next/source/css/_variables/custom.styl</code> 涉及的个性化内容：</p>
<ul>
<li>修改全局字体大小，添加：</li>
</ul>
<p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$font</span>-size-base = <span class="number">16px</span>; <span class="comment">// 默认是 16px 大小</span></span><br><span class="line"><span class="variable">$font</span>-family-headings = Georgia, sans <span class="comment">// 标题，修改成你期望的字体族</span></span><br><span class="line"><span class="variable">$font</span>-family-base = <span class="string">&quot;Microsoft YaHei&quot;</span>, Verdana, sans-serif <span class="comment">// 修改成你期望的字体族</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>更改全站外链颜色，添加：</li>
</ul>
<p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Global link color.</span></span><br><span class="line"><span class="variable">$link</span>-<span class="attribute">color</span> = <span class="number">#4078c0</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>使图片默认居中：</li>
</ul>
<p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- <span class="selector-class">.post-body</span> <span class="selector-tag">img</span> &#123;<span class="attribute">margin</span>: <span class="number">0</span>; &#125;</span><br><span class="line">+ <span class="selector-class">.post-body</span> <span class="selector-tag">img</span> &#123;<span class="attribute">margin</span>: <span class="number">0</span> auto;&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="设置静态背景图像">V.V.III. 设置静态背景图像</h3>
<p>设置背景图片，且不随页面滚动。</p>
<ol style="list-style-type: decimal">
<li><p>将背景图文件<code>background.jpg</code>置于<code>/themes/next/source/images/</code>文件夹内。或者使用自动更新背景图片：<code>https://source.unsplash.com/random/1600x900</code></p></li>
<li><p>修改如下代码：</p></li>
</ol>
<p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Custom styles.</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(/images/background.jpg);</span><br><span class="line">  <span class="comment">// background: url(https://source.unsplash.com/random/1600x900);</span></span><br><span class="line">  <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-position</span>:<span class="number">50%</span> <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ol start="3" style="list-style-type: decimal">
<li>修改不透明度。</li>
</ol>
<p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main-inner</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">60px</span> <span class="number">60px</span> <span class="number">60px</span> <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">500px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<div id="hexo-topindex">

</div>
<h3 id="博文置顶">V.V.IV. 博文置顶</h3>
<ol style="list-style-type: decimal">
<li>环境配置：</li>
</ol>
<ul>
<li><p>如果安装<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/hexo-generator-topindex">hexo-generator-topindex</a>插件，可跳过修改<code>hero-generator-index</code> 插件的js代码。</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-topindex --save</span><br></pre></td></tr></table></figure></p></li>
<li><p>手动修改 <code>hero-generator-index</code> 插件，修改如下代码：</p>
<p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#x27;use strict&#x27;;</span><br><span class="line">var pagination = require(&#x27;hexo-pagination&#x27;);</span><br><span class="line">module.exports = function(locals)&#123;</span><br><span class="line">  var config = this.config;</span><br><span class="line">  var posts = locals.posts;</span><br><span class="line">    posts.data = posts.data.sort(function(a, b) &#123;</span><br><span class="line">        if(a.top &amp;&amp; b.top) &#123; // 两篇文章top都有定义</span><br><span class="line">            if(a.top == b.top) return b.date - a.date; // 若top值一样则按照文章日期降序排</span><br><span class="line">            else return b.top - a.top; // 否则按照top值降序排</span><br><span class="line">        &#125;</span><br><span class="line">        else if(a.top &amp;&amp; !b.top) &#123; // 以下是只有一篇文章top有定义，那么将有top的排在前面（这里用异或操作居然不行233）</span><br><span class="line">            return -1;</span><br><span class="line">        &#125;</span><br><span class="line">        else if(!a.top &amp;&amp; b.top) &#123;</span><br><span class="line">            return 1;</span><br><span class="line">        &#125;</span><br><span class="line">        else return b.date - a.date; // 都没定义按照文章日期降序排</span><br><span class="line">    &#125;);</span><br><span class="line">  var paginationDir = config.pagination_dir || &#x27;page&#x27;;</span><br><span class="line">  return pagination(&#x27;&#x27;, posts, &#123;</span><br><span class="line">    perPage: config.index_generator.per_page,</span><br><span class="line">    layout: [&#x27;index&#x27;, &#x27;archive&#x27;],</span><br><span class="line">    format: paginationDir + &#x27;/%d/&#x27;,</span><br><span class="line">    data: &#123;</span><br><span class="line">      __index: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p></li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>然后<a href="#hexo-file-header">博客文件头</a>中添加 top 值，数值越大文章越靠前，如</li>
</ol>
<p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">title: 解决Charles乱码问题</span><br><span class="line">date: 2017-05-22 22:45:48</span><br><span class="line">tags: 技巧</span><br><span class="line">categories: 技巧</span><br><span class="line">copyright: true</span><br><span class="line"><span class="addition">+ top: 100</span></span><br></pre></td></tr></table></figure></p>
<ol start="3" style="list-style-type: decimal">
<li>为了方便记忆top数，修改置顶规则。使得top数值越小，文章越靠前。</li>
</ol>
<ul>
<li><p>本地修改：将<code>~/hexo/node_modules/hexo-generator-index/lib/generator.js</code>代码中<code>return b.top - a.top;</code> 替换成 <code>return a.top - b.top;</code>即可。</p></li>
<li><p>在线CI部署：</p>
<p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pages:</span></span><br><span class="line">  <span class="attr">cache:</span></span><br><span class="line">    <span class="attr">paths:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">node_modules/</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">-g</span> <span class="string">hexo-cli</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-generator-topindex</span> <span class="string">--save</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sed</span> <span class="string">&#x27;s/b.top - a.top/a.top - b.top/&#x27;</span> <span class="string">-i</span> <span class="string">node_modules/hexo-generator-topindex/lib/generator.js</span></span><br></pre></td></tr></table></figure></p></li>
</ul>
<div id="hexo-order">

</div>
<h3 id="博文排序">V.V.V. 博文排序</h3>
<p>目前文章按创建日期（即 <code>Front-matter</code> 中的 <code>date</code>）排序。</p>
<ul>
<li>基于插件<code>hexo-generator-index</code>，</li>
</ul>
<ol style="list-style-type: decimal">
<li><p>修改如下代码：</p>
<p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- order_by: &#x27;-date&#x27;</span></span><br><span class="line"><span class="addition">+ order_by: &#x27;-updated&#x27;</span></span><br></pre></td></tr></table></figure></p></li>
<li><p>这样的话就只按<code>updated</code>排序了，因此所有文章的 <code>Front-matter</code> 中都必须要有<code>updated</code>，已发布的文章可以手动修改或者找方法批量将 <code>data</code>换成<code>updated</code>，对于将来的文章，将<code>~/hexo/scaffolds/post.md</code> 在date后加入一行 <code>updated: &#123;&#123; date &#125;&#125;</code>。</p></li>
</ol>
<ul>
<li>在插件<a target="_blank" rel="noopener" href="https://github.com/amlove2/hexo-generator-topindex">hexo-generator-topindex</a>或者<a target="_blank" rel="noopener" href="https://github.com/netcan/hexo-generator-index-pin-top">hexo-generator-index-pin-top</a><a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a>的基础上，将<code>~/hexo/node_modules/hexo-generator-index/lib/generator.js</code>代码中 <code>a.date</code>, <code>b.date</code> 分别改为 <code>a.updated</code>, <code>b.updated</code>即可。</li>
</ul>
<p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pages:</span></span><br><span class="line">  <span class="attr">cache:</span></span><br><span class="line">    <span class="attr">paths:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">node_modules/</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">-g</span> <span class="string">hexo-cli</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-generator-topindex</span> <span class="string">--save</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sed</span> <span class="string">&#x27;s/a.date/a.updated/&#x27;</span> <span class="string">-i</span> <span class="string">node_modules/hexo-generator-topindex/lib/generator.js</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sed</span> <span class="string">&#x27;s/b.date/b.updated/&#x27;</span> <span class="string">-i</span> <span class="string">node_modules/hexo-generator-topindex/lib/generator.js</span></span><br></pre></td></tr></table></figure></p>
<div id="hexo-heading">

</div>
<h3 id="博文标题序号">V.V.VI. 博文标题序号</h3>
<p>虽然<code>toc.number</code>提供了目录的标题序号，但文章内部的标题却没有添加。使用<a target="_blank" rel="noopener" href="https://github.com/r12f/hexo-heading-index">hexo-heading-index</a>可以解决这个问题。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-heading-index@latest --save</span><br></pre></td></tr></table></figure>
<p>站点配置文件中添加如下代码，同时关闭主题配置文件<code>toc.number</code>：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">heading_index:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">index_styles:</span> <span class="string">&quot;&#123;1&#125; &#123;1&#125; &#123;1&#125; &#123;1&#125; &#123;1&#125; &#123;1&#125;&quot;</span></span><br><span class="line">  <span class="attr">connector:</span> <span class="string">&quot;.&quot;</span></span><br><span class="line">  <span class="attr">global_prefix:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">global_suffix:</span> <span class="string">&quot;. &quot;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>其中对于每一个序号的样式定义，我们放在了index_styles中，它由1-6个序号样式用空格连接组成，每个样式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;前缀&gt;&#123;序号类型[:样式:序号宽度]&#125;&lt;后缀&gt;</span><br><span class="line"></span><br><span class="line">&lt;全局前缀 (global_prefix)&gt;&lt;h1序号&gt;[&lt;连接符 (connector)&gt;&lt;h2序号&gt;&lt;连接符 (connector)&gt;...&lt;h6序号&gt;]&lt;全局后缀 (global_suffix)&gt;</span><br></pre></td></tr></table></figure>
<p>对于默认设置有如下解释：在指定全局前缀为空，全局后缀为<code>.</code>，连接符为<code>.</code>，每一级的标题序号都使用同样的序号类型：<code>1</code>，没有前缀和后缀，默认样式和序号宽度。生成序号<code>1.2.3.4.</code>。</p>
<p>比如生成序列号<code>0x00 0x01:</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">heading_index:</span><br><span class="line">  enable: true</span><br><span class="line">  index_styles: &quot;0x&#123;0:X:2&#125; 0x&#123;0:X:2&#125; 0x&#123;0:X:2&#125; 0x&#123;0:X:2&#125; 0x&#123;0:X:2&#125; 0x&#123;0:X:2&#125;&quot;</span><br><span class="line">  connector: &quot; &quot;</span><br><span class="line">  global_prefix: &quot;&quot;</span><br><span class="line">  global_suffix: &quot;: &quot;</span><br></pre></td></tr></table></figure>
<div id="hexo-emoji">

</div>
<h3 id="配置emoji表情">V.V.VII. 配置emoji表情</h3>
<div class="note warning">
<p>
未测试
</p>
</div>
<ul>
<li>使用CI自动配置博客，参考<a target="_blank" rel="noopener" href="https://novnan.github.io/Hexo/emojis-for-hexo-next/">让 Hexo NexT 支持 emoji 表情</a>。</li>
</ul>
<ol style="list-style-type: decimal">
<li><p><code>$ npm install hexo-filter-github-emojis --save</code></p></li>
<li><p>站点配置文件中添加如下代码：默认配置下是使用图片表情，如果需要使用 Unicode 表情，可以将上面配置中的<code>unicode</code> 设置为 <code>true</code>。</p>
<p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">githubEmojis:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">className:</span> <span class="string">github-emoji</span></span><br><span class="line">  <span class="attr">unicode:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">styles:</span></span><br><span class="line">  <span class="attr">localEmojis:</span></span><br></pre></td></tr></table></figure></p></li>
<li><p>hexo NexT 使用 <code>FancyBox</code> 这个图片插件导致渲染错误。修改如下代码：</p>
<p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">      algolia: &#123;</span><br><span class="line">      applicationID: &#x27;&#123;&#123; theme.algolia.applicationID &#125;&#125;&#x27;,</span><br><span class="line">      apiKey: &#x27;&#123;&#123; theme.algolia.apiKey &#125;&#125;&#x27;,</span><br><span class="line">      indexName: &#x27;&#123;&#123; theme.algolia.indexName &#125;&#125;&#x27;,</span><br><span class="line">      hits: &#123;&#123; theme.algolia_search.hits | json_encode &#125;&#125;,</span><br><span class="line">      labels: &#123;&#123; theme.algolia_search.labels | json_encode &#125;&#125;</span><br><span class="line"><span class="deletion">-    &#125;</span></span><br><span class="line"><span class="addition">+    &#125;,</span></span><br><span class="line"><span class="addition">+    emojis: &#123;</span></span><br><span class="line"><span class="addition">+      className: &#x27;&#123;&#123; config.githubEmojis.className | default(&#x27;github-emoji&#x27;) &#125;&#125;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p></li>
<li><p>修改如下代码：</p>
<p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">$(&#x27;.content img&#x27;)</span><br><span class="line">  .not(&#x27;[hidden]&#x27;)</span><br><span class="line"><span class="deletion">-  .not(&#x27;.group-picture img, .post-gallery img&#x27;)</span></span><br><span class="line"><span class="addition">+  .not(&#x27;.group-picture img, .post-gallery img, img.&#x27; + CONFIG.emojis.className)</span></span><br><span class="line">  .each(function () &#123;</span><br><span class="line">    var $image = $(this);</span><br><span class="line">    var imageTitle = $image.attr(&#x27;title&#x27;);</span><br><span class="line">    var $imageWrapLink = $image.parent(&#x27;a&#x27;);</span><br><span class="line"></span><br><span class="line">    if ($imageWrapLink.size() &lt; 1) &#123;</span><br><span class="line">        var imageLink = ($image.attr(&#x27;data-original&#x27;)) ? this.getAttribute(&#x27;data-original&#x27;) : this.getAttribute(&#x27;src&#x27;);</span><br><span class="line">      $imageWrapLink = $image.wrap(&#x27;&lt;a href=&quot;&#x27; + imageLink + &#x27;&quot;&gt;&lt;/a&gt;&#x27;).parent(&#x27;a&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    $imageWrapLink.addClass(&#x27;fancybox fancybox.image&#x27;);</span><br><span class="line">    $imageWrapLink.attr(&#x27;rel&#x27;, &#x27;group&#x27;);</span><br><span class="line"></span><br><span class="line">    if (imageTitle) &#123;</span><br><span class="line">      $imageWrapLink.append(&#x27;&lt;p class=&quot;image-caption&quot;&gt;&#x27; + imageTitle + &#x27;&lt;/p&gt;&#x27;);</span><br><span class="line"></span><br><span class="line">      //make sure img title tag will show correctly in fancybox</span><br><span class="line">      $imageWrapLink.attr(&#x27;title&#x27;, imageTitle);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">$(&#x27;.fancybox&#x27;).fancybox(&#123;</span><br><span class="line">  helpers: &#123;</span><br><span class="line">    overlay: &#123;</span><br><span class="line">      locked: false</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p></li>
<li><p>替换 <code>hexo-renderer-stylus</code> 插件，</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm un hexo-renderer-stylus --save</span><br><span class="line">$ npm install hexo-renderer-stylus-plus --save</span><br></pre></td></tr></table></figure></p></li>
<li><p>添加如下代码：</p>
<p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Github emojis class name</span></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">get_emoji_class</span><span class="params">()</span></span> &#123;</span><br><span class="line">  emoji_class = <span class="built_in">hexo-site-config</span>(<span class="string">&#x27;githubEmojis.className&#x27;</span>)</span><br><span class="line">  return emoji_class ? emoji_class : <span class="string">&#x27;github-emoji&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$github</span>-emojis-class-name   = <span class="built_in">get_emoji_class</span>()</span><br></pre></td></tr></table></figure></p></li>
<li><p>最后在自定义样式文件中添加：</p>
<p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">img</span>.&#123;<span class="variable">$github</span>-emojis-class-name&#125; &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">1.7em</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1.7em</span>;</span><br><span class="line">  <span class="attribute">vertical-align</span>: -<span class="number">0.4em</span>;</span><br><span class="line">  <span class="attribute">border</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li>
</ol>
<ul>
<li>使用本地配置博客，参考<a target="_blank" rel="noopener" href="https://reuixiy.github.io/technology/computer/computer-aided-art/2017/06/09/hexo-next-optimization.html#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-emoji">如何使用 emoji</a>。</li>
</ul>
<h3 id="配置sitemap">V.V.VIII. 配置Sitemap</h3>
<p>Sitemap 的提交主要的目的，是要避免搜索引擎的爬虫没有完整的收录整个网页的内容，所以提交 Sitemap 是能够补足搜索引擎的不足，进而加速网页的收录速度，达到搜寻引擎友好的目的。<strong>注意path前面是二个空格缩进</strong>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure>
<p>将其配置到站点配置文件中。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sitemap:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">sitemap.xml</span></span><br><span class="line">  <span class="comment">#path 表示 Sitemap 的路径. 默认为 sitemap.xml.</span></span><br></pre></td></tr></table></figure>
<p>对于国内用户还需要安装插件 <code>hexo-generator-baidu-sitemap</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-baidu-sitemap --save</span><br></pre></td></tr></table></figure>
<p>将其配置到站点配置文件中。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baidusitemap:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">baidusitemap.xml</span></span><br></pre></td></tr></table></figure>
<div id="hexo-addmenu">

</div>
<h3 id="添加菜单页">V.V.IX. 添加菜单页</h3>
<ol style="list-style-type: decimal">
<li>在主题配置的<code>_config</code>文件下找到<code>menu</code>，添加<code>menu</code>的内容。然后在主题的配置文件添加<code>menu_icon</code>字段设置对应的icon。</li>
<li>在<code>Hexo/source</code>文件夹下面新建名字为<code>photo</code> 的文件夹，里面添加一个<code>index.md</code>文件（命令行：<code>hexo new page &quot;photo&quot;</code>）。</li>
<li>自己到<a target="_blank" rel="noopener" href="http://fontawesome.io/icons/">FontAwsome官网</a>图标集中选择自己喜欢的icon，然后记住名字，保存在主题配置文件<code>~/blog/themes/next/_config.yml</code>中的<code>menu_icon</code>字段中就可以啦，不需要加上前面的&quot;icon-&quot;。</li>
<li>如果想要中文的名字，并且想要个性化定制我们的页面，可以在主题的<code>/themes/next/languages/zh-CN</code>文件下的<code>zh-CN</code>（中文）语言包下增加相应的<code>menu</code>字段。注意冒号后面留空。</li>
<li>在写文章的时候，在头部信息添加相应的字段，就在tags页面和categories中显示相应的分类。</li>
</ol>
<div id="hexo-hit">

</div>
<h3 id="添加阅读榜">V.V.X. 添加阅读榜</h3>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.liaofuzhan.com/posts/781439527.html">基于Firestore的文章阅读排行（热榜）功能</a></p>
</blockquote>
<p>参考<a target="_blank" rel="noopener" href="http://thief.one/2017/03/03/Hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/">博客</a>，首先我们可以使用leancloud来统计页面阅读数量，以及储存这些信息，然后通过leancloud提供的api编写js脚本来获取阅读数量信息，并展示在页面上。</p>
<div class="note warning">
<p>
<a target="_blank" rel="noopener" href="https://github.com/xCss/Valine/issues/50">Valine评论与自定义页面API访问冲突</a>，需要强制刷新加载。为了实现阅读量的展示，目前（2019年5月6日）的解决方案只有利用<a target="_blank" rel="noopener" href="https://github.com/theme-next/hexo-theme-next/pull/345">最新的Valine评论</a>开启浏览量设置<code>visitor: true</code>并关闭<code>leancloud_visitors</code>。
</p>
</div>
<ol style="list-style-type: decimal">
<li><p>添加<a href="#hexo-addmenu">menu菜单</a>，并设置中英文和图标。</p></li>
<li><p>添加如下代码：</p></li>
</ol>
<p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">---</span></span><br><span class="line">comments: false</span><br><span class="line"><span class="comment">---</span></span><br><span class="line"></span><br><span class="line">&#123;% centerquote %&#125;阅读榜Top 30&#123;% endcenterquote %&#125;</span><br><span class="line"></span><br><span class="line">&lt;p align=&quot;justfly&quot; id=&quot;hits&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;//cdn1.lncld.net/static/js/3.0.4/av-min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;AV.initialize(&quot;leancloud_visitors_id&quot;, &quot;leancloud_visitors_key&quot;);&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">  var num=30</span><br><span class="line">  var time=0</span><br><span class="line">  var title=&quot;&quot;</span><br><span class="line">  var url=&quot;&quot;</span><br><span class="line">  var query = new AV.Query(&#x27;Counter&#x27;);</span><br><span class="line">  query.notEqualTo(&#x27;id&#x27;,0);</span><br><span class="line">  query.descending(&#x27;time&#x27;);</span><br><span class="line">  query.limit(num);</span><br><span class="line">  query.find().then(function (todo) &#123;</span><br><span class="line">    for (var i=0;i&lt;num;i++)&#123;</span><br><span class="line">      var result=todo[i].attributes;</span><br><span class="line">      time=result.time;</span><br><span class="line">      title=result.title;</span><br><span class="line">      url=result.url;  </span><br><span class="line">      var content=&quot;&lt;p&gt;&quot;+&quot;&lt;font color=&#x27;#e20404&#x27;&gt;&quot;+&quot;热度&quot;+time+&quot;℃&quot;+&quot;：&quot;+&quot;&lt;a href=&#x27;&quot;+&quot;https://sli1989.github.io&quot;+url+&quot;&#x27;&gt;&quot;+title+&quot;&lt;/font&gt;&quot;+&quot;&lt;/a&gt;&quot;+&quot;&lt;/p&gt;&quot;;</span><br><span class="line">      //document.write(&quot;&lt;a href=&#x27;&quot;+&quot;https://sli1989.github.io&quot;+url+&quot;&#x27;&gt;&quot;+title+&quot;&lt;/a&gt;&quot;+&quot;    Readtimes:&quot;+time+&quot;&lt;br&gt;&quot;);</span><br><span class="line">      document.getElementById(&quot;hits&quot;).innerHTML+=content</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, function (error) &#123;</span><br><span class="line">    console.log(&quot;error&quot;);</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<div class="note info">
<p>
<a target="_blank" rel="noopener" href="https://blog.csdn.net/XcantloadX/article/details/78301853">阅读量 api.leancloud.cn 解析失败</a>的解决方法
</p>
</div>
<h3 id="配置评论系统">V.V.XI. 配置评论系统</h3>
<div id="valine">

</div>
<p><a target="_blank" rel="noopener" href="https://valine.js.org">Valine评论系统</a>：基于LeanCloud的极简的评论系统，<a target="_blank" rel="noopener" href="https://valine.js.org/#/quickstart">快速开始</a>，<a target="_blank" rel="noopener" href="https://jayshao.com/disqus-to-valine/#5a4446d58d6d810062ca9482">评论系统从Disqus迁移到Valine</a>。（<a target="_blank" rel="noopener" href="https://www.liaofuzhan.com/posts/554801533.html">LeanCloud切换国际版</a>）</p>
<ul>
<li><p>Valine-Admin 添加了<a target="_blank" rel="noopener" href="https://github.com/zhaojun1998/Valine-Admin">后台管理功能</a>。如有需要，可以使用 Github Action 来实现应用实例的定时自动部署及唤醒：<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1628950">优雅解决LeanCloud流控问题</a>，<a target="_blank" rel="noopener" href="https://github.com/lmm214/leancloud-auto-deploy/blob/master/.github/workflows/auto-deploy.yml">leancloud-auto-deploy</a>。</p></li>
<li><p>我们可以和<a href="#hexo-hit">添加阅读榜</a>一样，添加评论区进行查看。因为不同 leancloud 版本库造成初始化失效问题。<a target="_blank" rel="noopener" href="https://github.com/xCss/Valine/issues/50">Valine评论与自定义页面API访问冲突</a>，请设置所有源设置为<code>&lt;script src=&quot;//cdn1.lncld.net/static/js/3.0.4/av-min.js&quot;&gt;&lt;/script&gt;</code>。但是文章基于LeanCloud的阅读量失效，需要等待仓库更新。</p></li>
</ul>
<p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">---</span></span><br><span class="line">title: Comments</span><br><span class="line">comments: false</span><br><span class="line"><span class="comment">---</span></span><br><span class="line"></span><br><span class="line">&#123;% centerquote %&#125;留言板&#123;% endcenterquote %&#125;</span><br><span class="line"></span><br><span class="line">&lt;p align=&quot;justfly&quot; id=&quot;heheda&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;//cdn1.lncld.net/static/js/3.0.4/av-min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;AV.initialize(&quot;leancloud_visitors_id&quot;, &quot;leancloud_visitors_key&quot;);&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">  var num=50</span><br><span class="line">  var query = new AV.Query(&#x27;Comment&#x27;);</span><br><span class="line">  query.notEqualTo(&#x27;id&#x27;,0);</span><br><span class="line">  query.descending(&#x27;createdAt&#x27;)</span><br><span class="line">  query.limit(num);</span><br><span class="line">  query.find().then(function (todo) &#123;</span><br><span class="line">    for (var i=0;i&lt;num;i++)&#123;</span><br><span class="line">      var result=todo[i].attributes;</span><br><span class="line">      title=result.comment;</span><br><span class="line">      url=result.url;  </span><br><span class="line">        nick=result.nick;  </span><br><span class="line">      var updatedAt = todo[i].updatedAt;</span><br><span class="line">      var content=&quot;&lt;blockquote&gt;&quot;+&quot;&lt;font size=2&gt;&quot;+&quot;&lt;a href=&#x27;&quot;+&quot;https://sli1989.github.io&quot;+url+&quot;#comments&quot;+&quot;&#x27;&gt;&quot;+&quot;&lt;font color=&#x27;#9932CC&#x27;&gt;&quot;+nick+&quot;&lt;/font&gt;&quot;+&quot;&lt;/a&gt;&quot;+&quot; commented on &quot;+updatedAt+&quot;：&quot;+&quot;&lt;br&gt;&quot;+title+&quot;&lt;/font&gt;&quot;+&quot;&lt;blockquote&gt;&quot;;</span><br><span class="line">      document.getElementById(&quot;heheda&quot;).innerHTML+=content</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, function (error) &#123;</span><br><span class="line">    console.log(&quot;error&quot;);</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>最后在主题配置文件中开启即可：</li>
</ul>
<p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Valine.</span></span><br><span class="line"><span class="comment"># You can get your appid and appkey from https://leancloud.cn</span></span><br><span class="line"><span class="comment"># more info please open https://github.com/xCss/Valine</span></span><br><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">appid:</span>  <span class="comment"># your leancloud application appid</span></span><br><span class="line">  <span class="attr">appkey:</span>  <span class="comment"># your leancloud application appkey</span></span><br><span class="line">  <span class="attr">notify:</span> <span class="literal">false</span> <span class="comment"># mail notifier , https://github.com/xCss/Valine/wiki</span></span><br><span class="line">  <span class="attr">verify:</span> <span class="literal">false</span> <span class="comment"># Verification code</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">Comment</span> <span class="string">input</span> <span class="string">placeholder</span></span><br></pre></td></tr></table></figure></p>
<h3 id="配置音视频播放器">V.V.XII. 配置音视频播放器</h3>
<p>详细音视频插入方式，点击查看<a target="_blank" rel="noopener" href="https://sli1989.github.io/music/#musicplayer">音乐外链播放器</a>和<a target="_blank" rel="noopener" href="https://sli1989.github.io/music/#videoplayer">视频播放器</a>配置。</p>
<h4 id="侧边栏音乐播放器">V.V.XII.I. 侧边栏音乐播放器</h4>
<p>由于Next.Pisces主题无法调整侧边栏大小，网易云播放器外观受限，使用网易云播放器需要使用Next.Mist主题。网易云播放器为<code>iframe</code>结构，还是偶尔会提示“资源未加载”问题。</p>
<p>虾米播放器为<code>embed</code>结构（flash player），暂时没有出现“资源未加载”问题。也可以根据博客主题实现外观调整。暂时推荐使用<a target="_blank" rel="noopener" href="https://sli1989.github.io/music/#xiamiplayer">虾米外链播放器</a>。</p>
<blockquote>
<p><strong>说明</strong>：Chrome浏览器中，需要手动点击才能查看flash控件。在Chrome高版本中，plugins 页面被移除后，可以访问: <code>chrome://settings/content</code> 调整 Flash、PDF 的设置。如果你想让所有网站都默认启用 flash 不用一个个的添加,可以访问：<code>chrome://flags/#run-all-flash-in-allow-mode</code> 选择允许。</p>
</blockquote>
<p>添加如下代码：</p>
<blockquote>
<p>注意添加位置，在<code>theme.sidebar.b2t</code>按钮前面添加，全站网页均可见：在<code>set cc</code>前面添加，只有主页可见播放器</p>
</blockquote>
<p>``<code>diff ~/hexo/themes/next/layout/_macro/sidebar.swig</code> ...</p>
<p>%　网易云播放器</p>
<br>
<div id="music163player">
<pre><code>&lt;iframe frameborder=&quot;no&quot; border=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; width=&quot;280&quot; height=&quot;260&quot; src=&quot;//music.163.com/outchain/player?type=2&amp;id=38358214&amp;auto=0&amp;height=66&quot;&gt;
&lt;/iframe&gt;</code></pre>
</div>
<p>%　虾米播放器 Pisces主题设置 200<em>240 Mist主题设置 270</em>240</p>
<br>
<div id="xiamiplayer">
<pre><code>&lt;embed src=&quot;http://www.xiami.com/widget/9731524_277625635_300_260_d90000_333333_0/collectPlayer.swf&quot; type=&quot;application/x-shockwave-flash&quot; width=&quot;300&quot; height=&quot;260&quot; wmode=&quot;opaque&quot;&gt;&lt;/embed&gt;
&lt;/div&gt;</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;div id=&quot;h5player&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">#### HTML5音乐播放器</span><br><span class="line"></span><br><span class="line">HTML5音乐播放器jQuery插件参考[一款简洁小巧的HTML5底部悬浮音乐播放器](http://www.jq22.com/jquery-info11923)和[为你的博客添加h5的audio播放器](https://ergou.scuxl.cn/2017/05/23/为你的博客添加音乐播放器)。</span><br><span class="line"></span><br><span class="line">1. 下载[播放器](http://pan.baidu.com/s/1slyR4yp) （密码：oznd）（[Github源](https://github.com/sli1989/HEXO-NEXT-CUSTOM/tree/master/source/static)），解压后丢到站点根目录，也就是`source-static`目录下面。在站点`_config.yml`中，设置`skip_render: static/**`（&lt;font color=red&gt;两个星号&lt;/font&gt;）。以上文件已经包括了如下设置，使用`localstorage`存储音乐的播放状态：</span><br><span class="line">   </span><br><span class="line">   - 在`~/hexo/source/static/js/player.js`的`setProgress`函数中加入</span><br><span class="line">     </span><br><span class="line">     ```diff</span><br><span class="line">     var setProgress = function (value) &#123;</span><br><span class="line">         var currentSec = parseInt(value % 60) &lt; 10 ? &#x27;0&#x27; + parseInt(value % 60) : parseInt(value % 60),</span><br><span class="line">             ratio = value / audio.duration * 100;</span><br><span class="line">     </span><br><span class="line">         $(&#x27;.timer&#x27;).html(parseInt(value / 60) + &#x27;:&#x27; + currentSec);</span><br><span class="line">     +   localStorage.time = value</span><br><span class="line">     +   localStorage.song = currentTrack</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>loadMusic</code>函数后面，新定义一个函数。<code>sessionStorage.autoPlay = &quot;true&quot;</code>控制自动播放。</p>
<p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">var FirstLoad = function (i, time) &#123;</span><br><span class="line">    if (i == undefined) &#123;</span><br><span class="line">        i = 0</span><br><span class="line">        currentTrack = 0</span><br><span class="line">        shuffleIndex = 0</span><br><span class="line">    &#125;</span><br><span class="line">    loadMusic(i)</span><br><span class="line">    if (time) &#123;</span><br><span class="line">        audio.currentTime = time</span><br><span class="line">    &#125;</span><br><span class="line">    if (localStorage.volume) &#123;</span><br><span class="line">        audio.volume = localStorage.volume</span><br><span class="line">    &#125;</span><br><span class="line">    if (sessionStorage.autoPlay == undefined) &#123;</span><br><span class="line">        sessionStorage.autoPlay = &quot;true&quot;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p>修改<code>currentTrack</code>的赋值部分。</p>
<p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var currentTrack = localStorage.song, audio, timeout;</span><br><span class="line">var shuffle_array = localStorage.qplayer_shuffle_array;</span><br><span class="line"></span><br><span class="line">if (isShuffle &amp;&amp; shuffle_array != undefined &amp;&amp; playlist.length <span class="comment">=== (shuffleArray = JSON.parse(shuffle_array)).length) &#123;</span></span><br><span class="line">    shuffleIndex = 0;</span><br><span class="line">    if (currentTrack == undefined) &#123;</span><br><span class="line">        currentTrack = shuffleArray[0];</span><br><span class="line">        $(&#x27;#QPlayer .cover&#x27;).attr(&#x27;title&#x27;, &#x27;点击关闭随机播放&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    isShuffle = false;</span><br><span class="line">    $(&#x27;#QPlayer .cover&#x27;).attr(&#x27;title&#x27;, &#x27;点击开启随机播放&#x27;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p>然后，将最开始调用的<code>loadMusic</code>替换为<code>FirstLoad</code>函数，这样就可以在打开/刷新页面时将播放上次的音乐和上次的时间。</p>
<p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- loadMusic(currentTrack);</span></span><br><span class="line"><span class="addition">+ FirstLoad(currentTrack, localStorage.time);</span></span><br><span class="line">if (sessionStorage.autoPlay == &quot;true&quot;) &#123;</span><br><span class="line">    play()</span><br><span class="line">&#125;</span><br><span class="line">if (localStorage.volume == undefined) &#123;</span><br><span class="line">    localStorage.volume = 0.2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p><code>~/hexo/source/static/js/player.js</code>的<code>$(&quot;div.ssBtn&quot;).click()</code>控制播放器是否一直弹出，注释掉即可。</p></li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>如果你想整个博客都能够播放音乐，在 <code>~/hexo/themes/next/layout</code> 中新建<code>_my</code>目录 和<code>audio.swig</code> 文件，并添加如下代码：（谨慎利用 <a target="_blank" rel="noopener" href="https://theme-next.org/docs/advanced-settings.html#Injects">Inject</a> 功能，可能会出现<code>DOMException: The play() request was interrupted</code>的情况而无法播放）</li>
</ol>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if theme.audio.enable %&#125;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot; /&gt;</span><br><span class="line">    &lt;title&gt;&lt;/title&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;/static/css/player.css&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;div id=&quot;QPlayer&quot;&gt;</span><br><span class="line">    &lt;div id=&quot;pContent&quot;&gt;</span><br><span class="line">        &lt;div id=&quot;player&quot;&gt;</span><br><span class="line">            &lt;span class=&quot;cover&quot;&gt;&lt;/span&gt;</span><br><span class="line">            &lt;div class=&quot;ctrl&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;musicTag marquee&quot;&gt;</span><br><span class="line">                    &lt;strong&gt;Title&lt;/strong&gt;</span><br><span class="line">                     &lt;span&gt; - &lt;/span&gt;</span><br><span class="line">                    &lt;span class=&quot;artist&quot;&gt;Artist&lt;/span&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;progress&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;timer left&quot;&gt;0:00&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;contr&quot;&gt;</span><br><span class="line">                        &lt;div class=&quot;rewind icon&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;div class=&quot;playback icon&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;div class=&quot;fastforward icon&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;right&quot;&gt;</span><br><span class="line">                        &lt;div class=&quot;liebiao icon&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;ssBtn&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;adf&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;ol id=&quot;playlist&quot;&gt;&lt;/ol&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script src=&quot;//cdn.bootcss.com/jQuery.Marquee/1.3.94/jquery.marquee.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  var playlist = [];</span><br><span class="line">  &#123;% for src in theme.audio.sources %&#125;</span><br><span class="line">  playlist.push(&#123;title:&#x27;&#123;&#123;src.title&#125;&#125;&#x27;,artist:&#x27;&#123;&#123;src.artist&#125;&#125;&#x27;,mp3:&#x27;&#123;&#123; src.mp3 &#125;&#125;&#x27;,cover:&#x27;&#123;&#123;src.cover&#125;&#125;&#x27;&#125;)</span><br><span class="line">  &#123;% endfor %&#125;</span><br><span class="line">  var isRotate = true;</span><br><span class="line">  var autoplay = false;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;/static/js/player.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  function bgChange()&#123;</span><br><span class="line">    var lis= $(&#x27;.lib&#x27;);</span><br><span class="line">    for(var i=0; i&lt;lis.length; i+=2)</span><br><span class="line">    lis[i].style.background = &#x27;rgba(246, 246, 246, 0.5)&#x27;;</span><br><span class="line">  &#125;</span><br><span class="line">  window.onload = bgChange;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include &#x27;_third-party/exturl.swig&#x27; %&#125;</span><br><span class="line"></span><br><span class="line"><span class="addition">+ &#123;% include &#x27;_my/audio.swig&#x27; %&#125;</span></span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<ol start="3" style="list-style-type: decimal">
<li>在主题配置文件中添加如下项：其中<code>enable</code>控制是否加载播放器，<code>sources</code>代表音乐的配置项。获取<a target="_blank" rel="noopener" href="https://sli1989.github.io/music/#music-download">音乐外链</a><strong>前试听</strong>。如果有多个音乐的话，每个音乐之间用<code>,</code>隔开。</li>
</ol>
<p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">audio:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">sources:</span> [</span><br><span class="line">        &#123;<span class="attr">title:</span> <span class="string">&#x27;午后庭院&#x27;</span>,</span><br><span class="line">        <span class="attr">artist:</span> <span class="string">&#x27;夏天播放&#x27;</span>,</span><br><span class="line">        <span class="attr">mp3:</span> <span class="string">&#x27;https://music.163.com/song/media/outer/url?id=29095562.mp3&#x27;</span>,</span><br><span class="line">        <span class="attr">cover:</span> <span class="string">&#x27;https://p1.music.126.net/5uQHiJSmUMo74VAR4KJCTA==/6670737045946097.jpg&#x27;</span> &#125;,</span><br><span class="line">        &#123;<span class="attr">title:</span> <span class="string">&#x27;远走高飞&#x27;</span>,</span><br><span class="line">        <span class="attr">artist:</span> <span class="string">&#x27;金志文&#x27;</span>,</span><br><span class="line">        <span class="attr">mp3:</span> <span class="string">&#x27;https://music.163.com/song/media/outer/url?id=1297742772.mp3&#x27;</span>,</span><br><span class="line">        <span class="attr">cover:</span> <span class="string">&#x27;https://p1.music.126.net/elfqBKIdad0KYCCeKQpDSA==/18700493767108166.jpg&#x27;</span> &#125;</span><br><span class="line">        ]</span><br></pre></td></tr></table></figure></p>
<ol start="4" style="list-style-type: decimal">
<li>自此，整个H5播放器的基本设置就完成了。另外，可以自定义HTML5音乐播放器颜色：</li>
</ol>
<p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#pContent .ssBtn &#123;</span><br><span class="line">    width:20px;</span><br><span class="line">    height:60px;</span><br><span class="line"><span class="addition">+    background:#1abc9c none repeat scroll 0% 0%;</span></span><br><span class="line">    position:relative;</span><br><span class="line">    right:0px;</span><br><span class="line">    bottom:0px;</span><br><span class="line">    box-sizing:border-box;</span><br><span class="line">    border-left:none;</span><br><span class="line">    cursor:pointer;</span><br><span class="line">    display:box-shadow:;</span><br><span class="line">    float:right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#playlist li:hover &#123;</span><br><span class="line">    color:#716e6e;</span><br><span class="line">    font-weight:bold;</span><br><span class="line"><span class="addition">+    border-left:3px solid #1abc9c;</span></span><br><span class="line">    padding:3px 15px 3px 11px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#playlist li.playing &#123;</span><br><span class="line">  color:#716e6e;</span><br><span class="line">    font-weight:bold;</span><br><span class="line"><span class="addition">+    border-left:3px solid #bc1a1a;</span></span><br><span class="line">    padding:3px 15px 3px 11px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>另外，你也可以添加音量控制。播放器里是有两个上一首和下一首的按钮的，左键点击他们就会切换歌曲，那么我们让他右键点击降低和升高声音就好啦。</p>
<div class="note info">
<p>
已知bug：无缓存第一次的声音存在bug，如有缓存时，音量默认为系统音量的0.2倍。
</p>
</div>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">$(document).bind(&quot;contextmenu&quot;, function () &#123;</span><br><span class="line">    return false;</span><br><span class="line">&#125;)</span><br><span class="line">$(&#x27;.rewind&#x27;).on(&#x27;click&#x27;, function () &#123;</span><br><span class="line">    if (isShuffle) &#123;</span><br><span class="line">        shufflePlay(0);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        switchTrack(--currentTrack);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).mousedown(function (e) &#123;</span><br><span class="line">    if (3 == e.which) &#123;</span><br><span class="line">        if (audio.volume &gt;= 0.05) &#123;</span><br><span class="line">            audio.volume -= 0.05</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            audio.volume = 0;</span><br><span class="line">        &#125;</span><br><span class="line">        localStorage.volume = audio.volume</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">$(&#x27;.fastforward&#x27;).on(&#x27;click&#x27;, function () &#123;</span><br><span class="line">    if (isShuffle) &#123;</span><br><span class="line">        shufflePlay(1);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        switchTrack(++currentTrack);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).mousedown(function (e) &#123;</span><br><span class="line">    if (3 == e.which) &#123;</span><br><span class="line">        if (audio.volume &lt;= 0.95) &#123;</span><br><span class="line">            audio.volume += 0.05</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            audio.volume = 1;</span><br><span class="line">        &#125;</span><br><span class="line">        localStorage.volume = audio.volume</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<div id="hexo-vendor">

</div>
<h3 id="依赖库-cdn-加速">V.V.XIII. 依赖库 CDN 加速</h3>
<p>升级NexT v6后，需要手动安装<code>Dependencies</code>。如果出现问题，<font color="red">删除</font>对应文件夹里面的<code>.git</code>文件夹。CI部署需要<a href="#gitlab-ci">添加对应的SCRIPT</a>到<code>.gitlab-ci.yml</code>文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> themes/next</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-pace <span class="built_in">source</span>/lib/pace</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-needmoreshare2 <span class="built_in">source</span>/lib/needsharebutton</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-reading-progress <span class="built_in">source</span>/lib/reading_progress</span><br></pre></td></tr></table></figure>
<p>The <a target="_blank" rel="noopener" href="https://www.jsdelivr.com/">jsDelivr</a> is a really good CDN. It does not only crawl the js files from npm packages, and it crawls from the GitHub Releases! Therefore, we could use it to deliver some of our third-party plugins. The user doesn't need to manually clone repos, just change the vendors config, and it is done.</p>
<ol style="list-style-type: decimal">
<li>Go to the third-party plugin repo, publish a Release.</li>
<li>use the following link to reference the js files, just as other CDNs. And it could automatically minify the JS and CSS files, even if you don't have the minified version. Just use the <code>filename.min.js</code> or the <code>filename.min.css</code> to replace the file.</li>
</ol>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">https://cdn.jsdelivr.net/gh/user/repo@version/file</span></span><br><span class="line"></span><br><span class="line"><span class="attr">pangu:</span> <span class="string">https://cdn.jsdelivr.net/npm/pangu@3.3.0/dist/browser/pangu.min.js</span></span><br><span class="line"><span class="attr">fontawesome:</span> <span class="string">https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css</span></span><br><span class="line"></span><br><span class="line"><span class="attr">bookmark:</span> <span class="string">https://cdn.jsdelivr.net/gh/theme-next/theme-next-bookmark@1.0.0/bookmark.min.js</span></span><br></pre></td></tr></table></figure>
<h2 id="建立博文">V.VI. 建立博文</h2>
<ul>
<li>新建博文，格式与<a href="#hexo-file-header">博客文件头</a><code>~/hexo//scaffolds/post.md</code>一致。</li>
</ul>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new post <span class="string">&quot;new blog name&quot;</span>   </span><br><span class="line"><span class="comment"># 新建一个.md文件，并编辑完成自己的博客内容</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>Hexo 另外提供 <code>draft</code> 机制<a href="#fn5" class="footnoteRef" id="fnref5"><sup>5</sup></a>，它的原理是新文章将建立在 <code>source/_drafts</code> 目录下，因此 <code>hexo generate</code> 并不会将其编译到 <code>public</code> 目录下，所以 <code>hexo deploy</code> 也不会将其部署到 GitHub。</p></li>
<li>本机预览草稿 <code>$ hexo S --draft</code></li>
<li><p>将草稿发布为正式文章 <code>$ hexo P &lt;filename&gt;</code></p></li>
</ul>
<ul>
<li><p>Markdown编辑器当然推荐Atom，可以直接在实现Atom的Git操作，更多内容点击查看<a target="_blank" rel="noopener" href="https://sli1989.github.io/markdown-user-guide/#atom">Atom使用指南</a>，<a target="_blank" rel="noopener" href="https://sli1989.github.io/markdown-user-guide/#markdowngrammar">Markdown语法</a>。</p></li>
<li><p>图片大小设置</p></li>
</ul>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% img [class names] /path/to/image [width] [height] [title text [alt text]] %&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>在Hexo主题中，推荐使用Pandoc渲染器结合Mathjax公式，详情点击查看<a target="_blank" rel="noopener" href="https://sli1989.github.io/markdown-user-guide/#hexo-math">Hexo中显示公式</a>配置详情。</p></li>
<li><p>开启<a target="_blank" rel="noopener" href="https://sli1989.github.io/markdown-user-guide#hexo-footnotes">脚注功能</a>。</p></li>
<li><p>使用<a target="_blank" rel="noopener" href="https://sli1989.github.io/markdown-user-guide#hexo-crossref">交叉引用</a>功能。</p></li>
</ul>
<div id="hexo-tag-plugin">

</div>
<h2 id="标签插件">V.VII. 标签插件</h2>
<p>「标签」(Tag Plugin) 是 Hexo 提供的一种快速生成特定内容的方式。例如，在标准 Markdown 语法中，我们无法指定图片的大小。这种情景，我们即可使用标签来解决。Hexo 内置来许多标签来帮助写作者可以更快的书写，<a target="_blank" rel="noopener" href="https://hexo.io/docs/tag-plugins.html">完整的标签列表</a> 可以参考 Hexo 官网。另外，Hexo 也开放来接口给主题，使主题有可能提供给写作者更简便的写作方法。以下标签便是 NexT 主题当前提供的标签。详细设置可以参考<a target="_blank" rel="noopener" href="http://theme-next.iissnan.com/tag-plugins.html">内建标签</a>。</p>
<p>但是就我自己的使用感受而言，一方面它的语法规则相对于MarkDown略为冗长和麻烦，另一方面支持这一功能的MarkDown引擎经常会导致各种各样的冲突和解析错误。所以我个人推荐，在写博客文件时，不使用任何Hexo内建的标签插件，而纯粹使用MarkDown原生语法。</p>
<h3 id="文本居中引用">V.VII.I. 文本居中引用</h3>
<p>此标签将生成一个带上下分割线的引用，同时引用内文本将自动居中。文本居中时，多行文本若长度不等，视觉上会显得不对称，因此建议在引用单行文本的场景下使用。例如作为文章开篇引用 或者 结束语之前的总结引用。</p>
<p>使用方式：</p>
<ul>
<li>HTML方式：使用这种方式时，给 <code>img</code> 添加属性<code>class=&quot;blockquote-center&quot;</code> 即可。</li>
<li>标签方式：使用 <code>centerquote</code> 或者 简写 <code>cq</code>。</li>
</ul>
<blockquote>
<p>此标签要求 NexT 的版本在 0.4.5 或以上。若你正在使用的版本比较低，可以选择使用 <code>HTML</code> 方式。</p>
</blockquote>
<p>标签调用方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- HTML方式: 直接在 Markdown 文件中编写 HTML 来调用 --&gt;</span><br><span class="line">&lt;!-- 其中 class=&quot;blockquote-center&quot; 是必须的 --&gt;</span><br><span class="line">&lt;blockquote class=&quot;blockquote-center&quot;&gt;blah blah blah&lt;/blockquote&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 标签 方式，要求版本在0.4.5或以上 --&gt;</span><br><span class="line">&#123;% centerquote %&#125;blah blah blah&#123;% endcenterquote %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- 标签别名 --&gt;</span><br><span class="line">&#123;% cq %&#125; blah blah blah &#123;% endcq %&#125;</span><br></pre></td></tr></table></figure>
<p>效果示例:</p>
<p><img src="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/006V2m65ly1fqrb82czcnj30ke0803yr.jpg"></p>
<h3 id="代码块">V.VII.II. 代码块</h3>
<p>codeblock代码块用法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% codeblock [title] [lang:language] [url] [link text] %&#125;</span><br><span class="line">code snippet</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure>
<p>另一种形式的代码块，不同的是它使用三个反引号来包裹，<code>[language] [title] [url] [link text]</code>。推荐使用这种方式，避免了特殊字符的转义高亮。</p>
<ol style="list-style-type: decimal">
<li><code>[language]</code> 是代码语言的名称，用来设置代码块颜色高亮，非必须；</li>
<li><code>[title]</code> 是顶部左边的说明，非必须；</li>
<li><code>[url]</code> 是顶部右边的超链接地址，非必须；</li>
<li><code>[link text]</code> 如它的字面意思，超链接的名称，非必须。</li>
</ol>
<p>如果需要对比功能，你只需在 [language] 这写<code>diff</code>，然后在相应代码前面加上<code>-</code>和<code>+</code>就行了。也可以自定义对应的代码颜色，修改如下代码：</p>
<figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文章```代码块diff样式</span></span><br><span class="line">pre <span class="selector-class">.addition</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#e6ffed</span>;</span><br><span class="line">&#125;</span><br><span class="line">pre <span class="selector-class">.deletion</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#ffeef0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="note-标签">V.VII.III. note 标签</h3>
<ol style="list-style-type: decimal">
<li>在主题配置文件中开启配置：</li>
</ol>
<p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Note tag (bs-callout).</span></span><br><span class="line"><span class="comment"># [class] : default | primary | success | info | warning | danger.</span></span><br><span class="line"><span class="attr">note:</span></span><br><span class="line">  <span class="comment"># Note tag style values:</span></span><br><span class="line">  <span class="comment">#  - simple    bs-callout old alert style. Default.</span></span><br><span class="line">  <span class="comment">#  - modern    bs-callout new (v2-v3) alert style.</span></span><br><span class="line">  <span class="comment">#  - flat      flat callout style with background, like on Mozilla or StackOverflow.</span></span><br><span class="line">  <span class="comment">#  - disabled  disable all CSS styles import of note tag.</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">simple</span></span><br><span class="line">  <span class="attr">icons:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">border_radius:</span> <span class="number">3</span></span><br><span class="line">  <span class="comment"># Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).</span></span><br><span class="line">  <span class="comment"># Offset also applied to label tag variables. This option can work with disabled note tag.</span></span><br><span class="line">  <span class="attr">light_bg_offset:</span> <span class="number">0</span></span><br></pre></td></tr></table></figure></p>
<ol start="2" style="list-style-type: decimal">
<li>在正文<code>.MD</code>文件中插入如下代码即可，包括了<code>success/warning/default/info/danger</code>：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note warning %&#125; warning &#123;% endnote %&#125;</span><br><span class="line">&lt;div class=&quot;note success&quot;&gt;&lt;p&gt;success&lt;/p&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<div class="note success">
<p>
success
</p>
</div>
<h3 id="button-标签">V.VII.IV. Button 标签</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Usage: &#123;% button /path/to/url/, text, icon [class], title %&#125;</span><br><span class="line">Alias: &#123;% btn /path/to/url/, text, icon [class], title %&#125;</span><br></pre></td></tr></table></figure>
<p>Button with text</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btn #, Text %&#125;&#123;% btn #, Text &amp; Title,, Title %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% btn #, Text %&#125;</span><br><span class="line">&#123;% btn #, Text &amp; Title,, Title %&#125;</span><br></pre></td></tr></table></figure>
<a class="btn" href="#">Text</a>
<a class="btn" href="#" title="Title">Text & Title</a>
<a class="btn" href="#">Text</a>
<a class="btn" href="#" title="Title">Text & Title</a>
<p>Button with icon</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;&#123;% btn #,, home fa-5x %&#125;</span><br><span class="line">&#123;% btn #,, home fa-4x %&#125;</span><br><span class="line">&#123;% btn #,, home fa-3x %&#125;&#123;% btn #,, home fa-2x %&#125;&#123;% btn #,, home fa-lg %&#125;&#123;% btn #,, home %&#125;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&#123;% btn #, Text &amp; Icon (buggy), home %&#125;</span><br><span class="line">&#123;% btn #, Text &amp; Icon (fixed width), home fa-fw %&#125;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&#123;% btn #, Text &amp; Large Icon, home fa-fw fa-lg %&#125;</span><br><span class="line">&#123;% btn #, Text &amp; Large Icon &amp; Title, home fa-fw fa-lg, Title %&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure>
<p>
<a class="btn" href="#"><i class="fa fa-home fa-5x"></i></a>
<a class="btn" href="#"><i class="fa fa-home fa-4x"></i></a>
<a class="btn" href="#"><i class="fa fa-home fa-3x"></i></a>
<a class="btn" href="#"><i class="fa fa-home fa-2x"></i></a>
<a class="btn" href="#"><i class="fa fa-home fa-lg"></i></a>
<a class="btn" href="#"><i class="fa fa-home"></i></a>
</p>
<p>
<a class="btn" href="#"><i class="fa fa-home"></i>Text & Icon (buggy)</a>
<a class="btn" href="#"><i class="fa fa-home fa-fw"></i>Text & Icon (fixed width)</a>
</p>
<p>
<a class="btn" href="#"><i class="fa fa-home fa-fw fa-lg"></i>Text & Large Icon</a>
<a class="btn" href="#" title="Title"><i class="fa fa-home fa-fw fa-lg"></i>Text & Large Icon & Title</a>
</p>
<p>Button inside other tag</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note default %&#125;</span><br><span class="line">&#123;% btn #, Text &amp; Icon, home fa-fw %&#125;</span><br><span class="line">&#123;% btn #,, home, Title %&#125;&#123;% btn #, Text %&#125;</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note default"><a class="btn" href="#"><i class="fa fa-home fa-fw"></i>Text & Icon</a>
<a class="btn" href="#" title="Title"><i class="fa fa-home"></i></a><a class="btn" href="#">Text</a></div>
<p>Button margin</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;text-center&quot;&gt;&lt;span&gt;&#123;% btn #,, header %&#125;&#123;% btn #,, edge %&#125;&#123;% btn #,, times %&#125;&#123;% btn #,, circle-o %&#125;&lt;/span&gt;</span><br><span class="line">&lt;span&gt;&#123;% btn #,, italic %&#125;&#123;% btn #,, scribd %&#125;&lt;/span&gt;</span><br><span class="line">&lt;span&gt;&#123;% btn #,, google %&#125;&#123;% btn #,, chrome %&#125;&#123;% btn #,, opera %&#125;&#123;% btn #,, diamond fa-rotate-270 %&#125;&lt;/span&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;text-center&quot;&gt;&#123;% btn #, Almost, adn fa-fw fa-lg %&#125; &#123;% btn #, Over, terminal fa-fw fa-lg %&#125;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;text-right&quot;&gt;</span><br><span class="line">&#123;% btn #, Test is finished., check fa-fw fa-lg, Button tag test is finished. %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<div class="text-center">
<span><a class="btn" href="#"><i class="fa fa-header"></i></a><a class="btn" href="#"><i class="fa fa-edge"></i></a><a class="btn" href="#"><i class="fa fa-times"></i></a><a class="btn" href="#"><i class="fa fa-circle-o"></i></a></span> <span><a class="btn" href="#"><i class="fa fa-italic"></i></a><a class="btn" href="#"><i class="fa fa-scribd"></i></a></span> <span><a class="btn" href="#"><i class="fa fa-google"></i></a><a class="btn" href="#"><i class="fa fa-chrome"></i></a><a class="btn" href="#"><i class="fa fa-opera"></i></a><a class="btn" href="#"><i class="fa fa-diamond fa-rotate-270"></i></a></span>
</div>
<div class="text-center">
<a class="btn" href="#"><i class="fa fa-adn fa-fw fa-lg"></i>Almost</a>
<a class="btn" href="#"><i class="fa fa-terminal fa-fw fa-lg"></i>Over</a>
</div>
<div class="text-right">
<a class="btn" href="#" title="Button tag test is finished."><i class="fa fa-check fa-fw fa-lg"></i>Test is finished.</a>
</div>
<h3 id="tabs-标签">V.VII.V. Tabs 标签</h3>
<ol style="list-style-type: decimal">
<li>在主题配置文件中开启配置：</li>
</ol>
<p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Tabs tag.</span></span><br><span class="line"><span class="attr">tabs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">transition:</span></span><br><span class="line">    <span class="attr">tabs:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">labels:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">border_radius:</span> <span class="number">0</span></span><br></pre></td></tr></table></figure></p>
<ol start="2" style="list-style-type: decimal">
<li>源码，<code>, 2</code>表示一开始在第二个选项卡，非必须，若数值为<code>-1</code>则隐藏选项卡内容。更多用法请查看 <a target="_blank" rel="noopener" href="https://almostover.ru/2016-01/hexo-theme-next-test/#Tab-tag-test">这个页面</a> 。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs First unique name %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 1.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 2.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 3.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure>
<div class="tabs" id="first-unique-name"><ul class="nav-tabs"><li class="tab active"><a href="#first-unique-name-1">First unique name 1</a></li><li class="tab"><a href="#first-unique-name-2">First unique name 2</a></li><li class="tab"><a href="#first-unique-name-3">First unique name 3</a></li></ul><div class="tab-content"><div class="tab-pane active" id="first-unique-name-1">**This is Tab 1.**</div><div class="tab-pane" id="first-unique-name-2">**This is Tab 2.**</div><div class="tab-pane" id="first-unique-name-3">**This is Tab 3.**</div></div></div>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs Fifth unique name %&#125;</span><br><span class="line">&lt;!-- tab @text-width --&gt;</span><br><span class="line">**This is Tab 1.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&lt;!-- tab @amazon --&gt;</span><br><span class="line">**This is Tab 2.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&lt;!-- tab @bold --&gt;</span><br><span class="line">**This is Tab 3.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure>
<div class="tabs" id="fifth-unique-name"><ul class="nav-tabs"><li class="tab active"><a href="#fifth-unique-name-1"><i class="fa fa-text-width"></i></a></li><li class="tab"><a href="#fifth-unique-name-2"><i class="fa fa-amazon"></i></a></li><li class="tab"><a href="#fifth-unique-name-3"><i class="fa fa-bold"></i></a></li></ul><div class="tab-content"><div class="tab-pane active" id="fifth-unique-name-1">**This is Tab 1.**</div><div class="tab-pane" id="fifth-unique-name-2">**This is Tab 2.**</div><div class="tab-pane" id="fifth-unique-name-3">**This is Tab 3.**</div></div></div>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs Sixth unique name %&#125;</span><br><span class="line">&lt;!-- tab Solution 1@text-width --&gt;</span><br><span class="line">**This is Tab 1.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&lt;!-- tab Solution 2@amazon --&gt;</span><br><span class="line">**This is Tab 2.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&lt;!-- tab Solution 3@bold --&gt;</span><br><span class="line">**This is Tab 3.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure>
<div class="tabs" id="sixth-unique-name"><ul class="nav-tabs"><li class="tab active"><a href="#sixth-unique-name-1"><i class="fa fa-text-width"></i>Solution 1</a></li><li class="tab"><a href="#sixth-unique-name-2"><i class="fa fa-amazon"></i>Solution 2</a></li><li class="tab"><a href="#sixth-unique-name-3"><i class="fa fa-bold"></i>Solution 3</a></li></ul><div class="tab-content"><div class="tab-pane active" id="sixth-unique-name-1">**This is Tab 1.**</div><div class="tab-pane" id="sixth-unique-name-2">**This is Tab 2.**</div><div class="tab-pane" id="sixth-unique-name-3">**This is Tab 3.**</div></div></div>
<p>Tab tag permalinks：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Permalink for &gt; [Tab one](#tab-one).</span><br><span class="line">Permalink for &gt; [Tab one 1](#tab-one-1).</span><br><span class="line">Permalink for &gt; [Tab one 2](#tab-one-2).</span><br><span class="line">Permalink for &gt; [Tab one 3](#tab-one-3).</span><br><span class="line"></span><br><span class="line">&#123;% tabs Tab one %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 1.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 2.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 3.**</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure>
<p>Tab tag with other tags:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs Tags %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 1.**</span><br><span class="line"></span><br><span class="line">1. One</span><br><span class="line">2. Two</span><br><span class="line">3. Three</span><br><span class="line"></span><br><span class="line">Tabbed code block:</span><br><span class="line"></span><br><span class="line">    nano /etc</span><br><span class="line"></span><br><span class="line">&#123;% code %&#125;</span><br><span class="line">code block tag</span><br><span class="line">code block tag</span><br><span class="line">code block tag</span><br><span class="line">&#123;% endcode %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default %&#125;</span><br><span class="line">Note default tag.</span><br><span class="line">&#123;% endnote %&#125;&#123;% youtube A1Qb4zfurA8 %&#125;</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 2.**</span><br><span class="line"></span><br><span class="line">* Five</span><br><span class="line">* Six</span><br><span class="line">* Seven</span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">**This is Tab 3.**</span><br><span class="line">&#123;% note success %&#125;</span><br><span class="line">Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure>
<div class="tabs" id="tags"><ul class="nav-tabs"><li class="tab active"><a href="#tags-1">Tags 1</a></li><li class="tab"><a href="#tags-2">Tags 2</a></li><li class="tab"><a href="#tags-3">Tags 3</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tags-1">**This is Tab 1.**

1. One
2. Two
3. Three

Tabbed code block:

    nano /etc

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">code block tag</span><br><span class="line">code block tag</span><br><span class="line">code block tag</span><br></pre></td></tr></table></figure>

<div class="note default">Note default tag.</div><div class="video-container"><iframe src="https://www.youtube.com/embed/A1Qb4zfurA8" frameborder="0" loading="lazy" allowfullscreen></iframe></div></div><div class="tab-pane" id="tags-2">**This is Tab 2.**

* Five
* Six
* Seven</div><div class="tab-pane" id="tags-3">**This is Tab 3.**
<div class="note success">Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</div></div></div></div>
<h1 id="jekyll-blog">VI. Jekyll BLOG</h1>
<p>建立基于Jekyll的个人Github Pages有两条路线：</p>
<ol style="list-style-type: decimal">
<li>自己学习Jekyll教程和网页设计，设计绝对自我基因的网页。<br>
</li>
<li>Fork（简单来说是把当前仓库复制一份到你的仓库，你可以进行修改，因为你的仓库是原来仓库的新的分支）已有的开源博客仓库，在巨人的肩膀上进行符合自我的创作。建议和我一样的小白们可以从第二条路线学起。<a target="_blank" rel="noopener" href="https://github.com/jekyll/jekyll/wiki/sites">Jekyll项目的wiki页面</a>给出了大量优秀的风格各异的网站，点击右边的source链接，进入到作者的模版仓库，击右上角的<code>Fork</code>。然后在你的主页里找到你刚才Fork的分支，点进去。点击<code>Settings</code>，将<code>Repository name</code>改为 <code>&#123;你的Github用户名&#125;.github.io</code>，点击<code>Rename</code>。此时你会发现已经可以通过 <code>http://&#123;你的Github用户名&#125;.github.io</code> 访问你fork下来的网站啦！</li>
</ol>
<p>利用git克隆（参考以前内容）后，这时所有远程仓库里的源码都拷贝到 <code>e:/workspace/&#123;username&#125;.github.io</code> 这个文件夹里来了。如果clone失败有可能是网络原因，可以过一个时段再试，或者寻找梯子。</p>
<p>打开本地仓库的 <code>_posts</code> 文件夹，你的所有博文都将放在这里，写新博文只需要新建一个标准文件名的文件，在文件中编写文章内容。比如我们fork的模版中 <code>_posts</code> 文件夹里有一篇 <code>2016-03-23-hello-world.markdown</code>，你的文件命名也要严格遵循 <code>年-月-日-文章标题.文档格式</code> 这样的格式。（新文档建议使用template文件复制再修改，新建文档自己输入YAML文件头无法正常编译。）</p>
<blockquote>
<p>参考链接：<a target="_blank" rel="noopener" href="http://beiyuu.com/github-pages">使用Github Pages建独立博客</a>， <a target="_blank" rel="noopener" href="http://playingfingers.com/2016/03/26/build-a-blog/">Github Pages + Jekyll 独立博客一小时快速搭建&amp;上线指南</a></p>
</blockquote>
<h2 id="评论功能">VI.I. 评论功能</h2>
<blockquote>
<p>参考文献 http://cenalulu.github.io/jekyll/setup-comment-for-your-blog/ http://pizn.github.io/2011/11/15/use-disqus-for-your-post.html</p>
</blockquote>
<ul>
<li><p>注册一个<a target="_blank" rel="noopener" href="https://www.disqus.com">Disqus</a>帐号。</p></li>
<li><p>新建实例。注册完毕后登入帐号，点击Admin菜单进入管理页面,选择<a target="_blank" rel="noopener" href="https://disqus.com/admin/create">Add new site</a>来新建一个实例，platform 选择jekyll。然后填入需要的资料。</p></li>
<li><p>对于 GitHub Page 来说，把这段代码，嵌入到<code>layout</code> 里面的 <code>post.html</code> 里面，放在最后就好了。</p></li>
</ul>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;disqus_thread&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line">*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.</span><br><span class="line">*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/</span><br><span class="line">/*</span><br><span class="line">var disqus_config = function () &#123;</span><br><span class="line">this.page.url = PAGE_URL;  // Replace PAGE_URL with your page&#x27;s canonical URL variable</span><br><span class="line">this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page&#x27;s unique identifier variable</span><br><span class="line">&#125;;</span><br><span class="line">*/</span><br><span class="line">(function() &#123; // DON&#x27;T EDIT BELOW THIS LINE</span><br><span class="line">var d = document, s = d.createElement(&#x27;script&#x27;);</span><br><span class="line">s.src = &#x27;https://XX(Website Name).disqus.com/embed.js&#x27;;</span><br><span class="line">s.setAttribute(&#x27;data-timestamp&#x27;, +new Date());</span><br><span class="line">(d.head || d.body).appendChild(s);</span><br><span class="line">&#125;)();</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;noscript&gt;Please enable JavaScript to view the &lt;a href=&quot;https://disqus.com/?ref_noscript&quot;&gt;comments powered by Disqus.&lt;/a&gt;&lt;/noscript&gt;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>文章中添加Yaml头文件信息</li>
</ul>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">layout: default</span><br><span class="line">comments: true</span><br><span class="line"># other options</span><br></pre></td></tr></table></figure></p>
<h2 id="标签功能">VI.II. 标签功能</h2>
<blockquote>
<p>参考链接 <a target="_blank" rel="noopener" href="http://zixiaojindao.github.io/blogging/2012/09/30/jekyll-category-tag-recent-comment/">为JEKYLL博客添加分类，标签和评论</a>，<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000000406017#articleHeader6">使用Jekyll在Github上搭建个人博客</a>。</p>
</blockquote>
<h2 id="本地调试">VI.III. 本地调试</h2>
<blockquote>
<p>参考链接：<a target="_blank" rel="noopener" href="http://yizeng.me/2013/05/10/install-jekyll-3-on-windows/">Install Jekyll 3 on Windows</a></p>
</blockquote>
<ol style="list-style-type: decimal">
<li><a target="_blank" rel="noopener" href="http://jekyllcn.com/docs/installation/#事先准备" title="Permalink">事先准备</a>。安装 Jekyll 相当简单，但是你得先做好一些准备工作。开始前你需要确保你在系统里已经有如下配置。</li>
</ol>
<ul>
<li><a target="_blank" rel="noopener" href="https://rubyinstaller.org/downloads/">Ruby</a>，For example, <code>Ruby 2.3.3-p222 (x64)</code></li>
<li><a target="_blank" rel="noopener" href="http://rubygems.org/pages/download">Ruby DevKit</a>，For instance, <code>DevKit-mingw64-64-4.7.2-20130224-1432-sfx.exe</code> is for 64-bit Windows with Ruby 2.3.3 x64.</li>
<li><a target="_blank" rel="noopener" href="http://rubygems.org/pages/download">RubyGems</a>
<ul>
<li>Unpack into a directory and <code>cd</code> there</li>
<li>Install with: <code>ruby setup.rb</code> (you may need admin/root privilege)</li>
</ul></li>
<li><a target="_blank" rel="noopener" href="http://nodejs.org/">NodeJS</a>, 或其他 JavaScript 运行环境（Jekyll 2 或更早版本需要 CoffeeScript 支持）。</li>
<li><a target="_blank" rel="noopener" href="https://www.python.org/downloads/">Python 2.7</a>（Jekyll 2 或更早版本）</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>用 RubyGems 安装 <a target="_blank" rel="noopener" href="http://jekyllcn.com/docs/installation/#用-rubygems-安装-jekyll" title="Permalink">Jekyll</a>。安装 Jekyll 的最好方式就是使用<a target="_blank" rel="noopener" href="http://rubygems.org/pages/download">RubyGems</a>. 你只需要打开终端输入以下命令就可以安装了。所有的 Jekyll 的 gem 依赖包都会被自动安装，所以你完全不用去担心。如果你在安装中碰到了问题，请查看 <a target="_blank" rel="noopener" href="http://jekyllcn.com/docs/troubleshooting/">troubleshooting</a> 或者 <a target="_blank" rel="noopener" href="https://github.com/jekyll/jekyll/issues/new">report an issue</a> 那么 Jekyll 社区就会帮助你解决问题了。</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gem install jekyll</span><br></pre></td></tr></table></figure></p>
<ol start="3" style="list-style-type: decimal">
<li>Initialize and create config.yml file. In opened notepad window, if it's not already there, add a new line <code>- C:/Ruby23</code> at the end, save and close.</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> C:/RubyDevKit</span><br><span class="line">ruby dk.rb init</span><br><span class="line">notepad config.yml</span><br><span class="line">ruby dk.rb install</span><br></pre></td></tr></table></figure></p>
<ol style="list-style-type: decimal">
<li>Install Jekyll and Bundler.</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gem install jekyll bundler</span><br><span class="line"><span class="comment"># Verify that Jekyll gem has been installed properly</span></span><br><span class="line">jekyll -v</span><br><span class="line">bundle -v</span><br></pre></td></tr></table></figure></p>
<ol style="list-style-type: decimal">
<li>Start Jekyll。用浏览器打开<code>http://127.0.0.1:4000</code>，即可看到效果，而且在修改文件的同时刷新页面即可实时更新。</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jekyll new myblog</span><br><span class="line"><span class="built_in">cd</span> myblog</span><br><span class="line">bundle <span class="built_in">exec</span> jekyll serve</span><br></pre></td></tr></table></figure></p>
<p>第二种方法：未成功链接github-page，只能复制到jekyll本地博客进行调试。</p>
<ol style="list-style-type: decimal">
<li><p>在你的site(github-page) 主目录下，执行<code>bundle install</code></p></li>
<li><p>你的site(github-page) 根目录下执行<code>bundle exec jekyll serve</code>启动jekyll，默认访问地址为：<code>http://localhost:4000</code>，这样你就顺利的得到了一个本地版的github-page镜像。最后你可以随时更新你本地的jekyll，通过<code>bundle update</code>。</p></li>
</ol>
<div id="domain">

</div>
<h1 id="域名绑定">VII. 域名绑定</h1>
<blockquote>
<p>域名设置参考<a target="_blank" rel="noopener" href="http://itcoding.tk/2016/06/26/set-up-custom-domain-for-github-pages/">域名绑定</a>，<a target="_blank" rel="noopener" href="http://quantumman.me/blog/setting-up-a-domain-with-gitHub-pages.html">GitHub Pages 绑定来自阿里云的域名</a>。</p>
</blockquote>
<p>CNAME记录就是把域名解析到另外一个域名，再转跳到IP。A记录就是把一个域名解析到一个IP地址。如果没有A记录，www域名无法访问。CNAME文件是否包含www决定了在同时配置了顶级域名和www域名的情况下，浏览博客时网址栏是否包含www。所以，带不带www看个人喜好。</p>
<ul>
<li>CNAME记录比较稳定，一旦主机的IP发生变化，无需重新解析。</li>
<li>CNAME记录的生效时间要比A记录快。</li>
<li>如果你的CNAME文件内容加了www,那么就直接配置CNAME记录就可以了。在域名解析中添加一项CNAME记录解析，主机记录填<code>www</code>，记录值填写你的域名如<code>usermane.github.io.</code>，这样就可以通过<code>www.hostname</code>来访问。</li>
<li>如果你的CNAME文件内容没有加www，那么就需要配置A记录，通过<code>hostname</code>访问。主机记录填<code>@</code>，记录值填<code>官方服务器ip</code>（<code>ping username.github.io.</code>获取）。</li>
</ul>
<div class="note info">
<p>
（2020年4月2日更新）目前带不带www的域名解析都可以通过CNAME解析实现。设置主机记录www/@，记录类型为CNAME，记录值是<code>username.github.io.</code>。
</p>
</div>
<p>明白了基础后，下面进行域名绑定，实现在加或者不加www的基础上都能访问。</p>
<ol style="list-style-type: decimal">
<li><p>域名可以在很多地方购买，如<a target="_blank" rel="noopener" href="https://wanwang.aliyun.com/domain/">万网</a>。<a target="_blank" rel="noopener" href="https://help.aliyun.com/knowledge_detail/39783.html">万网域名解析设置方法</a>。</p></li>
<li><p>添加Github Pages解析。博客配置好后，在<code>Hexo/source</code>中建立 <code>CNAME</code> 文件，把文件内容改成你购买的域名，如hosname，不需要加http这样的前缀。在万网的域名解析界面按如下设置，<strong>设置Github Pages解析为海外</strong>：</p></li>
</ol>
<ul>
<li>在阿里云控制台，设置主机记录@，记录类型为A，记录值是IP：<code>185.199.108.153</code>（Github Pages服务器指定的IP地址：<code>185.199.108.153</code>，<code>185.199.109.153</code>，<code>185.199.110.153</code>，<code>185.199.111.153</code>）。</li>
<li>在阿里云控制台，设置主机记录www，记录类型为CNAME，记录值是<code>username.github.io.</code>。如果你想将 <code>blog.hostname</code>映射到 <code>usermane.github.io.</code>，那么在主机记录中就应该填写blog，记录类型为CNAME，记录值是 <code>usermane.github.io.</code>。而且这个时候，你github项目的CNAME文件内容也应该相应的改为<code>blog.hostname</code>。</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li><p>添加CODING Pages解析。在项目主页访问<code>构建与部署-&gt;静态网址-&gt;设置</code>，输入你的自己的域名就可以了。一般只配置了CNAME，可以将coding page绑定多个域名实现跳转，设置首选即可（需完善个人信息才能绑定）。原Coding网址的CNAME记录：<code>pages.coding.me.</code>，IP地址：<code>192.30.252.154</code>，<code>192.30.252.153</code>。2020年01月以后Coding网址的CNAME记录：<code>xxx.coding-pages.com</code>，IP地址：<code>124.156.187.34</code>，<code>150.109.4.162</code>。仅供参考。</p></li>
<li><p>修改站点配置文件中的url地址为<code>http://你的域名</code>，配置完了之后经过一段时间的等待就能通过域名访问博客啦，最终域名都跳转到<code>hosname</code>。</p></li>
</ol>
<h2 id="项目主页">VII.I. 项目主页</h2>
<ol style="list-style-type: decimal">
<li>新建一个repo，repo名字随意。</li>
<li>点进repo主页然后点击右面的<code>Settings</code>，页面往下拉到<strong>GitHub Pages</strong>部分，选择<code>Launch automatic page generator</code>&gt;<code>Continue to layouts</code>&gt;<code>Publish page</code>即可。</li>
</ol>
<blockquote>
<p>这样一个项目主页就建立完成了，此时可以用<code>&lt;username&gt;.github.io/&lt;projectname&gt;</code>访问到了。</p>
</blockquote>
<h2 id="绑定二级域名">VII.II. 绑定二级域名</h2>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://drkbl.com/use-github-as-dns/">把 Github 用作 DNS 设置二级域名跳转</a><br>
<a target="_blank" rel="noopener" href="http://aqiongbei.top/blog/2017/01/07/github-sub-domains/">关于Github Pages绑定二级域名</a></p>
</blockquote>
<div class="note success">
<p>
测试成功
</p>
</div>
<p>不考虑绑定的自定义域名的前提下，个人主页的GitHub二级域名为<code>&lt;username&gt;.github.io</code>，项目主页的GitHub二级域名为<code>&lt;username&gt;.github.io/&lt;projectname&gt;</code>，没有<code>&lt;projectname&gt;.&lt;username&gt;.github.io</code>这种方式。个人主页的展示内容以<code>master</code>分支里的文件为准；而项目主页的展示内容以<code>gh-pages</code>分支内的文件为准。</p>
<p>Github 的项目支持使用 <code>gh-pages</code> 分支生成项目页。绑定在<code>http://sli1989.github.io/project-name</code>，并且也支持设置CNAME。</p>
<ol style="list-style-type: decimal">
<li><p>新建一个<code>repository</code>，也可以在已有的仓库中新建<code>gh-pages</code>分支。</p></li>
<li><p>对于博客仓库，选择新建仓库，方便部署不同内容。本地<a href="#hexo-init">初始化NEXT博客</a>，并进行<a href="#hexo-debug">博客调试</a>和<a href="#hexo-deploy">部署</a>。</p></li>
</ol>
<p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">url:</span> <span class="string">http://test.saili.science</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># url: https://sli1989.github.io/blog</span></span><br><span class="line"><span class="comment"># 根目录改成/博客仓库/</span></span><br><span class="line"><span class="comment"># root: /blog/</span></span><br><span class="line"></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">&#x27;git@github.com:sli1989/testing.git&#x27;</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">gh-pages</span></span><br></pre></td></tr></table></figure></p>
<ol start="3" style="list-style-type: decimal">
<li>对于非博客仓库，我们也需要将branch改成<code>gh-pages</code>才可以使用。</li>
</ol>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:sli1989/testing.git</span><br><span class="line"><span class="comment"># 首先复制你的git项目地址，就是以.git结尾的那个地址，将其拉到本地来。</span></span><br><span class="line"><span class="built_in">cd</span> testing</span><br><span class="line"><span class="comment"># 进入代码目录</span></span><br><span class="line">git checkout -b gh-pages</span><br><span class="line"><span class="comment"># 在本地建立一个分支 并切换到新分支</span></span><br><span class="line">git push origin gh-pages</span><br><span class="line"><span class="comment"># 将新分支发布在github上</span></span><br><span class="line">git branch -d master</span><br><span class="line"><span class="comment"># 将本地的master分支删除</span></span><br><span class="line">git push origin :master</span><br><span class="line"><span class="comment"># 将github远程端的master分支删除</span></span><br></pre></td></tr></table></figure></p>
<ol start="4" style="list-style-type: decimal">
<li><p>修改CNAME文件，将其指向的域名，比如我的<code>test.saili.science</code>，<strong>不要添加任何空格或者回车之类的符号</strong>。</p></li>
<li><p>添加域名解析记录。选择CNAME 解析，主机记录为<code>test</code>（你想要得域名），记录值为<code>sli1989.github.io</code>。点击保存，一般10分钟以内就生效，就可以直接访问<code>test.saili.science</code>。</p></li>
</ol>
<h1 id="https访问">VIII. HTTPS访问</h1>
<blockquote>
<p>比较麻烦，还是不要折腾了。</p>
</blockquote>
<blockquote>
<p>参考链接：<a target="_blank" rel="noopener" href="https://zxc.science/2016/09/06/https/">获得小绿锁一把！(启用Https)</a>，<a target="_blank" rel="noopener" href="https://www.tiexo.cn/https/">博客启用全站HTTPS</a>，<a target="_blank" rel="noopener" href="http://www.figotan.org/2016/04/26/using-free-wosign-to-certificate-your-blog-on-gitlab/">Gitlab上设置证书</a>，<a href="#gitlab-pages-ssl">Gitlab-pages的https访问设置</a>。<a href="#coding-pages-ssl">Coding-pages的https访问设置</a></p>
</blockquote>
<p>HTTPS全称Hypertext Transfer Protocol Secure 超文本安全协议。也就是HTTP加上安全传输层协议TSL/SSL。介于HTTP层与TCP层之间的一层安全协议。通过安全认证，可以避免HTTP中间人攻击，信息污染，信息劫持等问题。详细信息的话腾讯Bugly的文章<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000004199917">全站HTTPS来了</a>介绍得很详细。HTTPS基础原理，通信过程，在这篇文章里都有详细地讲到。</p>
<p>如果是放到Github上，如果按照官方的文档，你不能使用自己的证书，如果使用了自定义的域名，就不能使用<code>https</code>了。 当然你可以自己再搭个服务器， 然后做一下转发，但是这样就感觉有点多余了。如果不自建服务器， 就只能从DNS入手，目前国内的DNS供应商都没有提供免费的HTTPS认证, 但是可以使用国外的<a target="_blank" rel="noopener" href="https://www.cloudflare.com/">cloudflare</a>。<strong>但是https环境无法正常解析<code>embed</code>类音乐插件</strong>。</p>
<div id="gitlab-pages-ssl">

</div>
<h2 id="gitlab-pages添加ssl">VIII.I. GitLab Pages添加SSL</h2>
<blockquote>
<p>参考链接：<a target="_blank" rel="noopener" href="http://www.figotan.org/2016/04/26/using-free-wosign-to-certificate-your-blog-on-gitlab/">Gitlab上设置证书</a></p>
</blockquote>
<p>知乎上有一篇<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/36710815">帖子</a>，无意间介绍了两个提供免费证书的服务商，一个叫<a target="_blank" rel="noopener" href="https://www.startssl.com/">StartSSL</a>，另一个是<a target="_blank" rel="noopener" href="https://www.wosign.com/">沃通SSL</a>。</p>
<h3 id="阿里云证书">VIII.I.I. 阿里云证书</h3>
<blockquote>
<p>申请的免费证书，但无法部署证书到Github，</p>
</blockquote>
<ol style="list-style-type: decimal">
<li>登录阿里云控制台，<a target="_blank" rel="noopener" href="https://common-buy.aliyun.com/?spm=5176.2020520163.cas.1.3R3hjv&amp;commodityCode=cas#/buy">购买证书</a>。证书类型选择 免费型DV SSL，然后完成购买。</li>
<li>在<a target="_blank" rel="noopener" href="https://yundun.console.aliyun.com/?spm=5176.2020520110.1002.d10cas.AOKWvR&amp;p=cas#/cas/home">我的证书 控制台</a>，找到购买的证书，在操作栏里选择 补全。填写证书相关信息。域名验证：可以选择 DNS，如果域名用了阿里云的 DNS 服务，再勾选一下 证书绑定的域名在 阿里云的云解析。系统生成 CSR，点一下 创建。提交审核。</li>
<li>如果一切正常，10 分钟左右，申请的证书就会审核通过。注意查看“进度”，进行“检查配置”保证正确配置。</li>
</ol>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">增加如下DNS记录（24小时内有效，过期后请重新获取记录并配置）</span><br><span class="line">记录类型：TXT</span><br><span class="line">主机记录：@</span><br></pre></td></tr></table></figure> 4. 在阿里云的证书管理那里，如果申请的证书审核通过，你就可以下载了，点击 下载，可以选择不同的类型，可以选择 NGINX，或 Apache 之类的服务器。根据自己网站的 Web 服务器类型，下载对应的证书。解压以后，你会得到两个文件一个是<code>*.key</code>，一个是 <code>*.pem</code>。 5. 根据不同的Web Server类型选择不同的子压缩包。Gitlab的Pages只支持pem（证书的另一种格式）格式的证书和私钥。下载证书for Nginx。回到<code>GitLab</code>，找到你的博客项目 **_Settings&gt;Pages&gt;+New Domain**。把你上一步生成得到的<code>PEM certificate</code>粘贴到第一栏，把<code>private key</code>粘贴到第二栏。然后点击<code>Create New Domain</code>。</p>
<h3 id="cloudflare证书">VIII.I.II. CloudFlare证书</h3>
<ol style="list-style-type: decimal">
<li><p>想要使用<code>CloudFlare</code>的<strong>HTTPS</strong>服务，就必须使用它的<code>nameserver</code>，也就是使用它的域名解析服务。添加一条A记录，指向<code>52.167.214.135</code>，然后添加一条<code>CNAME</code>记录，把<code>www</code>子域名设置成<code>yourname.gitlab.io</code>。当你的域名接入之后，点击<code>Crypto</code>，找到<code>Origin Certificates</code>，点击<code>Create Certificate</code>。把生成的证书和私钥都<strong>保存到本地</strong>，接下来需要用到。</p></li>
<li><p>回到<code>GitLab</code>，找到你的博客项目 <strong><em>Settings&gt;Pages&gt;+New Domain:</em></strong><br>
把你上一步生成得到的<code>PEM certificate</code>粘贴到第一栏，把<code>private key</code>粘贴到第二栏。</p></li>
</ol>
<div id="coding-pages-ssl">

</div>
<h2 id="coding-pages添加ssl">VIII.II. Coding Pages添加SSL</h2>
<p>在域名配置中，点击开启<code>强制 HTTPS 访问</code>即可。目前只能配置<code>www.hostname</code>，无法去掉www。</p>
<p>启用过程中遇到几个需要注意的地方(坑)，在这里总结下：</p>
<ul>
<li><p>如果你在启用HTTPS前，已经绑定好了自定义域名。记得全部解绑后，重新绑定。否则不会自动申请SSL证书。</p></li>
<li><p>如果你采用了<code>Coding Page</code>和<code>GitHub Page</code>双托管的方式，记得将DNS中解析到<code>GitHub Page</code>的记录暂停或删除。否则<code>Let's Encrypt</code>主机根据域名解析记录验证域名所有权时，会定位到<code>GitHub Page</code>的主机上，导致<code>Let's Encrypt</code>SSL证书申请失败。</p></li>
</ul>
<h2 id="cdn方式">VIII.III. CDN方式</h2>
<p>CDN的全称就是Content Delivery Network，内容分发网络。其最基本的思路就是，用户在访问一个网站的时候，不直接访问这个网站的服务器，CDN系统会根据地理位置，将用户重新导向离其最近的CDN服务器。网站的内容在这个CDN服务器上会有相应的缓存，从而使用户更快地访问到所需要的内容，可以减少网络拥堵的情况，也可以减轻网站的服务器承受太大的访问量，以及带宽不足的情况。</p>
<h3 id="cloudflare添加ssl">VIII.III.I. CloudFlare添加SSL</h3>
<p>考虑到 GitHub Pages 不提供对自定义域名的 https 服务，你需要一个反向代理给你加上 HTTPS ， CloudFlare 是最好选择。虽然这里所使用的方法，不是安全的一种方法。网站仍然会面临中间人攻击等一系列问题。因为服务器与CDN之间的通信未加密。但是至少用户在访问网站的时候，不会被通信服务商再拦截再什么广告了。</p>
<p>当Coding + GitHub 双 Pages 部署，CloudFlare 的 NS 不能分区解析，所以无法直连 Coding 服务器。</p>
<p><strong>网页反应有点慢，多等待至能够输入</strong>。因为CloudFlare的SSL协议标准与国内标准不同的原因，并且在国内没有相应节点，所以会访问慢，还可能会起着反效果。</p>
<p>CloudFlare提供的SSL服务是基于SNI技术的，也就是说，机子上是IE8及以下用户完全无法打开（Chrome使用证书为系统，所以在win7下IE8的Chrome浏览器也是无法打开的，无论版本）</p>
<ol style="list-style-type: decimal">
<li><p>创建<a target="_blank" rel="noopener" href="https://www.cloudflare.com/a/sign-up">CloudFlare帐户</a>，并添加网站。</p></li>
<li><p>登陆后，<a target="_blank" rel="noopener" href="https://www.cloudflare.com/a/add-site">增加你的域名</a>。输入你的域名，例如 yicodes.com 并点击 Begin Scan。注意不要写WWW前缀，大约60秒即可完成域名解析扫描。完成后点击 Continue Setup 继续下一步。 <img src="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/006V2m65ly1fqrb8ad41yj30r7088js0.jpg"></p></li>
<li><p>选择免费计划，然后下一步~</p></li>
<li><p>到你域名控制面板修改cloudflare给出的域名服务器。注：官方说明，域名服务器修改最长需要72小时生效 ，用了两个域名测试，大约需要 5~30 分钟，看到 Status: Active 即可</p></li>
</ol>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Current Nameservers Change Nameservers to:</span><br><span class="line">dns19.hichina.com david.ns.cloudflare.com</span><br><span class="line">dns20.hichina.com lily.ns.cloudflare.com</span><br></pre></td></tr></table></figure></p>
<ol start="5" style="list-style-type: decimal">
<li><p>点击 crypto 菜单 , 然后设置 <code>full</code>。</p></li>
<li><p>点击 <code>Page Rules - create Page Rules</code>菜单，添加自动重定向到 SSL页面。填写完毕之后点击<code>Save and Deploy</code>就可以了，可能需要一段时间，毕竟有缓存。 <img src="https://ghfast.top/https://raw.githubusercontent.com/sli1989/blogimg/master/img/006V2m65ly1fqrb8hp5thj30lx0cdmy3.jpg"></p></li>
<li><p>添加SSL的教程就此完成，一般需要5~30分钟生效！</p></li>
<li><p>至此，必须手动输入<code>https</code>前缀才能访问加密的站点，要想在任何情况下都以加密方式访问网站，可以在网站模版的头中加入<code>http</code>到<code>https</code>的强制跳转。打开<code>layout</code>目录下的<code>_layout.swig</code>，在<code>&lt;head&gt;</code>标签中加入以下代码，注意把<code>yoursite.com</code>替换为你的域名，这里为<code>g2ex.me</code>。</p></li>
</ol>
<h3 id="七牛免费ssl证书">VIII.III.II. 七牛免费SSL证书</h3>
<div class="note warning">
<p>
未测试
</p>
</div>
<p><a target="_blank" rel="noopener" href="https://github.com/excaliburhan/blog/issues/16">使用七牛免费SSL证书并配置自定义域名CDN加速</a></p>
<h3 id="lets-encrypt">VIII.III.III. Let’s Encrypt</h3>
<div class="note warning">
<p>
未测试
</p>
</div>
<p><a target="_blank" rel="noopener" href="https://letsencrypt.org/">Let’s Encrypt</a>：<a target="_blank" rel="noopener" href="https://github.com/huangqian8/installer">安装Cerbot，配置SSL证书</a>（本脚本使用Let's Encrypt，其余SSL证书请自行安装），等同于<a target="_blank" rel="noopener" href="https://thoroughyoung.info/2017/02/08/hexo-build-blog-complete-guide-2/">ssl 证书申请(开启 https 服务)</a>。</p>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p><a target="_blank" rel="noopener" href="https://peterxugo.github.io/2017/05/27/hexo%E5%86%99%E5%8D%9A%E5%AE%A2/">CI-自动构建</a><a href="#fnref1">↩</a></p></li>
<li id="fn2"><p><a target="_blank" rel="noopener" href="https://changkun.us/archives/2017/06/232/">Hexo + GitHub + Travis CI + VPS 自动部署</a><a href="#fnref2">↩</a></p></li>
<li id="fn3"><p><a target="_blank" rel="noopener" href="https://blog.n0trace.com/2017/07/15/%E7%94%A8gitlab-ci%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%E9%83%A8%E7%BD%B2hexo%E5%8D%9A%E5%AE%A2/index.html">用gitlab-ci持续集成部署hexo博客</a><a href="#fnref3">↩</a></p></li>
<li id="fn4"><p><a target="_blank" rel="noopener" href="http://www.netcan666.com/2015/11/22/%E8%A7%A3%E5%86%B3Hexo%E7%BD%AE%E9%A1%B6%E9%97%AE%E9%A2%98/">解决Hexo置顶问题</a><a href="#fnref4">↩</a></p></li>
<li id="fn5"><p><a target="_blank" rel="noopener" href="https://novnan.github.io/Hexo/hexo-draft/">Hexo 文章保存为草稿</a><a href="#fnref5">↩</a></p></li>
</ol>
</div>
</div>
    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>请我一杯咖啡吧！</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.jpg" alt="Alex LEE 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="/images/alipay.jpg" alt="Alex LEE 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          <div class="followme">
  <span>欢迎关注我的其它发布渠道</span>

  <div class="social-list">

      <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/Git/" rel="tag"><i class="fa fa-tag"></i> Git</a>
              <a href="/tags/Hexo/" rel="tag"><i class="fa fa-tag"></i> Hexo</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/movies/" rel="prev" title="追剧助手">
                  <i class="fa fa-angle-left"></i> 追剧助手
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/vc/" rel="next" title="C程序设计">
                  C程序设计 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Alex LEE</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">317k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">19:14</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div><div class="footer-custom"> Hosted by <a target="_blank" href="https://pages.github.com">GitHub Pages</a>  |  <a target="_blank"  href="https://about.gitlab.com/stages-devops-lifecycle/pages/">Gitlab Pages</a> </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"sli1989","repo":"gitalk","client_id":"9fa53d6156d8791703b5","client_secret":"706eeec44bf22fe410e90d364fe8a348ab8bcaed","admin_user":"sli1989","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":null,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"d4eda917bd8d6153c6de24fa42758c5e"}</script>
<script src="/js/third-party/comments/gitalk.js" defer></script>

  
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
	<title></title>
	<link rel="stylesheet" href="/static/css/player.css">
</head>

<div id="QPlayer">
	<div id="pContent">
		<div id="player">
			<span class="cover"></span>
			<div class="ctrl">
				<div class="musicTag marquee">
					<strong>Title</strong>
					 <span> - </span>
					<span class="artist">Artist</span>
				</div>
				<div class="progress">
					<div class="timer left">0:00</div>
					<div class="contr">
						<div class="rewind icon"></div>
						<div class="playback icon"></div>
						<div class="fastforward icon"></div>
					</div>
					<div class="right">
						<div class="liebiao icon"></div>
					</div>
				</div>
			</div>
		</div>
		<div class="ssBtn">
				<div class="adf"></div>
		</div>
	</div>
	<ol id="playlist"></ol>
</div>
<script src="//cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script>
  var playlist = [];
  
  playlist.push({title:'午后庭院',artist:'夏天播放',mp3:'https://music.163.com/song/media/outer/url?id=29095562.mp3',cover:'https://p1.music.126.net/5uQHiJSmUMo74VAR4KJCTA==/6670737045946097.jpg'})
  
  playlist.push({title:'远走高飞',artist:'金志文',mp3:'https://music.163.com/song/media/outer/url?id=1297742772.mp3',cover:'https://p1.music.126.net/elfqBKIdad0KYCCeKQpDSA==/18700493767108166.jpg'})
  
  playlist.push({title:'她',artist:'不可撤销乐队',mp3:'https://music.163.com/song/media/outer/url?id=29747622.mp3',cover:'https://p1.music.126.net/4x2X7W_VGHQeHoMR4a3Wbw==/3227066628477266.jpg'})
  
  playlist.push({title:'给你',artist:'陈奕迅',mp3:'https://music.163.com/song/media/outer/url?id=64706.mp3',cover:'https://p1.music.126.net/GK7EB01AIEE9-qHkBi-3vg==/89060441862562.jpg'})
  
  playlist.push({title:'千禧',artist:'徐秉龙',mp3:'https://music.163.com/song/media/outer/url?id=522510615.mp3',cover:'https://y.gtimg.cn/music/photo_new/T002R300x300M000004UOSJ5117bcd.jpg'})
  
  playlist.push({title:'年度之歌',artist:'谢安琪',mp3:'https://music.163.com/song/media/outer/url?id=308169.mp3',cover:'http://p1.music.126.net/SkSda5laDTH73h_a9ZYEig==/109951164146248533.jpg'})
  
  playlist.push({title:'边走边唱',artist:'李荣浩',mp3:'https://music.163.com/song/media/outer/url?id=31134197.mp3',cover:'https://p1.music.126.net/4Pu7M0q88fVVoo1ZFS_nmw==/3408486047237011.jpg'})
  
  var isRotate = true;
  var autoplay = false;
</script>
<script src="/static/js/player.js"></script>
<script>
  function bgChange(){
	var lis= $('.lib');
	for(var i=0; i<lis.length; i+=2)
	lis[i].style.background = 'rgba(246, 246, 246, 0.5)';
  }
  window.onload = bgChange;
</script>

  <script type="text/javascript" src="/js/custom.js"></script>
</body>
</html>
